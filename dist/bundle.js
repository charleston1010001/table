!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Table=e():t.Table=e()}(window,function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=4)}([function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=function(t,e){var o=t[1]||"",i=t[3];if(!i)return o;if(e&&"function"==typeof btoa){var n=(l=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[o].concat(r).concat([n]).join("\n")}var l;return[o].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o}).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(i[r]=!0)}for(n=0;n<t.length;n++){var l=t[n];"number"==typeof l[0]&&i[l[0]]||(o&&!l[2]?l[2]=o:o&&(l[2]="("+l[2]+") and ("+o+")"),e.push(l))}},e}},function(t,e,o){var i,n,r={},l=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=i.apply(this,arguments)),n}),s=function(t){var e={};return function(t,o){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,o);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),a=null,c=0,h=[],d=o(7);function u(t,e){for(var o=0;o<t.length;o++){var i=t[o],n=r[i.id];if(n){n.refs++;for(var l=0;l<n.parts.length;l++)n.parts[l](i.parts[l]);for(;l<i.parts.length;l++)n.parts.push(g(i.parts[l],e))}else{var s=[];for(l=0;l<i.parts.length;l++)s.push(g(i.parts[l],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(t,e){for(var o=[],i={},n=0;n<t.length;n++){var r=t[n],l=e.base?r[0]+e.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[l]?i[l].parts.push(s):o.push(i[l]={id:l,parts:[s]})}return o}function p(t,e){var o=s(t.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=h[h.length-1];if("top"===t.insertAt)i?i.nextSibling?o.insertBefore(e,i.nextSibling):o.appendChild(e):o.insertBefore(e,o.firstChild),h.push(e);else if("bottom"===t.insertAt)o.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=s(t.insertAt.before,o);o.insertBefore(e,n)}}function _(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function b(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return o.nc}();i&&(t.attrs.nonce=i)}return v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(o){t.setAttribute(o,e[o])})}function g(t,e){var o,i,n,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var l=c++;o=a||(a=b(e)),i=y.bind(null,o,l,!1),n=y.bind(null,o,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),i=function(t,e,o){var i=o.css,n=o.sourceMap,r=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||r)&&(i=d(i));n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var l=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(l),s&&URL.revokeObjectURL(s)}.bind(null,o,e),n=function(){_(o),o.href&&URL.revokeObjectURL(o.href)}):(o=b(e),i=function(t,e){var o=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}.bind(null,o),n=function(){_(o)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=l()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var o=f(t,e);return u(o,e),function(t){for(var i=[],n=0;n<o.length;n++){var l=o[n];(s=r[l.id]).refs--,i.push(s)}t&&u(f(t,e),e);for(n=0;n<i.length;n++){var s;if(0===(s=i[n]).refs){for(var a=0;a<s.parts.length;a++)s.parts[a]();delete r[s.id]}}}};var m,w=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function y(t,e,o,i){var n=o?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,n);else{var r=document.createTextNode(n),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(r,l[e]):t.appendChild(r)}}},function(t,e){t.exports='<svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="10" fill="#388AE5"></circle><path fill="#FFF" d="M10.9 9.1h3.7a.9.9 0 1 1 0 1.8h-3.7v3.7a.9.9 0 1 1-1.8 0v-3.7H5.4a.9.9 0 0 1 0-1.8h3.7V5.4a.9.9 0 0 1 1.8 0v3.7z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="470 270 20 20"><path fill="#E23952" d="M480 270c5.527 0 10 4.478 10 10 0 5.527-4.473 10-10 10-5.522 0-10-4.473-10-10 0-5.522 4.478-10 10-10z"></path><path fill="#FFF" d="M481.274 280l2.612 2.617c.352.352.352.918 0 1.27s-.918.352-1.27 0L480 281.274l-2.617 2.612c-.352.352-.918.352-1.27 0s-.352-.918 0-1.27l2.612-2.617-2.612-2.617c-.352-.352-.352-.918 0-1.27s.918-.352 1.27 0l2.617 2.612 2.617-2.612c.352-.352.918-.352 1.27 0s.352.918 0 1.27L481.274 280z"></path></svg>'},function(t,e,o){const i=o(13).TableConstructor,n=o(12),r={input:"tc-table__inp"};t.exports=class{static get enableLineBreaks(){return!0}static get toolbox(){return{icon:n,title:"Table"}}constructor({data:t,config:e,api:o}){this.api=o,this._tableConstructor=new i(t,e,o)}render(){return this._tableConstructor.htmlElement}save(t){const e=[],o=t.querySelector("table").rows;for(let t=0;t<o.length;t++){const i=o[t],n=Array.from(i.cells).map(t=>t.querySelector("."+r.input));n.every(this._isEmpty)||e.push(n.map(t=>t.innerHTML))}return{content:e}}_isEmpty(t){return!t.textContent.trim()}static get pasteConfig(){return{tags:["TABLE","TR","TD","TBODY","THEAD","TH"]}}onPaste(t){switch(t.type){case"tag":let e=[[]];const o=t.detail.data.innerHTML.split("\n");let i=0,n=0;o.forEach((t,o)=>{if(t.match(/[a-z0-9]+/i))return e[i][n]=t.trim(),void n++;""!==t&&t.match(/\s+/)&&(n=0,e[++i]||(e[i]=[]))});const r={cols:(e=e.filter(t=>t.length))[0].length,rows:e.length};this._tableConstructor._fillTable({content:e},r)}}}},function(t,e,o){var i=o(6);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){(t.exports=o(0)(!1)).push([t.i,".tc-editor{padding:10px;position:relative;box-sizing:content-box;width:100%;left:-10px}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,i=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?o+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,o){var i=o(9);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){(t.exports=o(0)(!1)).push([t.i,".tc-toolbar{background:#368be6;}.tc-toolbar--hidden{visibility:hidden}.tc-toolbar--hor{width:100%;height:21px;flex-direction:row;left:0;top:1px}.tc-toolbar--hor,.tc-toolbar--ver{display:flex;align-items:center;position:absolute;z-index:100}.tc-toolbar--ver{height:100%;width:21px;flex-direction:column;top:0;left:-1px}.tc-toolbar__plus--hor{margin-left:-10px}.tc-toolbar__plus--ver{margin-top:-10px}.tc-toolbar__plus,.tc-toolbar__tools{height:21px;width:21px;margin-top:0;cursor:pointer}.tc-toolbar__tools--hor{margin-left:2px}.tc-toolbar__tools--ver{margin-top:2px}.tc-toolbar__shine-line--hor{min-height:1px;width:100%}.tc-toolbar__shine-line--ver{min-width:1px;height:100%}",""])},function(t,e,o){var i=o(11);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){(t.exports=o(0)(!1)).push([t.i,".tc-table{width:100%;height:100%;border-collapse:collapse;table-layout:fixed;}.tc-table__wrap{border:1px solid #dbdbe2;border-radius:3px;position:relative;height:100%;width:100%;box-sizing:border-box}.tc-table__cell{border:1px solid #dbdbe2;padding:0;vertical-align:top}.tc-table__area{padding:10px;height:100%}.tc-table__inp{outline:none;flex-grow:100;min-height:1.5em;height:100%;overflow:hidden}.tc-table tbody tr:first-child td{border-top:none}.tc-table tbody tr:last-child td{border-bottom:none}.tc-table tbody tr td:last-child{border-right:none}.tc-table tbody tr td:first-child{border-left:none}",""])},function(t,e){t.exports='<svg width="18" height="14"><path d="M2.833 8v1.95a1.7 1.7 0 0 0 1.7 1.7h3.45V8h-5.15zm0-2h5.15V2.35h-3.45a1.7 1.7 0 0 0-1.7 1.7V6zm12.3 2h-5.15v3.65h3.45a1.7 1.7 0 0 0 1.7-1.7V8zm0-2V4.05a1.7 1.7 0 0 0-1.7-1.7h-3.45V6h5.15zM4.533.1h8.9a3.95 3.95 0 0 1 3.95 3.95v5.9a3.95 3.95 0 0 1-3.95 3.95h-8.9a3.95 3.95 0 0 1-3.95-3.95v-5.9A3.95 3.95 0 0 1 4.533.1z"></path></svg>'},function(t,e,o){"use strict";o.r(e);o(5);function i(t){return!(null==t)}function n(t,e=null,o=null,n=null){const r=document.createElement(t);if(i(e))for(let t=0;t<e.length;t++)i(e[t])&&r.classList.add(e[t]);if(i(o))for(let t in o)r.setAttribute(t,o[t]);if(i(n))for(let t=0;t<n.length;t++)i(n[t])&&r.appendChild(n[t]);return r}function r(t){const e=t.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function l(t,e,o){let i;return e-t.x1>=-1&&e-t.x1<=11&&(i="left"),t.x2-e>=-1&&t.x2-e<=11&&(i="right"),o-t.y1>=-1&&o-t.y1<=11&&(i="top"),t.y2-o>=-1&&t.y2-o<=11&&(i="bottom"),i}o(8);var s=o(2),a=o.n(s),c=o(3),h=o.n(c);const d={highlightingLine:"tc-toolbar",hidden:"tc-toolbar--hidden",horizontalToolBar:"tc-toolbar--hor",horizontalHighlightingLine:"tc-toolbar__shine-line--hor",verticalToolBar:"tc-toolbar--ver",verticalHighlightingLine:"tc-toolbar__shine-line--ver",plusButton:"tc-toolbar__plus",toolsButton:"tc-toolbar__tools",horizontalPlusButton:"tc-toolbar__plus--hor",verticalPlusButton:"tc-toolbar__plus--ver",horizontalToolsButton:"tc-toolbar__tools--hor",verticalToolsButton:"tc-toolbar__tools--ver",area:"tc-table__area"};class u{constructor(){this._plusButton=this._generatePlusButton(),this._toolsButton=this._generateToolsButton(),this._highlightingLine=this._generateHighlightingLine(),this._toolbar=this._generateToolBar([this._plusButton,this._toolsButton,this._highlightingLine])}hide(){this._toolbar.classList.add(d.hidden)}show(){this._toolbar.classList.remove(d.hidden),this._highlightingLine.classList.remove(d.hidden)}hideLine(){this._highlightingLine.classList.add(d.hidden)}get htmlElement(){return this._toolbar}_generatePlusButton(){const t=n("div",[d.plusButton]);return t.innerHTML=a.a,t.addEventListener("click",t=>{t.stopPropagation();const e=new CustomEvent("click",{detail:{x:t.pageX,y:t.pageY},bubbles:!0});this._toolbar.dispatchEvent(e)}),t}_generateToolsButton(){const t=n("div",[d.toolsButton]);return t.innerHTML=h.a,t.addEventListener("click",t=>{t.stopPropagation();const e=new CustomEvent("click",{detail:{type:"remove",x:t.pageX,y:t.pageY},bubbles:!0});this._toolbar.dispatchEvent(e)}),t}_generateHighlightingLine(){const t=n("div",[d.highlightingLine]);return t.addEventListener("click",t=>{t.stopPropagation();const e=new CustomEvent("click",{bubbles:!0});this._toolbar.dispatchEvent(e)}),t}_generateToolBar(t){const e=n("div",[d.hidden],null,t);return e.addEventListener("mouseleave",t=>{this._recalcMousePos(t)}),e}_recalcMousePos(t){this.hide();const e=document.elementFromPoint(t.pageX,t.pageY);if(null!==e&&e.classList.contains(d.area)){const o=new MouseEvent("mouseover",{clientX:t.pageX,clientY:t.pageY});e.dispatchEvent(o)}}}class f extends u{constructor(){super(),this._toolbar.classList.add(d.horizontalToolBar),this._plusButton.classList.add(d.horizontalPlusButton),this._toolsButton.classList.add(d.horizontalToolsButton),this._highlightingLine.classList.add(d.horizontalHighlightingLine)}showIn(t){const e=Math.floor(Number.parseInt(window.getComputedStyle(this._toolbar).height)/2);this._toolbar.style.top=t-e+"px",this.show()}}class p extends u{constructor(){super(),this._toolbar.classList.add(d.verticalToolBar),this._plusButton.classList.add(d.verticalPlusButton),this._toolsButton.classList.add(d.verticalToolsButton),this._highlightingLine.classList.add(d.verticalHighlightingLine)}showIn(t){const e=Math.floor(Number.parseInt(window.getComputedStyle(this._toolbar).width)/2);this._toolbar.style.left=t-e+"px",this.show()}}o(10);const _={table:"tc-table",inputField:"tc-table__inp",cell:"tc-table__cell",wrapper:"tc-table__wrap",area:"tc-table__area"};class b{constructor(){this._numberOfColumns=0,this._numberOfRows=0,this._element=this._createTableWrapper(),this._table=this._element.querySelector("table"),this._hangEvents()}addColumn(t=-1){this._numberOfColumns++;const e=this._table.rows;for(let o=0;o<e.length;o++){const i=e[o].insertCell(t);this._fillCell(i)}}removeColumn(t=-1){this._numberOfColumns--;const e=this._table.rows;if(!(1===e[0].children.length||t>=e[0].children.length||t<0))for(let o=0;o<e.length;o++)e[o].deleteCell(t)}addRow(t=-1){this._numberOfRows++;const e=this._table.insertRow(t);return this._fillRow(e),e}removeRow(t=-1){t>=this._numberOfRows||1===this._numberOfRows||t<0||(this._numberOfRows--,this._table.deleteRow(t))}get htmlElement(){return this._element}get body(){return this._table}get selectedCell(){return this._selectedCell}_createTableWrapper(){return n("div",[_.wrapper],null,[n("table",[_.table])])}_createContenteditableArea(){return n("div",[_.inputField],{contenteditable:"true"})}_fillCell(t){t.classList.add(_.cell);const e=this._createContenteditableArea();t.appendChild(n("div",[_.area],null,[e]))}_fillRow(t){for(let e=0;e<this._numberOfColumns;e++){const e=t.insertCell();this._fillCell(e)}}_hangEvents(){this._table.addEventListener("focus",t=>{this._focusEditField(t)},!0),this._table.addEventListener("blur",t=>{this._blurEditField(t)},!0),this._table.addEventListener("keydown",t=>{this._pressedEnterInEditField(t)}),this._table.addEventListener("click",t=>{this._clickedOnCell(t)}),this._table.addEventListener("mouseover",t=>{this._mouseEnterInDetectArea(t),t.stopPropagation()},!0)}_focusEditField(t){t.target.classList.contains(_.inputField)&&(this._selectedCell=t.target.closest("."+_.cell))}_blurEditField(t){t.target.classList.contains(_.inputField)&&(this._selectedCell=null)}_pressedEnterInEditField(t){t.target.classList.contains(_.inputField)&&(13!==t.keyCode||t.shiftKey||t.preventDefault())}_clickedOnCell(t){if(!t.target.classList.contains(_.cell))return;t.target.querySelector("."+_.inputField).focus()}_mouseEnterInDetectArea(t){if(!t.target.classList.contains(_.area))return;const e=l(r(t.target.closest("TD")),t.pageX,t.pageY);t.target.dispatchEvent(new CustomEvent("mouseInActivatingArea",{detail:{side:e},bubbles:!0}))}}o.d(e,"TableConstructor",function(){return g});const v={editor:"tc-editor",toolBarHor:"tc-toolbar--hor",toolBarVer:"tc-toolbar--ver",inputField:"tc-table__inp"};class g{constructor(t,e,o){this._table=new b;const i=this._resizeTable(t,e);this._fillTable(t,i),this._container=n("div",[v.editor,o.styles.block],null,[this._table.htmlElement]),this._verticalToolBar=new p,this._horizontalToolBar=new f,this._table.htmlElement.appendChild(this._horizontalToolBar.htmlElement),this._table.htmlElement.appendChild(this._verticalToolBar.htmlElement),this._hoveredCell=null,this._activatedToolBar=null,this._hoveredCellSide=null,this._plusButDelay=null,this._toolbarShowDelay=null,this._hangEvents()}get htmlElement(){return this._container}_fillTable(t,e){if(void 0!==t.content)for(let o=0;o<e.rows&&o<t.content.length;o++)for(let i=0;i<e.cols&&i<t.content[o].length;i++){this._table.body.rows[o]||this._table.addRow(),this._table.body.rows[o].cells[i]||this._table.addColumn(),this._table.body.rows[o].cells[i].querySelector("."+v.inputField).innerHTML=t.content[o][i]}}_resizeTable(t,e){const o=Array.isArray(t.content),i=!!o&&t.content.length,n=o?t.content.length:void 0,r=i?t.content[0].length:void 0,l=Number.parseInt(e.rows),s=Number.parseInt(e.cols),a=!isNaN(l)&&l>0?l:void 0,c=!isNaN(s)&&s>0?s:void 0,h=n||a||2,d=r||c||2;for(let t=0;t<h;t++)this._table.addRow();for(let t=0;t<d;t++)this._table.addColumn();return{rows:h,cols:d}}_showToolBar(t,e){this._hideToolBar(),this._activatedToolBar=t,t.showIn(e)}_hideToolBar(){null!==this._activatedToolBar&&this._activatedToolBar.hide()}_hangEvents(){this._container.addEventListener("mouseInActivatingArea",t=>{this._toolbarCalling(t)}),this._container.addEventListener("click",t=>{this._clickToolbar(t)}),this._container.addEventListener("input",()=>{this._hideToolBar()}),this._container.addEventListener("keydown",t=>{this._containerKeydown(t)}),this._container.addEventListener("mouseout",t=>{this._leaveDetectArea(t)}),this._container.addEventListener("mouseover",t=>{this._mouseEnterInDetectArea(t)})}_mouseInActivatingAreaListener(t){this._hoveredCellSide=t.detail.side;const e=r(t.target),o=r(this._table.htmlElement);if(this._hoveredCell=t.target.closest("TD"),null===this._hoveredCell){const t=11;this._hoveredCell=this._container,e.x1+=t,e.y1+=t,e.x2-=t,e.y2-=t}"top"===this._hoveredCellSide&&this._showToolBar(this._horizontalToolBar,e.y1-o.y1-2),"bottom"===this._hoveredCellSide&&this._showToolBar(this._horizontalToolBar,e.y2-o.y1-1),"left"===this._hoveredCellSide&&this._showToolBar(this._verticalToolBar,e.x1-o.x1-2),"right"===this._hoveredCellSide&&this._showToolBar(this._verticalToolBar,e.x2-o.x1-1)}_isToolbar(t){return!(!t.closest("."+v.toolBarHor)&&!t.closest("."+v.toolBarVer))}_leaveDetectArea(t){this._isToolbar(t.relatedTarget)||(clearTimeout(this._toolbarShowDelay),this._hideToolBar())}_toolbarCalling(t){this._isToolbar(t.target)||(clearTimeout(this._toolbarShowDelay),this._toolbarShowDelay=setTimeout(()=>{this._mouseInActivatingAreaListener(t)},125))}_clickToolbar(t){if(!this._isToolbar(t.target))return;let e;const o=t.detail&&t.detail.type?t.detail.type:"";if(this._activatedToolBar===this._horizontalToolBar?("remove"===o?this._removeRow():this._addRow(),e="y"):("remove"===o?this._removeColumn():this._addColumn(),e="x"),isNaN(t.detail)&&null!==t.detail){const o=r(this._table.htmlElement);let i;i="x"===e?t.detail.x-o.x1:t.detail.y-o.y1,this._delayAddButtonForMultiClickingNearMouse(i)}else this._hideToolBar()}_containerKeydown(t){13===t.keyCode&&this._containerEnterPressed(t)}_delayAddButtonForMultiClickingNearMouse(t){this._showToolBar(this._activatedToolBar,t),this._activatedToolBar.hideLine(),clearTimeout(this._plusButDelay),this._plusButDelay=setTimeout(()=>{this._hideToolBar()},500)}_getHoveredSideOfContainer(){return this._hoveredCell===this._container?this._isBottomOrRight()?-1:0:1}_isBottomOrRight(){return"bottom"===this._hoveredCellSide||"right"===this._hoveredCellSide}_addRow(){const t=this._hoveredCell.closest("TR");let e=this._getHoveredSideOfContainer();1===e&&(e=t.sectionRowIndex,e+=this._isBottomOrRight()),this._table.addRow(e)}_removeRow(){const t=this._hoveredCell.closest("TR");let e=this._getHoveredSideOfContainer();1===e&&(e=t.sectionRowIndex,e+=this._isBottomOrRight()),this._table.removeRow(e)}_addColumn(){let t=this._getHoveredSideOfContainer();1===t&&(t=this._hoveredCell.cellIndex,t+=this._isBottomOrRight()),this._table.addColumn(t)}_removeColumn(){let t=this._getHoveredSideOfContainer();1===t&&(t=this._hoveredCell.cellIndex,t+=this._isBottomOrRight()),this._table.removeColumn(t)}_containerEnterPressed(t){if(null===this._table.selectedCell||t.shiftKey)return;const e=this._table.selectedCell.closest("TR");let o=this._getHoveredSideOfContainer();1===o&&(o=e.sectionRowIndex+1),this._table.addRow(o).cells[0].click()}_mouseEnterInDetectArea(t){let e=l(r(this._container),t.pageX,t.pageY);t.target.dispatchEvent(new CustomEvent("mouseInActivatingArea",{detail:{side:e},bubbles:!0}))}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UYWJsZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vVGFibGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVGFibGUvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vVGFibGUvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvaW1nL3BsdXMuc3ZnIiwid2VicGFjazovL1RhYmxlLy4vc3JjL2ltZy9jcm9zcy5zdmciLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvcGx1Z2luLmpzIiwid2VicGFjazovL1RhYmxlLy4vc3JjL3N0eWxlcy90YWJsZS1jb25zdHJ1Y3Rvci5wY3NzPzdmNmUiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvc3R5bGVzL3RhYmxlLWNvbnN0cnVjdG9yLnBjc3MiLCJ3ZWJwYWNrOi8vVGFibGUvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzIiwid2VicGFjazovL1RhYmxlLy4vc3JjL3N0eWxlcy9ib3JkZXItdG9vbGJhci5wY3NzPzlhNjQiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvc3R5bGVzL2JvcmRlci10b29sYmFyLnBjc3MiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvc3R5bGVzL3RhYmxlLnBjc3M/YWYwMSIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy9zdHlsZXMvdGFibGUucGNzcyIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy9pbWcvdG9vbGJveEljb24uc3ZnIiwid2VicGFjazovL1RhYmxlLy4vc3JjL2RvY3VtZW50VXRpbHMuanMiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvYm9yZGVyVG9vbEJhci5qcyIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy90YWJsZS5qcyIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy90YWJsZUNvbnN0cnVjdG9yLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNvbnRlbnQiLCJjc3NNYXBwaW5nIiwiYnRvYSIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VNYXAiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjb25jYXQiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJwdXNoIiwiZm4iLCJtZW1vIiwic3R5bGVzSW5Eb20iLCJpc09sZElFIiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnZXRFbGVtZW50IiwidGFyZ2V0IiwicGFyZW50Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJhdHRycyIsInR5cGUiLCJub25jZSIsIm5jIiwiZ2V0Tm9uY2UiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJ0cmFuc2Zvcm0iLCJkZWZhdWx0Iiwic3R5bGVJbmRleCIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwibGluayIsInJlbCIsImNyZWF0ZUxpbmtFbGVtZW50IiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwiaHJlZiIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiY3NzTm9kZSIsImNoaWxkTm9kZXMiLCJUYWJsZUNvbnN0cnVjdG9yIiwic3ZnSWNvbiIsIkNTUyIsImlucHV0IiwiZW5hYmxlTGluZUJyZWFrcyIsInRvb2xib3giLCJpY29uIiwidGl0bGUiLCJbb2JqZWN0IE9iamVjdF0iLCJkYXRhIiwiY29uZmlnIiwiYXBpIiwiX3RhYmxlQ29uc3RydWN0b3IiLCJodG1sRWxlbWVudCIsInRvb2xzQ29udGVudCIsInJvd3MiLCJyb3ciLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJjZWxscyIsImNlbGwiLCJldmVyeSIsIl9pc0VtcHR5IiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJ0cmltIiwicGFzdGVDb25maWciLCJ0YWdzIiwiZXZlbnQiLCJmcmFncyIsImRldGFpbCIsInNwbGl0Iiwicm93SWR4IiwiY29sSWR4IiwiZnJhZyIsIm1hdGNoIiwic2l6ZSIsImNvbHMiLCJfZmlsbFRhYmxlIiwiaG1yIiwibG9jYWxzIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCIkMSIsInRlc3QiLCJfaXNOb3RNaXNzZWQiLCJlbGVtIiwidGFnTmFtZSIsImNzc0NsYXNzZXMiLCJjaGlsZHJlbiIsImNsYXNzTGlzdCIsImFkZCIsImdldENvb3JkcyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ5MSIsIk1hdGgiLCJmbG9vciIsInRvcCIsInBhZ2VZT2Zmc2V0IiwieDEiLCJsZWZ0IiwicGFnZVhPZmZzZXQiLCJ4MiIsInJpZ2h0IiwieTIiLCJib3R0b20iLCJnZXRTaWRlQnlDb29yZHMiLCJjb29yZHMiLCJ4IiwieSIsInNpZGUiLCJzaXplQXJlYSIsImhpZ2hsaWdodGluZ0xpbmUiLCJoaWRkZW4iLCJob3Jpem9udGFsVG9vbEJhciIsImhvcml6b250YWxIaWdobGlnaHRpbmdMaW5lIiwidmVydGljYWxUb29sQmFyIiwidmVydGljYWxIaWdobGlnaHRpbmdMaW5lIiwicGx1c0J1dHRvbiIsInRvb2xzQnV0dG9uIiwiaG9yaXpvbnRhbFBsdXNCdXR0b24iLCJ2ZXJ0aWNhbFBsdXNCdXR0b24iLCJob3Jpem9udGFsVG9vbHNCdXR0b24iLCJ2ZXJ0aWNhbFRvb2xzQnV0dG9uIiwiYXJlYSIsImJvcmRlclRvb2xCYXJfQm9yZGVyVG9vbEJhciIsIl9wbHVzQnV0dG9uIiwiX2dlbmVyYXRlUGx1c0J1dHRvbiIsIl90b29sc0J1dHRvbiIsIl9nZW5lcmF0ZVRvb2xzQnV0dG9uIiwiX2hpZ2hsaWdodGluZ0xpbmUiLCJfZ2VuZXJhdGVIaWdobGlnaHRpbmdMaW5lIiwiX3Rvb2xiYXIiLCJfZ2VuZXJhdGVUb29sQmFyIiwiYnV0dG9uIiwicGx1c19kZWZhdWx0IiwiYSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJDdXN0b21FdmVudCIsInBhZ2VYIiwicGFnZVkiLCJidWJibGVzIiwiZGlzcGF0Y2hFdmVudCIsImNyb3NzX2RlZmF1bHQiLCJsaW5lIiwiYmFyIiwiX3JlY2FsY01vdXNlUG9zIiwiaGlkZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJjb250YWlucyIsIk1vdXNlRXZlbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsIkhvcml6b250YWxCb3JkZXJUb29sQmFyIiwic3VwZXIiLCJoYWxmSGVpZ2h0IiwiTnVtYmVyIiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwiaGVpZ2h0Iiwic2hvdyIsIlZlcnRpY2FsQm9yZGVyVG9vbEJhciIsImhhbGZXaWR0aCIsIndpZHRoIiwidGFibGVfQ1NTIiwidGFibGUiLCJpbnB1dEZpZWxkIiwid3JhcHBlciIsInRhYmxlX1RhYmxlIiwiX251bWJlck9mQ29sdW1ucyIsIl9udW1iZXJPZlJvd3MiLCJfZWxlbWVudCIsIl9jcmVhdGVUYWJsZVdyYXBwZXIiLCJfdGFibGUiLCJfaGFuZ0V2ZW50cyIsImluc2VydENlbGwiLCJfZmlsbENlbGwiLCJkZWxldGVDZWxsIiwiaW5zZXJ0Um93IiwiX2ZpbGxSb3ciLCJkZWxldGVSb3ciLCJib2R5Iiwic2VsZWN0ZWRDZWxsIiwiX3NlbGVjdGVkQ2VsbCIsImNvbnRlbnRlZGl0YWJsZSIsIl9jcmVhdGVDb250ZW50ZWRpdGFibGVBcmVhIiwiX2ZvY3VzRWRpdEZpZWxkIiwiX2JsdXJFZGl0RmllbGQiLCJfcHJlc3NlZEVudGVySW5FZGl0RmllbGQiLCJfY2xpY2tlZE9uQ2VsbCIsIl9tb3VzZUVudGVySW5EZXRlY3RBcmVhIiwiY2xvc2VzdCIsImtleUNvZGUiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiZm9jdXMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwidGFibGVDb25zdHJ1Y3Rvcl9UYWJsZUNvbnN0cnVjdG9yIiwidGFibGVDb25zdHJ1Y3Rvcl9DU1MiLCJlZGl0b3IiLCJ0b29sQmFySG9yIiwidG9vbEJhclZlciIsIl9yZXNpemVUYWJsZSIsIl9jb250YWluZXIiLCJibG9jayIsIl92ZXJ0aWNhbFRvb2xCYXIiLCJfaG9yaXpvbnRhbFRvb2xCYXIiLCJfaG92ZXJlZENlbGwiLCJfYWN0aXZhdGVkVG9vbEJhciIsIl9ob3ZlcmVkQ2VsbFNpZGUiLCJfcGx1c0J1dERlbGF5IiwiX3Rvb2xiYXJTaG93RGVsYXkiLCJhZGRSb3ciLCJhZGRDb2x1bW4iLCJpc1ZhbGlkQXJyYXkiLCJpc0FycmF5IiwiaXNOb3RFbXB0eUFycmF5IiwiY29udGVudFJvd3MiLCJjb250ZW50Q29scyIsInBhcnNlZFJvd3MiLCJwYXJzZWRDb2xzIiwiY29uZmlnUm93cyIsImlzTmFOIiwiY29uZmlnQ29scyIsInRvb2xCYXIiLCJjb29yZCIsIl9oaWRlVG9vbEJhciIsInNob3dJbiIsIl90b29sYmFyQ2FsbGluZyIsIl9jbGlja1Rvb2xiYXIiLCJfY29udGFpbmVyS2V5ZG93biIsIl9sZWF2ZURldGVjdEFyZWEiLCJhcmVhQ29vcmRzIiwiY29udGFpbmVyQ29vcmRzIiwicGFkZGluZ0NvbnRhaW5lciIsIl9zaG93VG9vbEJhciIsIl9pc1Rvb2xiYXIiLCJyZWxhdGVkVGFyZ2V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIl9tb3VzZUluQWN0aXZhdGluZ0FyZWFMaXN0ZW5lciIsInR5cGVDb29yZCIsIl9yZW1vdmVSb3ciLCJfYWRkUm93IiwiX3JlbW92ZUNvbHVtbiIsIl9hZGRDb2x1bW4iLCJfZGVsYXlBZGRCdXR0b25Gb3JNdWx0aUNsaWNraW5nTmVhck1vdXNlIiwiX2NvbnRhaW5lckVudGVyUHJlc3NlZCIsImhpZGVMaW5lIiwiX2lzQm90dG9tT3JSaWdodCIsImluZGljYXRpdmVSb3ciLCJfZ2V0SG92ZXJlZFNpZGVPZkNvbnRhaW5lciIsInNlY3Rpb25Sb3dJbmRleCIsInJlbW92ZVJvdyIsImNlbGxJbmRleCIsInJlbW92ZUNvbHVtbiIsImNsaWNrIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLEdBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsTUFBQUQsSUFFQUQsRUFBQSxNQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFQLFFBR0EsSUFBQUMsRUFBQUksRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FULFFBQUEsSUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFELFFBMERBLE9BckRBTSxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFkLEVBQUFlLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFqQixFQUFB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T0FBQWtGLGFBQUF6TyxHQVNBYyx1QkFBQXFCLEdBQ0EsVUFBQTFKLEtBQUE4USxPQUFBUyxjQUFBN0gsRUFBQXdJLFNBQ0EsT0FFQSxNQUFBeUQsRUFBQTNWLEtBQUE4USxPQUFBUyxhQUFBUyxRQUFBLE1BQ0EsSUFBQXpLLEVBQUF2SCxLQUFBNFYsNkJBRUEsSUFBQXJPLElBQ0FBLEVBQUFvTyxFQUFBRSxnQkFBQSxHQUVBN1YsS0FBQThRLE9BQUF1QyxPQUFBOUwsR0FFQTBCLE1BQUEsR0FBQWdOLFFBU0E1Tix3QkFBQXFCLEdBRUEsSUFBQW9ELEVBQWVKLEVBRElmLEVBQVMzTCxLQUFBNFMsWUFDRWxKLEVBQUFrRixNQUFBbEYsRUFBQW1GLE9BRTlCbkYsRUFBQXhILE9BQUE2TSxjQUNBLElBQUFKLFlBQUEseUJBQ0EvRSxPQUFBLENBQ0FrRCxRQUVBZ0MsU0FBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJUYWJsZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJUYWJsZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cdFx0XHRpZihpdGVtWzJdKSB7XG5cdFx0XHRcdHJldHVybiBcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGNvbnRlbnQgKyBcIn1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdFx0fVxuXHRcdH0pLmpvaW4oXCJcIik7XG5cdH07XG5cblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3Rcblx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuXHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XG5cdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcblx0XHR9XG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuXHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG5cdHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJztcblx0dmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXHRpZiAoIWNzc01hcHBpbmcpIHtcblx0XHRyZXR1cm4gY29udGVudDtcblx0fVxuXG5cdGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcblx0XHR2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuICcvKiMgc291cmNlVVJMPScgKyBjc3NNYXBwaW5nLnNvdXJjZVJvb3QgKyBzb3VyY2UgKyAnICovJ1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG5cdH1cblxuXHRyZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufVxuXG4vLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuXHR2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcblx0dmFyIGRhdGEgPSAnc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJyArIGJhc2U2NDtcblxuXHRyZXR1cm4gJy8qIyAnICsgZGF0YSArICcgKi8nO1xufVxuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQsIHBhcmVudCkge1xuICBpZiAocGFyZW50KXtcbiAgICByZXR1cm4gcGFyZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbiAgfVxuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCwgcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQsIHBhcmVudCk7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1t0YXJnZXRdXG5cdH07XG59KSgpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09IFwiYm9vbGVhblwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpIHtcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlLCB0YXJnZXQpO1xuXHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIG5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7XG5cdGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuXG5cdHZhciBpZHggPSBzdHlsZXNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGUpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXG5cdGlmKG9wdGlvbnMuYXR0cnMubm9uY2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBub25jZSA9IGdldE5vbmNlKCk7XG5cdFx0aWYgKG5vbmNlKSB7XG5cdFx0XHRvcHRpb25zLmF0dHJzLm5vbmNlID0gbm9uY2U7XG5cdFx0fVxuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gZ2V0Tm9uY2UoKSB7XG5cdGlmICh0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRyZXR1cm4gX193ZWJwYWNrX25vbmNlX187XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gdHlwZW9mIG9wdGlvbnMudHJhbnNmb3JtID09PSAnZnVuY3Rpb24nXG5cdFx0ID8gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcykgXG5cdFx0IDogb3B0aW9ucy50cmFuc2Zvcm0uZGVmYXVsdChvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHZpZXdCb3g9XFxcIjAgMCAyMCAyMFxcXCI+PGNpcmNsZSBjeD1cXFwiMTBcXFwiIGN5PVxcXCIxMFxcXCIgcj1cXFwiMTBcXFwiIGZpbGw9XFxcIiMzODhBRTVcXFwiPjwvY2lyY2xlPjxwYXRoIGZpbGw9XFxcIiNGRkZcXFwiIGQ9XFxcIk0xMC45IDkuMWgzLjdhLjkuOSAwIDEgMSAwIDEuOGgtMy43djMuN2EuOS45IDAgMSAxLTEuOCAwdi0zLjdINS40YS45LjkgMCAwIDEgMC0xLjhoMy43VjUuNGEuOS45IDAgMCAxIDEuOCAwdjMuN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgd2lkdGg9XFxcIjIwXFxcIiBoZWlnaHQ9XFxcIjIwXFxcIiB2aWV3Qm94PVxcXCI0NzAgMjcwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjRTIzOTUyXFxcIiBkPVxcXCJNNDgwIDI3MGM1LjUyNyAwIDEwIDQuNDc4IDEwIDEwIDAgNS41MjctNC40NzMgMTAtMTAgMTAtNS41MjIgMC0xMC00LjQ3My0xMC0xMCAwLTUuNTIyIDQuNDc4LTEwIDEwLTEwelxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiNGRkZcXFwiIGQ9XFxcIk00ODEuMjc0IDI4MGwyLjYxMiAyLjYxN2MuMzUyLjM1Mi4zNTIuOTE4IDAgMS4yN3MtLjkxOC4zNTItMS4yNyAwTDQ4MCAyODEuMjc0bC0yLjYxNyAyLjYxMmMtLjM1Mi4zNTItLjkxOC4zNTItMS4yNyAwcy0uMzUyLS45MTggMC0xLjI3bDIuNjEyLTIuNjE3LTIuNjEyLTIuNjE3Yy0uMzUyLS4zNTItLjM1Mi0uOTE4IDAtMS4yN3MuOTE4LS4zNTIgMS4yNyAwbDIuNjE3IDIuNjEyIDIuNjE3LTIuNjEyYy4zNTItLjM1Mi45MTgtLjM1MiAxLjI3IDBzLjM1Mi45MTggMCAxLjI3TDQ4MS4yNzQgMjgwelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiY29uc3QgVGFibGVDb25zdHJ1Y3RvciA9IHJlcXVpcmUoXCIuL3RhYmxlQ29uc3RydWN0b3JcIikuVGFibGVDb25zdHJ1Y3RvcjtcbmNvbnN0IHN2Z0ljb24gPSByZXF1aXJlKFwiLi9pbWcvdG9vbGJveEljb24uc3ZnXCIpO1xuXG5jb25zdCBDU1MgPSB7XG4gIGlucHV0OiBcInRjLXRhYmxlX19pbnBcIixcbn07XG5cbi8qKlxuICogIFRvb2wgZm9yIHRhYmxlJ3MgY3JlYXRpbmdcbiAqICBAdHlwZWRlZiB7b2JqZWN0fSBUYWJsZURhdGEgLSBvYmplY3Qgd2l0aCB0aGUgZGF0YSB0cmFuc2ZlcnJlZCB0byBmb3JtIGEgdGFibGVcbiAqICBAcHJvcGVydHkge3N0cmluZ1tdW119IGNvbnRlbnQgLSB0d28tZGltZW5zaW9uYWwgYXJyYXkgd2hpY2ggY29udGFpbnMgdGFibGUgY29udGVudFxuICovXG5jbGFzcyBUYWJsZSB7XG4gIC8qKlxuICAgKiBBbGxvdyB0byBwcmVzcyBFbnRlciBpbnNpZGUgdGhlIENvZGVUb29sIHRleHRhcmVhXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdGF0aWMgZ2V0IGVuYWJsZUxpbmVCcmVha3MoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFRvb2wgdG9vbGJveCBzZXR0aW5nc1xuICAgKiBpY29uIC0gVG9vbCBpY29uJ3MgU1ZHXG4gICAqIHRpdGxlIC0gdGl0bGUgdG8gc2hvdyBpbiB0b29sYm94XG4gICAqXG4gICAqIEByZXR1cm4ge3tpY29uOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmd9fVxuICAgKi9cbiAgc3RhdGljIGdldCB0b29sYm94KCkge1xuICAgIHJldHVybiB7XG4gICAgICBpY29uOiBzdmdJY29uLFxuICAgICAgdGl0bGU6IFwiVGFibGVcIixcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBwbHVnaW5gcyBtYWluIEVsZW1lbnQgYW5kIGZpbGwgaXQgd2l0aCBzYXZlZCBkYXRhXG4gICAqIEBwYXJhbSB7VGFibGVEYXRhfSBkYXRhIOKAlCBwcmV2aW91c2x5IHNhdmVkIGRhdGFcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyAtIHVzZXIgY29uZmlnIGZvciBUb29sXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhcGkgLSBFZGl0b3IuanMgQVBJXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGNvbmZpZywgYXBpIH0pIHtcbiAgICB0aGlzLmFwaSA9IGFwaTtcblxuICAgIHRoaXMuX3RhYmxlQ29uc3RydWN0b3IgPSBuZXcgVGFibGVDb25zdHJ1Y3RvcihkYXRhLCBjb25maWcsIGFwaSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIFRvb2wncyB2aWV3XG4gICAqIEByZXR1cm5zIHtIVE1MRGl2RWxlbWVudH1cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLl90YWJsZUNvbnN0cnVjdG9yLmh0bWxFbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgVG9vbCdzIGRhdGEgZnJvbSB0aGUgdmlld1xuICAgKiBAcmV0dXJucyB7VGFibGVEYXRhfSAtIHNhdmVkIGRhdGFcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2F2ZSh0b29sc0NvbnRlbnQpIHtcbiAgICBjb25zdCB0YWJsZSA9IHRvb2xzQ29udGVudC5xdWVyeVNlbGVjdG9yKFwidGFibGVcIik7XG4gICAgY29uc3QgZGF0YSA9IFtdO1xuICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5yb3dzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgICAgY29uc3QgY29scyA9IEFycmF5LmZyb20ocm93LmNlbGxzKTtcbiAgICAgIGNvbnN0IGlucHV0cyA9IGNvbHMubWFwKChjZWxsKSA9PiBjZWxsLnF1ZXJ5U2VsZWN0b3IoXCIuXCIgKyBDU1MuaW5wdXQpKTtcbiAgICAgIGNvbnN0IGlzV29ydGhsZXNzID0gaW5wdXRzLmV2ZXJ5KHRoaXMuX2lzRW1wdHkpO1xuXG4gICAgICBpZiAoaXNXb3J0aGxlc3MpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBkYXRhLnB1c2goaW5wdXRzLm1hcCgoaW5wdXQpID0+IGlucHV0LmlubmVySFRNTCkpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50OiBkYXRhLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQ2hlY2sgaW5wdXQgZmllbGQgaXMgZW1wdHlcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gaW5wdXQgLSBpbnB1dCBmaWVsZFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgX2lzRW1wdHkoaW5wdXQpIHtcbiAgICByZXR1cm4gIWlucHV0LnRleHRDb250ZW50LnRyaW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgcGFzdGVkIHRhYmxlXG4gICAqL1xuICBzdGF0aWMgZ2V0IHBhc3RlQ29uZmlnKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0YWdzOiBbXCJUQUJMRVwiLCBcIlRSXCIsIFwiVERcIiwgXCJUQk9EWVwiLCBcIlRIRUFEXCIsIFwiVEhcIl0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgUGFzdGVkIERhdGFcbiAgICovXG4gIG9uUGFzdGUoZXZlbnQpIHtcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgXCJ0YWdcIjpcbiAgICAgICAgbGV0IGRhdGEgPSBbW11dO1xuICAgICAgICBjb25zdCBmcmFncyA9IGV2ZW50LmRldGFpbC5kYXRhLmlubmVySFRNTC5zcGxpdChcIlxcblwiKTtcblxuICAgICAgICBsZXQgcm93SWR4ID0gMDtcbiAgICAgICAgbGV0IGNvbElkeCA9IDA7XG5cbiAgICAgICAgZnJhZ3MuZm9yRWFjaCgoZnJhZywgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKGZyYWcubWF0Y2goL1thLXowLTldKy9pKSkge1xuICAgICAgICAgICAgZGF0YVtyb3dJZHhdW2NvbElkeF0gPSBmcmFnLnRyaW0oKTtcbiAgICAgICAgICAgIGNvbElkeCsrO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChmcmFnID09PSBcIlwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGZyYWcubWF0Y2goL1xccysvKSkge1xuICAgICAgICAgICAgY29sSWR4ID0gMDtcbiAgICAgICAgICAgIHJvd0lkeCsrO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGFbcm93SWR4XSkge1xuICAgICAgICAgICAgICBkYXRhW3Jvd0lkeF0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRhdGEgPSBkYXRhLmZpbHRlcigocm93KSA9PiByb3cubGVuZ3RoKTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHtcbiAgICAgICAgICBjb2xzOiBkYXRhWzBdLmxlbmd0aCxcbiAgICAgICAgICByb3dzOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl90YWJsZUNvbnN0cnVjdG9yLl9maWxsVGFibGUoeyBjb250ZW50OiBkYXRhIH0sIHNpemUpO1xuXG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRhYmxlO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi90YWJsZS1jb25zdHJ1Y3Rvci5wY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4vdGFibGUtY29uc3RydWN0b3IucGNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi90YWJsZS1jb25zdHJ1Y3Rvci5wY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudGMtZWRpdG9ye3BhZGRpbmc6MTBweDtwb3NpdGlvbjpyZWxhdGl2ZTtib3gtc2l6aW5nOmNvbnRlbnQtYm94O3dpZHRoOjEwMCU7bGVmdDotMTBweH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4vYm9yZGVyLXRvb2xiYXIucGNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcyEuL2JvcmRlci10b29sYmFyLnBjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4vYm9yZGVyLXRvb2xiYXIucGNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnRjLXRvb2xiYXJ7YmFja2dyb3VuZDojMzY4YmU2O30udGMtdG9vbGJhci0taGlkZGVue3Zpc2liaWxpdHk6aGlkZGVufS50Yy10b29sYmFyLS1ob3J7d2lkdGg6MTAwJTtoZWlnaHQ6MjFweDtmbGV4LWRpcmVjdGlvbjpyb3c7bGVmdDowO3RvcDoxcHh9LnRjLXRvb2xiYXItLWhvciwudGMtdG9vbGJhci0tdmVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxMDB9LnRjLXRvb2xiYXItLXZlcntoZWlnaHQ6MTAwJTt3aWR0aDoyMXB4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt0b3A6MDtsZWZ0Oi0xcHh9LnRjLXRvb2xiYXJfX3BsdXMtLWhvcnttYXJnaW4tbGVmdDotMTBweH0udGMtdG9vbGJhcl9fcGx1cy0tdmVye21hcmdpbi10b3A6LTEwcHh9LnRjLXRvb2xiYXJfX3BsdXMsLnRjLXRvb2xiYXJfX3Rvb2xze2hlaWdodDoyMXB4O3dpZHRoOjIxcHg7bWFyZ2luLXRvcDowO2N1cnNvcjpwb2ludGVyfS50Yy10b29sYmFyX190b29scy0taG9ye21hcmdpbi1sZWZ0OjJweH0udGMtdG9vbGJhcl9fdG9vbHMtLXZlcnttYXJnaW4tdG9wOjJweH0udGMtdG9vbGJhcl9fc2hpbmUtbGluZS0taG9ye21pbi1oZWlnaHQ6MXB4O3dpZHRoOjEwMCV9LnRjLXRvb2xiYXJfX3NoaW5lLWxpbmUtLXZlcnttaW4td2lkdGg6MXB4O2hlaWdodDoxMDAlfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4vdGFibGUucGNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcyEuL3RhYmxlLnBjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4vdGFibGUucGNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnRjLXRhYmxle3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlO3RhYmxlLWxheW91dDpmaXhlZDt9LnRjLXRhYmxlX193cmFwe2JvcmRlcjoxcHggc29saWQgI2RiZGJlMjtib3JkZXItcmFkaXVzOjNweDtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2JveC1zaXppbmc6Ym9yZGVyLWJveH0udGMtdGFibGVfX2NlbGx7Ym9yZGVyOjFweCBzb2xpZCAjZGJkYmUyO3BhZGRpbmc6MDt2ZXJ0aWNhbC1hbGlnbjp0b3B9LnRjLXRhYmxlX19hcmVhe3BhZGRpbmc6MTBweDtoZWlnaHQ6MTAwJX0udGMtdGFibGVfX2lucHtvdXRsaW5lOm5vbmU7ZmxleC1ncm93OjEwMDttaW4taGVpZ2h0OjEuNWVtO2hlaWdodDoxMDAlO292ZXJmbG93OmhpZGRlbn0udGMtdGFibGUgdGJvZHkgdHI6Zmlyc3QtY2hpbGQgdGR7Ym9yZGVyLXRvcDpub25lfS50Yy10YWJsZSB0Ym9keSB0cjpsYXN0LWNoaWxkIHRke2JvcmRlci1ib3R0b206bm9uZX0udGMtdGFibGUgdGJvZHkgdHIgdGQ6bGFzdC1jaGlsZHtib3JkZXItcmlnaHQ6bm9uZX0udGMtdGFibGUgdGJvZHkgdHIgdGQ6Zmlyc3QtY2hpbGR7Ym9yZGVyLWxlZnQ6bm9uZX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB3aWR0aD1cXFwiMThcXFwiIGhlaWdodD1cXFwiMTRcXFwiPjxwYXRoIGQ9XFxcIk0yLjgzMyA4djEuOTVhMS43IDEuNyAwIDAgMCAxLjcgMS43aDMuNDVWOGgtNS4xNXptMC0yaDUuMTVWMi4zNWgtMy40NWExLjcgMS43IDAgMCAwLTEuNyAxLjdWNnptMTIuMyAyaC01LjE1djMuNjVoMy40NWExLjcgMS43IDAgMCAwIDEuNy0xLjdWOHptMC0yVjQuMDVhMS43IDEuNyAwIDAgMC0xLjctMS43aC0zLjQ1VjZoNS4xNXpNNC41MzMuMWg4LjlhMy45NSAzLjk1IDAgMCAxIDMuOTUgMy45NXY1LjlhMy45NSAzLjk1IDAgMCAxLTMuOTUgMy45NWgtOC45YTMuOTUgMy45NSAwIDAgMS0zLjk1LTMuOTV2LTUuOUEzLjk1IDMuOTUgMCAwIDEgNC41MzMuMXpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIi8qKlxuICogQ2hlY2tzIHRoZSBpdGVtIGlzIG5vdCBtaXNzZWQgb3IgbWVzc2VkXG4gKiBAcGFyYW0ge29iamVjdHxzdHJpbmdbXXxFbGVtZW50W118SFRNTEVsZW1lbnR8c3RyaW5nfSBlbGVtIC0gZWxlbWVudFxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgZWxlbWVudCBpcyBjb3JyZWN0XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfaXNOb3RNaXNzZWQoZWxlbSkge1xuICByZXR1cm4gKCEoZWxlbSA9PT0gdW5kZWZpbmVkIHx8IGVsZW0gPT09IG51bGwpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgRE9NIGVsZW1lbnQgd2l0aCBzZXQgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWUgLSBIdG1sIHRhZyBvZiB0aGUgZWxlbWVudCB0byBiZSBjcmVhdGVkXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBjc3NDbGFzc2VzIC0gQ3NzIGNsYXNzZXMgdGhhdCBtdXN0IGJlIGFwcGxpZWQgdG8gYW4gZWxlbWVudFxuICogQHBhcmFtIHtvYmplY3R9IGF0dHJzIC0gQXR0cmlidXRlcyB0aGF0IG11c3QgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50W119IGNoaWxkcmVuIC0gY2hpbGQgZWxlbWVudHMgb2YgY3JlYXRpbmcgZWxlbWVudFxuICogQHJldHVybnMge0hUTUxFbGVtZW50fSB0aGUgbmV3IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSh0YWdOYW1lLCBjc3NDbGFzc2VzID0gbnVsbCwgYXR0cnMgPSBudWxsLCBjaGlsZHJlbiA9IG51bGwpIHtcbiAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG5cbiAgaWYgKF9pc05vdE1pc3NlZChjc3NDbGFzc2VzKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3NzQ2xhc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKF9pc05vdE1pc3NlZChjc3NDbGFzc2VzW2ldKSkge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3Nlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChfaXNOb3RNaXNzZWQoYXR0cnMpKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGF0dHJzKSB7XG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuICAgIH1cbiAgfVxuICBpZiAoX2lzTm90TWlzc2VkKGNoaWxkcmVuKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChfaXNOb3RNaXNzZWQoY2hpbGRyZW5baV0pKSB7XG4gICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoY2hpbGRyZW5baV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZWxlbTtcbn1cblxuLyoqXG4gKiBHZXQgaXRlbSBwb3NpdGlvbiByZWxhdGl2ZSB0byBkb2N1bWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSAtIGl0ZW1cbiAqIEByZXR1cm5zIHt7eDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcn19IGNvb3JkaW5hdGVzIG9mIHRoZSB1cHBlciBsZWZ0ICh4MSx5MSkgYW5kIGxvd2VyIHJpZ2h0KHgyLHkyKSBjb3JuZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29yZHMoZWxlbSkge1xuICBjb25zdCByZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICByZXR1cm4ge1xuICAgIHkxOiBNYXRoLmZsb29yKHJlY3QudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0KSxcbiAgICB4MTogTWF0aC5mbG9vcihyZWN0LmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQpLFxuICAgIHgyOiBNYXRoLmZsb29yKHJlY3QucmlnaHQgKyB3aW5kb3cucGFnZVhPZmZzZXQpLFxuICAgIHkyOiBNYXRoLmZsb29yKHJlY3QuYm90dG9tICsgd2luZG93LnBhZ2VZT2Zmc2V0KVxuICB9O1xufVxuXG4vKipcbiAqIFJlY29nbml6ZXMgd2hpY2ggc2lkZSBvZiB0aGUgY29udGFpbmVyICBpcyBjbG9zZXIgdG8gKHgseSlcbiAqIEBwYXJhbSB7e3gxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXJ9fSBjb29yZHMgLSBjb29yZHMgb2YgY29udGFpbmVyXG4gKiBAcGFyYW0geCAtIHggY29vcmRcbiAqIEBwYXJhbSB5IC0geSBjb29yZFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2lkZUJ5Q29vcmRzKGNvb3JkcywgeCwgeSkge1xuICBsZXQgc2lkZTtcbiAgY29uc3Qgc2l6ZUFyZWEgPSAxMDtcblxuICAvLyBhIHBvaW50IGlzIGNsb3NlIHRvIHRoZSBib3VuZGFyeSBpZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGVtIGlzIGxlc3MgdGhhbiB0aGUgYWxsb3dlZCBkaXN0YW5jZS5cbiAgLy8gKzFweCBvbiBlYWNoIHNpZGUgZHVlIHRvIGZyYWN0aW9uYWwgcGl4ZWxzXG4gIGlmICh4IC0gY29vcmRzLngxID49IC0xICYmIHggLSBjb29yZHMueDEgPD0gc2l6ZUFyZWEgKyAxKSB7XG4gICAgc2lkZSA9ICdsZWZ0JztcbiAgfVxuICBpZiAoY29vcmRzLngyIC0geCA+PSAtMSAmJiBjb29yZHMueDIgLSB4IDw9IHNpemVBcmVhICsgMSkge1xuICAgIHNpZGUgPSAncmlnaHQnO1xuICB9XG4gIGlmICh5IC0gY29vcmRzLnkxID49IC0xICYmIHkgLSBjb29yZHMueTEgPD0gc2l6ZUFyZWEgKyAxKSB7XG4gICAgc2lkZSA9ICd0b3AnO1xuICB9XG4gIGlmIChjb29yZHMueTIgLSB5ID49IC0xICYmIGNvb3Jkcy55MiAtIHkgPD0gc2l6ZUFyZWEgKyAxKSB7XG4gICAgc2lkZSA9ICdib3R0b20nO1xuICB9XG5cbiAgcmV0dXJuIHNpZGU7XG59XG4iLCJpbXBvcnQgJy4vc3R5bGVzL2JvcmRlci10b29sYmFyLnBjc3MnO1xuaW1wb3J0IHN2Z1BsdXNCdXR0b24gZnJvbSAnLi9pbWcvcGx1cy5zdmcnO1xuaW1wb3J0IHN2Z0Nyb3NzQnV0dG9uIGZyb20gJy4vaW1nL2Nyb3NzLnN2Zyc7XG5pbXBvcnQge2NyZWF0ZX0gZnJvbSAnLi9kb2N1bWVudFV0aWxzJztcblxuY29uc3QgQ1NTID0ge1xuICBoaWdobGlnaHRpbmdMaW5lOiAndGMtdG9vbGJhcicsXG4gIGhpZGRlbjogJ3RjLXRvb2xiYXItLWhpZGRlbicsXG4gIGhvcml6b250YWxUb29sQmFyOiAndGMtdG9vbGJhci0taG9yJyxcbiAgaG9yaXpvbnRhbEhpZ2hsaWdodGluZ0xpbmU6ICd0Yy10b29sYmFyX19zaGluZS1saW5lLS1ob3InLFxuICB2ZXJ0aWNhbFRvb2xCYXI6ICd0Yy10b29sYmFyLS12ZXInLFxuICB2ZXJ0aWNhbEhpZ2hsaWdodGluZ0xpbmU6ICd0Yy10b29sYmFyX19zaGluZS1saW5lLS12ZXInLFxuICBwbHVzQnV0dG9uOiAndGMtdG9vbGJhcl9fcGx1cycsXG4gIHRvb2xzQnV0dG9uOiAndGMtdG9vbGJhcl9fdG9vbHMnLFxuICBob3Jpem9udGFsUGx1c0J1dHRvbjogJ3RjLXRvb2xiYXJfX3BsdXMtLWhvcicsXG4gIHZlcnRpY2FsUGx1c0J1dHRvbjogJ3RjLXRvb2xiYXJfX3BsdXMtLXZlcicsXG4gIGhvcml6b250YWxUb29sc0J1dHRvbjogJ3RjLXRvb2xiYXJfX3Rvb2xzLS1ob3InLFxuICB2ZXJ0aWNhbFRvb2xzQnV0dG9uOiAndGMtdG9vbGJhcl9fdG9vbHMtLXZlcicsXG4gIGFyZWE6ICd0Yy10YWJsZV9fYXJlYSdcbn07XG5cbi8qKlxuICogQW4gaXRlbSB3aXRoIGEgbWVudSB0aGF0IGFwcGVhcnMgd2hlbiB5b3UgaG92ZXIgb3ZlciBhIF90YWJsZSBib3JkZXJcbiAqL1xuY2xhc3MgQm9yZGVyVG9vbEJhciB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3BsdXNCdXR0b24gPSB0aGlzLl9nZW5lcmF0ZVBsdXNCdXR0b24oKTtcbiAgICB0aGlzLl90b29sc0J1dHRvbiA9IHRoaXMuX2dlbmVyYXRlVG9vbHNCdXR0b24oKTtcbiAgICB0aGlzLl9oaWdobGlnaHRpbmdMaW5lID0gdGhpcy5fZ2VuZXJhdGVIaWdobGlnaHRpbmdMaW5lKCk7XG4gICAgdGhpcy5fdG9vbGJhciA9IHRoaXMuX2dlbmVyYXRlVG9vbEJhcihbdGhpcy5fcGx1c0J1dHRvbiwgdGhpcy5fdG9vbHNCdXR0b24sIHRoaXMuX2hpZ2hsaWdodGluZ0xpbmVdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIHRoZSBlbnRpcmUgaXRlbSBpbnZpc2libGVcbiAgICovXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5fdG9vbGJhci5jbGFzc0xpc3QuYWRkKENTUy5oaWRkZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhlIGVudGlyZSBpdGVtIHZpc2libGVcbiAgICovXG4gIHNob3coKSB7XG4gICAgdGhpcy5fdG9vbGJhci5jbGFzc0xpc3QucmVtb3ZlKENTUy5oaWRkZW4pO1xuICAgIHRoaXMuX2hpZ2hsaWdodGluZ0xpbmUuY2xhc3NMaXN0LnJlbW92ZShDU1MuaGlkZGVuKTtcbiAgfTtcblxuICAvKipcbiAgICogSGlkZSBvbmx5IGhpZ2hsaWdodGluZ0xpbmVcbiAgICovXG4gIGhpZGVMaW5lKCkge1xuICAgIHRoaXMuX2hpZ2hsaWdodGluZ0xpbmUuY2xhc3NMaXN0LmFkZChDU1MuaGlkZGVuKTtcbiAgfTtcblxuICAvKipcbiAgICogcmV0dXJucyBIVE1MRWxlbWVudCBmb3IgaW5zZXJ0IGluIERPTVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBnZXQgaHRtbEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Rvb2xiYXI7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgbWVudSBidXR0b24gdG8gYWRkIHJvd3MgYW5kIGNvbHVtbnMuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgX2dlbmVyYXRlUGx1c0J1dHRvbigpIHtcbiAgICBjb25zdCBidXR0b24gPSBjcmVhdGUoJ2RpdicsIFsgQ1NTLnBsdXNCdXR0b24gXSk7XG5cbiAgICBidXR0b24uaW5uZXJIVE1MID0gc3ZnUGx1c0J1dHRvbjtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgZSA9IG5ldyBDdXN0b21FdmVudCgnY2xpY2snLCB7J2RldGFpbCc6IHsneCc6IGV2ZW50LnBhZ2VYLCAneSc6IGV2ZW50LnBhZ2VZfSwgJ2J1YmJsZXMnOiB0cnVlfSk7XG5cbiAgICAgIHRoaXMuX3Rvb2xiYXIuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYnV0dG9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIHRvb2wgYnV0dG9uIHRvIGVkaXQgcm93cyBhbmQgY29sdW1ucy5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBfZ2VuZXJhdGVUb29sc0J1dHRvbigpIHtcbiAgICBjb25zdCBidXR0b24gPSBjcmVhdGUoJ2RpdicsIFsgQ1NTLnRvb2xzQnV0dG9uIF0pO1xuXG4gICAgYnV0dG9uLmlubmVySFRNTCA9IHN2Z0Nyb3NzQnV0dG9uO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCBlID0gbmV3IEN1c3RvbUV2ZW50KCdjbGljaycsIHsnZGV0YWlsJzogeyd0eXBlJzogJ3JlbW92ZScsICd4JzogZXZlbnQucGFnZVgsICd5JzogZXZlbnQucGFnZVl9LCAnYnViYmxlcyc6IHRydWV9KTtcblxuICAgICAgdGhpcy5fdG9vbGJhci5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBidXR0b247XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogR2VuZXJhdGVzIGxpbmUgd2hpY2gg0YFvdmVyIGJvcmRlciBvZiBfdGFibGVcbiAgICovXG4gIF9nZW5lcmF0ZUhpZ2hsaWdodGluZ0xpbmUoKSB7XG4gICAgY29uc3QgbGluZSA9IGNyZWF0ZSgnZGl2JywgW0NTUy5oaWdobGlnaHRpbmdMaW5lXSk7XG5cbiAgICBsaW5lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGNvbnN0IGUgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NsaWNrJywgeydidWJibGVzJzogdHJ1ZX0pO1xuXG4gICAgICB0aGlzLl90b29sYmFyLmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxpbmU7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogR2VuZXJhdGVzIHRoZSBtYWluIGNvbXBvbmVudCBvZiB0aGUgY2xhc3NcbiAgICogQHBhcmFtIHtFbGVtZW50W119IGNoaWxkcmVuIC0gY2hpbGQgZWxlbWVudHMgb2YgdG9vbGJhclxuICAgKi9cbiAgX2dlbmVyYXRlVG9vbEJhcihjaGlsZHJlbikge1xuICAgIGNvbnN0IGJhciA9IGNyZWF0ZSgnZGl2JywgW0NTUy5oaWRkZW5dLCBudWxsLCBjaGlsZHJlbik7XG5cbiAgICBiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLl9yZWNhbGNNb3VzZVBvcyhldmVudCk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiBiYXI7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogUmVjYWxjIG1vdXNlIHBvc2l0aW9uIHdoZW4gdGhlIG1vdXNlIGxlZnQgdG9vbGJhclxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfcmVjYWxjTW91c2VQb3MoZXZlbnQpIHtcbiAgICB0aGlzLmhpZGUoKTtcbiAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChldmVudC5wYWdlWCwgZXZlbnQucGFnZVkpO1xuXG4gICAgaWYgKGFyZWEgIT09IG51bGwgJiYgYXJlYS5jbGFzc0xpc3QuY29udGFpbnMoQ1NTLmFyZWEpKSB7XG4gICAgICBjb25zdCBlID0gbmV3IE1vdXNlRXZlbnQoJ21vdXNlb3ZlcicsIHtjbGllbnRYOiBldmVudC5wYWdlWCwgY2xpZW50WTogZXZlbnQucGFnZVl9KTtcbiAgICAgIGFyZWEuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBpdGVtIHdpdGggYSBtZW51IHRoYXQgYXBwZWFycyB3aGVuIHlvdSBob3ZlciBvdmVyIGEgX3RhYmxlIGJvcmRlciBob3Jpem9udGFsbHlcbiAqL1xuZXhwb3J0IGNsYXNzIEhvcml6b250YWxCb3JkZXJUb29sQmFyIGV4dGVuZHMgQm9yZGVyVG9vbEJhciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fdG9vbGJhci5jbGFzc0xpc3QuYWRkKENTUy5ob3Jpem9udGFsVG9vbEJhcik7XG4gICAgdGhpcy5fcGx1c0J1dHRvbi5jbGFzc0xpc3QuYWRkKENTUy5ob3Jpem9udGFsUGx1c0J1dHRvbik7XG4gICAgdGhpcy5fdG9vbHNCdXR0b24uY2xhc3NMaXN0LmFkZChDU1MuaG9yaXpvbnRhbFRvb2xzQnV0dG9uKTtcbiAgICB0aGlzLl9oaWdobGlnaHRpbmdMaW5lLmNsYXNzTGlzdC5hZGQoQ1NTLmhvcml6b250YWxIaWdobGlnaHRpbmdMaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIFRvb2xCYXIgdG8geSBjb29yZFxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIGNvb3JkXG4gICAqL1xuICBzaG93SW4oeSkge1xuICAgIGNvbnN0IGhhbGZIZWlnaHQgPSBNYXRoLmZsb29yKE51bWJlci5wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl90b29sYmFyKS5oZWlnaHQpIC8gMik7XG5cbiAgICB0aGlzLl90b29sYmFyLnN0eWxlLnRvcCA9ICh5IC0gaGFsZkhlaWdodCkgKyAncHgnO1xuICAgIHRoaXMuc2hvdygpO1xuICB9XG59XG5cbi8qKlxuICogQW4gaXRlbSB3aXRoIGEgbWVudSB0aGF0IGFwcGVhcnMgd2hlbiB5b3UgaG92ZXIgb3ZlciBhIF90YWJsZSBib3JkZXIgdmVydGljYWxseVxuICovXG5leHBvcnQgY2xhc3MgVmVydGljYWxCb3JkZXJUb29sQmFyIGV4dGVuZHMgQm9yZGVyVG9vbEJhciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fdG9vbGJhci5jbGFzc0xpc3QuYWRkKENTUy52ZXJ0aWNhbFRvb2xCYXIpO1xuICAgIHRoaXMuX3BsdXNCdXR0b24uY2xhc3NMaXN0LmFkZChDU1MudmVydGljYWxQbHVzQnV0dG9uKTtcbiAgICB0aGlzLl90b29sc0J1dHRvbi5jbGFzc0xpc3QuYWRkKENTUy52ZXJ0aWNhbFRvb2xzQnV0dG9uKTtcbiAgICB0aGlzLl9oaWdobGlnaHRpbmdMaW5lLmNsYXNzTGlzdC5hZGQoQ1NTLnZlcnRpY2FsSGlnaGxpZ2h0aW5nTGluZSk7XG4gIH1cblxuICAvKipcbiAgICogTW92ZSBUb29sQmFyIHRvIHggY29vcmRcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBjb29yZFxuICAgKi9cbiAgc2hvd0luKHgpIHtcbiAgICBjb25zdCBoYWxmV2lkdGggPSBNYXRoLmZsb29yKE51bWJlci5wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl90b29sYmFyKS53aWR0aCkgLyAyKTtcblxuICAgIHRoaXMuX3Rvb2xiYXIuc3R5bGUubGVmdCA9ICh4IC0gaGFsZldpZHRoKSArICdweCc7XG4gICAgdGhpcy5zaG93KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZSwgZ2V0Q29vcmRzLCBnZXRTaWRlQnlDb29yZHMgfSBmcm9tIFwiLi9kb2N1bWVudFV0aWxzXCI7XG5pbXBvcnQgXCIuL3N0eWxlcy90YWJsZS5wY3NzXCI7XG5cbmNvbnN0IENTUyA9IHtcbiAgdGFibGU6IFwidGMtdGFibGVcIixcbiAgaW5wdXRGaWVsZDogXCJ0Yy10YWJsZV9faW5wXCIsXG4gIGNlbGw6IFwidGMtdGFibGVfX2NlbGxcIixcbiAgd3JhcHBlcjogXCJ0Yy10YWJsZV9fd3JhcFwiLFxuICBhcmVhOiBcInRjLXRhYmxlX19hcmVhXCIsXG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgbWFuYWdlcyBfdGFibGUgY29udGVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUYWJsZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9udW1iZXJPZkNvbHVtbnMgPSAwO1xuICAgIHRoaXMuX251bWJlck9mUm93cyA9IDA7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NyZWF0ZVRhYmxlV3JhcHBlcigpO1xuICAgIHRoaXMuX3RhYmxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidGFibGVcIik7XG5cbiAgICB0aGlzLl9oYW5nRXZlbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGNvbHVtbiBpbiB0YWJsZSBvbiBpbmRleCBwbGFjZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBudW1iZXIgaW4gdGhlIGFycmF5IG9mIGNvbHVtbnMsIHdoZXJlIG5ldyBjb2x1bW4gdG8gaW5zZXJ0LC0xIGlmIGluc2VydCBhdCB0aGUgZW5kXG4gICAqL1xuICBhZGRDb2x1bW4oaW5kZXggPSAtMSkge1xuICAgIHRoaXMuX251bWJlck9mQ29sdW1ucysrO1xuICAgIC8qKiBBZGQgY2VsbCBpbiBlYWNoIHJvdyAqL1xuICAgIGNvbnN0IHJvd3MgPSB0aGlzLl90YWJsZS5yb3dzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjZWxsID0gcm93c1tpXS5pbnNlcnRDZWxsKGluZGV4KTtcblxuICAgICAgdGhpcy5fZmlsbENlbGwoY2VsbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBjb2x1bW4gaW4gdGFibGUgb24gaW5kZXggcGxhY2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gbnVtYmVyIGluIHRoZSBhcnJheSBvZiBjb2x1bW5zLCB3aGVyZSBuZXcgY29sdW1uIHRvIGluc2VydCwtMSBpZiBpbnNlcnQgYXQgdGhlIGVuZFxuICAgKi9cbiAgcmVtb3ZlQ29sdW1uKGluZGV4ID0gLTEpIHtcbiAgICB0aGlzLl9udW1iZXJPZkNvbHVtbnMtLTtcbiAgICAvKiogUmVtb3ZlIGNlbGwgaW4gZWFjaCByb3cgKi9cbiAgICBjb25zdCByb3dzID0gdGhpcy5fdGFibGUucm93cztcblxuICAgIGlmIChcbiAgICAgIHJvd3NbMF0uY2hpbGRyZW4ubGVuZ3RoID09PSAxIHx8XG4gICAgICBpbmRleCA+PSByb3dzWzBdLmNoaWxkcmVuLmxlbmd0aCB8fFxuICAgICAgaW5kZXggPCAwXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByb3dzW2ldLmRlbGV0ZUNlbGwoaW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgcm93IGluIHRhYmxlIG9uIGluZGV4IHBsYWNlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIG51bWJlciBpbiB0aGUgYXJyYXkgb2YgY29sdW1ucywgd2hlcmUgbmV3IGNvbHVtbiB0byBpbnNlcnQsLTEgaWYgaW5zZXJ0IGF0IHRoZSBlbmRcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IHJvd1xuICAgKi9cbiAgYWRkUm93KGluZGV4ID0gLTEpIHtcbiAgICB0aGlzLl9udW1iZXJPZlJvd3MrKztcbiAgICBjb25zdCByb3cgPSB0aGlzLl90YWJsZS5pbnNlcnRSb3coaW5kZXgpO1xuXG4gICAgdGhpcy5fZmlsbFJvdyhyb3cpO1xuICAgIHJldHVybiByb3c7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHJvdyBpbiB0YWJsZSBvbiBpbmRleCBwbGFjZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBudW1iZXIgaW4gdGhlIGFycmF5IG9mIGNvbHVtbnMsIHdoZXJlIG5ldyBjb2x1bW4gdG8gaW5zZXJ0LC0xIGlmIGluc2VydCBhdCB0aGUgZW5kXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSByb3dcbiAgICovXG4gIHJlbW92ZVJvdyhpbmRleCA9IC0xKSB7XG4gICAgaWYgKGluZGV4ID49IHRoaXMuX251bWJlck9mUm93cyB8fCB0aGlzLl9udW1iZXJPZlJvd3MgPT09IDEgfHwgaW5kZXggPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbnVtYmVyT2ZSb3dzLS07XG4gICAgdGhpcy5fdGFibGUuZGVsZXRlUm93KGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBnZXQgaHRtbCBlbGVtZW50IG9mIHRhYmxlXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgZ2V0IGh0bWxFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIGdldCByZWFsIHRhYmxlIHRhZ1xuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIGdldCBib2R5KCkge1xuICAgIHJldHVybiB0aGlzLl90YWJsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIHNlbGVjdGVkL2VkaXRhYmxlIGNlbGxcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBnZXQgc2VsZWN0ZWRDZWxsKCkge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZENlbGw7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQ3JlYXRlcyB0YWJsZSBzdHJ1Y3R1cmVcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IHRib2R5IC0gd2hlcmUgcm93cyB3aWxsIGJlXG4gICAqL1xuICBfY3JlYXRlVGFibGVXcmFwcGVyKCkge1xuICAgIHJldHVybiBjcmVhdGUoXCJkaXZcIiwgW0NTUy53cmFwcGVyXSwgbnVsbCwgW2NyZWF0ZShcInRhYmxlXCIsIFtDU1MudGFibGVdKV0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIENyZWF0ZSBlZGl0YWJsZSBhcmVhIG9mIGNlbGxcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IC0gdGhlIGFyZWFcbiAgICovXG4gIF9jcmVhdGVDb250ZW50ZWRpdGFibGVBcmVhKCkge1xuICAgIHJldHVybiBjcmVhdGUoXCJkaXZcIiwgW0NTUy5pbnB1dEZpZWxkXSwgeyBjb250ZW50ZWRpdGFibGU6IFwidHJ1ZVwiIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEZpbGxzIHRoZSBlbXB0eSBjZWxsIG9mIHRoZSBlZGl0YWJsZSBhcmVhXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNlbGwgLSBlbXB0eSBjZWxsXG4gICAqL1xuICBfZmlsbENlbGwoY2VsbCkge1xuICAgIGNlbGwuY2xhc3NMaXN0LmFkZChDU1MuY2VsbCk7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2NyZWF0ZUNvbnRlbnRlZGl0YWJsZUFyZWEoKTtcblxuICAgIGNlbGwuYXBwZW5kQ2hpbGQoY3JlYXRlKFwiZGl2XCIsIFtDU1MuYXJlYV0sIG51bGwsIFtjb250ZW50XSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEZpbGxzIHRoZSBlbXB0eSByb3cgd2l0aCBjZWxscyAgaW4gdGhlIHNpemUgb2YgbnVtYmVyT2ZDb2x1bW5zXG4gICAqIEBwYXJhbSByb3cgPSB0aGUgZW1wdHkgcm93XG4gICAqL1xuICBfZmlsbFJvdyhyb3cpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX251bWJlck9mQ29sdW1uczsgaSsrKSB7XG4gICAgICBjb25zdCBjZWxsID0gcm93Lmluc2VydENlbGwoKTtcblxuICAgICAgdGhpcy5fZmlsbENlbGwoY2VsbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIGhhbmcgbmVjZXNzYXJ5IGV2ZW50c1xuICAgKi9cbiAgX2hhbmdFdmVudHMoKSB7XG4gICAgdGhpcy5fdGFibGUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiZm9jdXNcIixcbiAgICAgIChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLl9mb2N1c0VkaXRGaWVsZChldmVudCk7XG4gICAgICB9LFxuICAgICAgdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLl90YWJsZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJibHVyXCIsXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5fYmx1ckVkaXRGaWVsZChldmVudCk7XG4gICAgICB9LFxuICAgICAgdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLl90YWJsZS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX3ByZXNzZWRFbnRlckluRWRpdEZpZWxkKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3RhYmxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX2NsaWNrZWRPbkNlbGwoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fdGFibGUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibW91c2VvdmVyXCIsXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5fbW91c2VFbnRlckluRGV0ZWN0QXJlYShldmVudCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSxcbiAgICAgIHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFdoZW4geW91IGZvY3VzIG9uIGFuIGVkaXRhYmxlIGZpZWxkLCByZW1lbWJlcnMgdGhlIGNlbGxcbiAgICogQHBhcmFtIHtGb2N1c0V2ZW50fSBldmVudFxuICAgKi9cbiAgX2ZvY3VzRWRpdEZpZWxkKGV2ZW50KSB7XG4gICAgaWYgKCFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKENTUy5pbnB1dEZpZWxkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zZWxlY3RlZENlbGwgPSBldmVudC50YXJnZXQuY2xvc2VzdChcIi5cIiArIENTUy5jZWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBXaGVuIHlvdSBibHVyIG9uIGFuIGVkaXRhYmxlIGZpZWxkLCByZW1lbWJlcnMgdGhlIGNlbGxcbiAgICogQHBhcmFtIHtGb2N1c0V2ZW50fSBldmVudFxuICAgKi9cbiAgX2JsdXJFZGl0RmllbGQoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTLmlucHV0RmllbGQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3NlbGVjdGVkQ2VsbCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogV2hlbiBlbnRlciBpcyBwcmVzc2VkIHdoZW4gZWRpdGluZyBhIGZpZWxkXG4gICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcbiAgICovXG4gIF9wcmVzc2VkRW50ZXJJbkVkaXRGaWVsZChldmVudCkge1xuICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhDU1MuaW5wdXRGaWVsZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzICYmICFldmVudC5zaGlmdEtleSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogV2hlbiBjbGlja2luZyBvbiBhIGNlbGxcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudFxuICAgKi9cbiAgX2NsaWNrZWRPbkNlbGwoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTLmNlbGwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcihcIi5cIiArIENTUy5pbnB1dEZpZWxkKTtcbiAgICBjb250ZW50LmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogV2hlbiB0aGUgbW91c2UgZW50ZXJzIHRoZSBkZXRlY3Rpb24gYXJlYVxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfbW91c2VFbnRlckluRGV0ZWN0QXJlYShldmVudCkge1xuICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhDU1MuYXJlYSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb29yZHNDZWxsID0gZ2V0Q29vcmRzKGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiVERcIikpO1xuICAgIGNvbnN0IHNpZGUgPSBnZXRTaWRlQnlDb29yZHMoY29vcmRzQ2VsbCwgZXZlbnQucGFnZVgsIGV2ZW50LnBhZ2VZKTtcblxuICAgIGV2ZW50LnRhcmdldC5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IEN1c3RvbUV2ZW50KFwibW91c2VJbkFjdGl2YXRpbmdBcmVhXCIsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgc2lkZTogc2lkZSxcbiAgICAgICAgfSxcbiAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMvdGFibGUtY29uc3RydWN0b3IucGNzc1wiO1xuaW1wb3J0IHsgY3JlYXRlLCBnZXRDb29yZHMsIGdldFNpZGVCeUNvb3JkcyB9IGZyb20gXCIuL2RvY3VtZW50VXRpbHNcIjtcbmltcG9ydCB7XG4gIEhvcml6b250YWxCb3JkZXJUb29sQmFyLFxuICBWZXJ0aWNhbEJvcmRlclRvb2xCYXIsXG59IGZyb20gXCIuL2JvcmRlclRvb2xCYXJcIjtcbmltcG9ydCB7IFRhYmxlIH0gZnJvbSBcIi4vdGFibGVcIjtcblxuY29uc3QgQ1NTID0ge1xuICBlZGl0b3I6IFwidGMtZWRpdG9yXCIsXG4gIHRvb2xCYXJIb3I6IFwidGMtdG9vbGJhci0taG9yXCIsXG4gIHRvb2xCYXJWZXI6IFwidGMtdG9vbGJhci0tdmVyXCIsXG4gIGlucHV0RmllbGQ6IFwidGMtdGFibGVfX2lucFwiLFxufTtcblxuLyoqXG4gKiBFbnRyeSBwb2ludC4gQ29udHJvbHMgdGFibGUgYW5kIGdpdmUgQVBJIHRvIHVzZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFRhYmxlQ29uc3RydWN0b3Ige1xuICAvKipcbiAgICogQ3JlYXRlc1xuICAgKiBAcGFyYW0ge1RhYmxlRGF0YX0gZGF0YSAtIHByZXZpb3VzbHkgc2F2ZWQgZGF0YSBmb3IgaW5zZXJ0IGluIHRhYmxlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSBjb25maWd1cmF0aW9uIG9mIHRhYmxlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhcGkgLSBFZGl0b3IuanMgQVBJXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjb25maWcsIGFwaSkge1xuICAgIC8qKiBjcmVhdGluZyB0YWJsZSAqL1xuICAgIHRoaXMuX3RhYmxlID0gbmV3IFRhYmxlKCk7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuX3Jlc2l6ZVRhYmxlKGRhdGEsIGNvbmZpZyk7XG5cbiAgICB0aGlzLl9maWxsVGFibGUoZGF0YSwgc2l6ZSk7XG5cbiAgICAvKiogY3JlYXRpbmcgY29udGFpbmVyIGFyb3VuZCB0YWJsZSAqL1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNyZWF0ZShcImRpdlwiLCBbQ1NTLmVkaXRvciwgYXBpLnN0eWxlcy5ibG9ja10sIG51bGwsIFtcbiAgICAgIHRoaXMuX3RhYmxlLmh0bWxFbGVtZW50LFxuICAgIF0pO1xuXG4gICAgLyoqIGNyZWF0aW5nIFRvb2xCYXJzICovXG4gICAgdGhpcy5fdmVydGljYWxUb29sQmFyID0gbmV3IFZlcnRpY2FsQm9yZGVyVG9vbEJhcigpO1xuICAgIHRoaXMuX2hvcml6b250YWxUb29sQmFyID0gbmV3IEhvcml6b250YWxCb3JkZXJUb29sQmFyKCk7XG4gICAgdGhpcy5fdGFibGUuaHRtbEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5faG9yaXpvbnRhbFRvb2xCYXIuaHRtbEVsZW1lbnQpO1xuICAgIHRoaXMuX3RhYmxlLmh0bWxFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3ZlcnRpY2FsVG9vbEJhci5odG1sRWxlbWVudCk7XG5cbiAgICAvKiogQWN0aXZhdGVkIGVsZW1lbnRzICovXG4gICAgdGhpcy5faG92ZXJlZENlbGwgPSBudWxsO1xuICAgIHRoaXMuX2FjdGl2YXRlZFRvb2xCYXIgPSBudWxsO1xuICAgIHRoaXMuX2hvdmVyZWRDZWxsU2lkZSA9IG51bGw7XG5cbiAgICAvKiogVGltZXJzICovXG4gICAgdGhpcy5fcGx1c0J1dERlbGF5ID0gbnVsbDtcbiAgICB0aGlzLl90b29sYmFyU2hvd0RlbGF5ID0gbnVsbDtcblxuICAgIHRoaXMuX2hhbmdFdmVudHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIGh0bWwgZWxlbWVudCBvZiBUYWJsZUNvbnN0cnVjdG9yO1xuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIGdldCBodG1sRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqICBGaWxsIHRhYmxlIGRhdGEgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1RhYmxlRGF0YX0gZGF0YSAtIGRhdGEgZm9yIGluc2VydCBpbiB0YWJsZVxuICAgKiBAcGFyYW0ge3tyb3dzOiBudW1iZXIsIGNvbHM6IG51bWJlcn19IHNpemUgLSBjb250YWlucyBudW1iZXIgb2Ygcm93cyBhbmQgY29sc1xuICAgKi9cbiAgX2ZpbGxUYWJsZShkYXRhLCBzaXplKSB7XG4gICAgaWYgKGRhdGEuY29udGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemUucm93cyAmJiBpIDwgZGF0YS5jb250ZW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2l6ZS5jb2xzICYmIGogPCBkYXRhLmNvbnRlbnRbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAvLyBnZXQgY3VycmVudCBjZWxsIGFuZCBoZXIgZWRpdGFibGUgcGFydFxuICAgICAgICAgIGlmICghdGhpcy5fdGFibGUuYm9keS5yb3dzW2ldKSB7XG4gICAgICAgICAgICB0aGlzLl90YWJsZS5hZGRSb3coKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aGlzLl90YWJsZS5ib2R5LnJvd3NbaV0uY2VsbHNbal0pIHtcbiAgICAgICAgICAgIHRoaXMuX3RhYmxlLmFkZENvbHVtbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuX3RhYmxlLmJvZHkucm93c1tpXS5jZWxsc1tqXS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgXCIuXCIgKyBDU1MuaW5wdXRGaWVsZFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpbnB1dC5pbm5lckhUTUwgPSBkYXRhLmNvbnRlbnRbaV1bal07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogcmVzaXplIHRvIG1hdGNoIGNvbmZpZyBvciB0cmFuc21pdHRlZCBkYXRhXG4gICAqIEBwYXJhbSB7VGFibGVEYXRhfSBkYXRhIC0gZGF0YSBmb3IgaW5zZXJ0aW5nIHRvIHRoZSB0YWJsZVxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIC0gY29uZmlndXJhdGlvbiBvZiB0YWJsZVxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGNvbmZpZy5yb3dzIC0gbnVtYmVyIG9mIHJvd3MgaW4gY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGNvbmZpZy5jb2xzIC0gbnVtYmVyIG9mIGNvbHMgaW4gY29uZmlndXJhdGlvblxuICAgKiBAcmV0dXJuIHt7cm93czogbnVtYmVyLCBjb2xzOiBudW1iZXJ9fSAtIG51bWJlciBvZiBjb2xzIGFuZCByb3dzXG4gICAqL1xuICBfcmVzaXplVGFibGUoZGF0YSwgY29uZmlnKSB7XG4gICAgY29uc3QgaXNWYWxpZEFycmF5ID0gQXJyYXkuaXNBcnJheShkYXRhLmNvbnRlbnQpO1xuICAgIGNvbnN0IGlzTm90RW1wdHlBcnJheSA9IGlzVmFsaWRBcnJheSA/IGRhdGEuY29udGVudC5sZW5ndGggOiBmYWxzZTtcbiAgICBjb25zdCBjb250ZW50Um93cyA9IGlzVmFsaWRBcnJheSA/IGRhdGEuY29udGVudC5sZW5ndGggOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgY29udGVudENvbHMgPSBpc05vdEVtcHR5QXJyYXkgPyBkYXRhLmNvbnRlbnRbMF0ubGVuZ3RoIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHBhcnNlZFJvd3MgPSBOdW1iZXIucGFyc2VJbnQoY29uZmlnLnJvd3MpO1xuICAgIGNvbnN0IHBhcnNlZENvbHMgPSBOdW1iZXIucGFyc2VJbnQoY29uZmlnLmNvbHMpO1xuICAgIC8vIHZhbHVlIG9mIGNvbmZpZyBoYXZlIHRvIGJlIHBvc2l0aXZlIG51bWJlclxuICAgIGNvbnN0IGNvbmZpZ1Jvd3MgPVxuICAgICAgIWlzTmFOKHBhcnNlZFJvd3MpICYmIHBhcnNlZFJvd3MgPiAwID8gcGFyc2VkUm93cyA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjb25maWdDb2xzID1cbiAgICAgICFpc05hTihwYXJzZWRDb2xzKSAmJiBwYXJzZWRDb2xzID4gMCA/IHBhcnNlZENvbHMgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZGVmYXVsdFJvd3MgPSAyO1xuICAgIGNvbnN0IGRlZmF1bHRDb2xzID0gMjtcbiAgICBjb25zdCByb3dzID0gY29udGVudFJvd3MgfHwgY29uZmlnUm93cyB8fCBkZWZhdWx0Um93cztcbiAgICBjb25zdCBjb2xzID0gY29udGVudENvbHMgfHwgY29uZmlnQ29scyB8fCBkZWZhdWx0Q29scztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czsgaSsrKSB7XG4gICAgICB0aGlzLl90YWJsZS5hZGRSb3coKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xzOyBpKyspIHtcbiAgICAgIHRoaXMuX3RhYmxlLmFkZENvbHVtbigpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByb3dzOiByb3dzLFxuICAgICAgY29sczogY29scyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFNob3cgVG9vbEJhclxuICAgKiBAcGFyYW0ge0JvcmRlclRvb2xCYXJ9IHRvb2xCYXIgLSB3aGljaCB0b29sYmFyIHRvIHNob3dcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvb3JkIC0gd2hlcmUgc2hvdy4geCBvciB5IGRlcGVuZGluZyBvbiB0aGUgZ3JhZGUgb2YgdGhlIHRvb2xiYXJcbiAgICovXG4gIF9zaG93VG9vbEJhcih0b29sQmFyLCBjb29yZCkge1xuICAgIHRoaXMuX2hpZGVUb29sQmFyKCk7XG4gICAgdGhpcy5fYWN0aXZhdGVkVG9vbEJhciA9IHRvb2xCYXI7XG4gICAgdG9vbEJhci5zaG93SW4oY29vcmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEhpZGUgYWxsIG9mIHRvb2xiYXJzXG4gICAqL1xuICBfaGlkZVRvb2xCYXIoKSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2YXRlZFRvb2xCYXIgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2FjdGl2YXRlZFRvb2xCYXIuaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBoYW5nIG5lY2Vzc2FyeSBldmVudHNcbiAgICovXG4gIF9oYW5nRXZlbnRzKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VJbkFjdGl2YXRpbmdBcmVhXCIsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5fdG9vbGJhckNhbGxpbmcoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX2NsaWNrVG9vbGJhcihldmVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVUb29sQmFyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9jb250YWluZXJLZXlkb3duKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9sZWF2ZURldGVjdEFyZWEoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9tb3VzZUVudGVySW5EZXRlY3RBcmVhKGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBkZXRlY3RzIGEgbW91c2VlbnRlciBvbiBhIHNwZWNpYWwgYXJlYVxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfbW91c2VJbkFjdGl2YXRpbmdBcmVhTGlzdGVuZXIoZXZlbnQpIHtcbiAgICB0aGlzLl9ob3ZlcmVkQ2VsbFNpZGUgPSBldmVudC5kZXRhaWwuc2lkZTtcbiAgICBjb25zdCBhcmVhQ29vcmRzID0gZ2V0Q29vcmRzKGV2ZW50LnRhcmdldCk7XG4gICAgY29uc3QgY29udGFpbmVyQ29vcmRzID0gZ2V0Q29vcmRzKHRoaXMuX3RhYmxlLmh0bWxFbGVtZW50KTtcblxuICAgIHRoaXMuX2hvdmVyZWRDZWxsID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJURFwiKTtcblxuICAgIGlmICh0aGlzLl9ob3ZlcmVkQ2VsbCA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgcGFkZGluZ0NvbnRhaW5lciA9IDExO1xuXG4gICAgICB0aGlzLl9ob3ZlcmVkQ2VsbCA9IHRoaXMuX2NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueDEgKz0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueTEgKz0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueDIgLT0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueTIgLT0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faG92ZXJlZENlbGxTaWRlID09PSBcInRvcFwiKSB7XG4gICAgICB0aGlzLl9zaG93VG9vbEJhcihcbiAgICAgICAgdGhpcy5faG9yaXpvbnRhbFRvb2xCYXIsXG4gICAgICAgIGFyZWFDb29yZHMueTEgLSBjb250YWluZXJDb29yZHMueTEgLSAyXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5faG92ZXJlZENlbGxTaWRlID09PSBcImJvdHRvbVwiKSB7XG4gICAgICB0aGlzLl9zaG93VG9vbEJhcihcbiAgICAgICAgdGhpcy5faG9yaXpvbnRhbFRvb2xCYXIsXG4gICAgICAgIGFyZWFDb29yZHMueTIgLSBjb250YWluZXJDb29yZHMueTEgLSAxXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5faG92ZXJlZENlbGxTaWRlID09PSBcImxlZnRcIikge1xuICAgICAgdGhpcy5fc2hvd1Rvb2xCYXIoXG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsVG9vbEJhcixcbiAgICAgICAgYXJlYUNvb3Jkcy54MSAtIGNvbnRhaW5lckNvb3Jkcy54MSAtIDJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9ob3ZlcmVkQ2VsbFNpZGUgPT09IFwicmlnaHRcIikge1xuICAgICAgdGhpcy5fc2hvd1Rvb2xCYXIoXG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsVG9vbEJhcixcbiAgICAgICAgYXJlYUNvb3Jkcy54MiAtIGNvbnRhaW5lckNvb3Jkcy54MSAtIDFcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIENoZWNrcyBlbGVtIGlzIHRvb2xiYXJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSAtIGVsZW1lbnRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIF9pc1Rvb2xiYXIoZWxlbSkge1xuICAgIHJldHVybiAhIShcbiAgICAgIGVsZW0uY2xvc2VzdChcIi5cIiArIENTUy50b29sQmFySG9yKSB8fCBlbGVtLmNsb3Nlc3QoXCIuXCIgKyBDU1MudG9vbEJhclZlcilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEhpZGUgdG9vbGJhciwgaWYgbW91c2UgbGVmdCBhcmVhXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAgICovXG4gIF9sZWF2ZURldGVjdEFyZWEoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5faXNUb29sYmFyKGV2ZW50LnJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCh0aGlzLl90b29sYmFyU2hvd0RlbGF5KTtcbiAgICB0aGlzLl9oaWRlVG9vbEJhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFNob3cgdG9vbGJhciB3aGVuIG1vdXNlIGluIGFjdGl2YXRpb24gYXJlYVxuICAgKiBTaG93aW5nXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAgICovXG4gIF90b29sYmFyQ2FsbGluZyhldmVudCkge1xuICAgIGlmICh0aGlzLl9pc1Rvb2xiYXIoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQodGhpcy5fdG9vbGJhclNob3dEZWxheSk7XG4gICAgdGhpcy5fdG9vbGJhclNob3dEZWxheSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5fbW91c2VJbkFjdGl2YXRpbmdBcmVhTGlzdGVuZXIoZXZlbnQpO1xuICAgIH0sIDEyNSk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogaGFuZGxpbmcgY2xpY2tzIG9uIHRvb2xiYXJzXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAgICovXG4gIF9jbGlja1Rvb2xiYXIoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuX2lzVG9vbGJhcihldmVudC50YXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0eXBlQ29vcmQ7XG5cbiAgICBjb25zdCB0eXBlID0gZXZlbnQuZGV0YWlsICYmIGV2ZW50LmRldGFpbC50eXBlID8gZXZlbnQuZGV0YWlsLnR5cGUgOiBcIlwiO1xuXG4gICAgaWYgKHRoaXMuX2FjdGl2YXRlZFRvb2xCYXIgPT09IHRoaXMuX2hvcml6b250YWxUb29sQmFyKSB7XG4gICAgICBpZiAodHlwZSA9PT0gXCJyZW1vdmVcIikge1xuICAgICAgICB0aGlzLl9yZW1vdmVSb3coKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FkZFJvdygpO1xuICAgICAgfVxuICAgICAgdHlwZUNvb3JkID0gXCJ5XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlID09PSBcInJlbW92ZVwiKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNvbHVtbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkQ29sdW1uKCk7XG4gICAgICB9XG4gICAgICB0eXBlQ29vcmQgPSBcInhcIjtcbiAgICB9XG4gICAgLyoqIElmIGV2ZW50IGhhcyB0cmFuc21pdHRlZCBkYXRhIChjb29yZHMgb2YgbW91c2UpICovXG4gICAgY29uc3QgZGV0YWlsSGFzRGF0YSA9IGlzTmFOKGV2ZW50LmRldGFpbCkgJiYgZXZlbnQuZGV0YWlsICE9PSBudWxsO1xuXG4gICAgaWYgKGRldGFpbEhhc0RhdGEpIHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckNvb3JkcyA9IGdldENvb3Jkcyh0aGlzLl90YWJsZS5odG1sRWxlbWVudCk7XG4gICAgICBsZXQgY29vcmQ7XG5cbiAgICAgIGlmICh0eXBlQ29vcmQgPT09IFwieFwiKSB7XG4gICAgICAgIGNvb3JkID0gZXZlbnQuZGV0YWlsLnggLSBjb250YWluZXJDb29yZHMueDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb29yZCA9IGV2ZW50LmRldGFpbC55IC0gY29udGFpbmVyQ29vcmRzLnkxO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGVsYXlBZGRCdXR0b25Gb3JNdWx0aUNsaWNraW5nTmVhck1vdXNlKGNvb3JkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZVRvb2xCYXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogZGV0ZWN0cyBidXR0b24gcHJlc3NlcyB3aGVuIGVkaXRpbmcgYSB0YWJsZSdzIGNvbnRlbnRcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudFxuICAgKi9cbiAgX2NvbnRhaW5lcktleWRvd24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lckVudGVyUHJlc3NlZChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIExlYXZlcyB0aGUgUGx1c0J1dHRvbiBhY3RpdmUgdW5kZXIgbW91c2VcbiAgICogVGhlIHRpbWVyIGdpdmVzIHRpbWUgdG8gcHJlc3MgdGhlIGJ1dHRvbiBhZ2FpbiwgYmVmb3JlIGl0IGRpc2FwcGVhcnMuXG4gICAqIFdoaWxlIHRoZSBidXR0b24gaXMgYmVpbmcgcHJlc3NlZCwgdGhlIHRpbWVyIHdpbGwgYmUgcmVzZXRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvb3JkIC0gY29vcmRzIG9mIG1vdXNlLiB4IG9yIHkgZGVwZW5kaW5nIG9uIHRoZSBncmFkZSBvZiB0aGUgdG9vbGJhclxuICAgKi9cbiAgX2RlbGF5QWRkQnV0dG9uRm9yTXVsdGlDbGlja2luZ05lYXJNb3VzZShjb29yZCkge1xuICAgIHRoaXMuX3Nob3dUb29sQmFyKHRoaXMuX2FjdGl2YXRlZFRvb2xCYXIsIGNvb3JkKTtcbiAgICB0aGlzLl9hY3RpdmF0ZWRUb29sQmFyLmhpZGVMaW5lKCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX3BsdXNCdXREZWxheSk7XG4gICAgdGhpcy5fcGx1c0J1dERlbGF5ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9oaWRlVG9vbEJhcigpO1xuICAgIH0sIDUwMCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQ2hlY2sgaWYgdGhlIGFkZGl0aW9uIGlzIGluaXRpYXRlZCBieSB0aGUgY29udGFpbmVyIGFuZCB3aGljaCBzaWRlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gLTEgZm9yIGxlZnQgb3IgdG9wOyAwIGZvciBib3R0b20gb3IgcmlnaHQ7IDEgaWYgbm90IGNvbnRhaW5lclxuICAgKi9cbiAgX2dldEhvdmVyZWRTaWRlT2ZDb250YWluZXIoKSB7XG4gICAgaWYgKHRoaXMuX2hvdmVyZWRDZWxsID09PSB0aGlzLl9jb250YWluZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pc0JvdHRvbU9yUmlnaHQoKSA/IC0xIDogMDtcbiAgICB9XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogY2hlY2sgaWYgaG92ZXJlZCBjZWxsIHNpZGUgaXMgYm90dG9tIG9yIHJpZ2h0LiAobGVmdGVyIGluIGFycmF5IG9mIGNlbGxzIG9yIHJvd3MgdGhhbiBob3ZlcmVkIGNlbGwpXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgX2lzQm90dG9tT3JSaWdodCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5faG92ZXJlZENlbGxTaWRlID09PSBcImJvdHRvbVwiIHx8IHRoaXMuX2hvdmVyZWRDZWxsU2lkZSA9PT0gXCJyaWdodFwiXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHJvdyBpbiB0YWJsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FkZFJvdygpIHtcbiAgICBjb25zdCBpbmRpY2F0aXZlUm93ID0gdGhpcy5faG92ZXJlZENlbGwuY2xvc2VzdChcIlRSXCIpO1xuICAgIGxldCBpbmRleCA9IHRoaXMuX2dldEhvdmVyZWRTaWRlT2ZDb250YWluZXIoKTtcblxuICAgIGlmIChpbmRleCA9PT0gMSkge1xuICAgICAgaW5kZXggPSBpbmRpY2F0aXZlUm93LnNlY3Rpb25Sb3dJbmRleDtcbiAgICAgIC8vIGlmIGluc2VydGluZyBhZnRlciBob3ZlcmVkIGNlbGxcbiAgICAgIGluZGV4ID0gaW5kZXggKyB0aGlzLl9pc0JvdHRvbU9yUmlnaHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl90YWJsZS5hZGRSb3coaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgcm93IGluIHRhYmxlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVtb3ZlUm93KCkge1xuICAgIGNvbnN0IGluZGljYXRpdmVSb3cgPSB0aGlzLl9ob3ZlcmVkQ2VsbC5jbG9zZXN0KFwiVFJcIik7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5fZ2V0SG92ZXJlZFNpZGVPZkNvbnRhaW5lcigpO1xuXG4gICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICBpbmRleCA9IGluZGljYXRpdmVSb3cuc2VjdGlvblJvd0luZGV4O1xuICAgICAgLy8gaWYgaW5zZXJ0aW5nIGFmdGVyIGhvdmVyZWQgY2VsbFxuICAgICAgaW5kZXggPSBpbmRleCArIHRoaXMuX2lzQm90dG9tT3JSaWdodCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3RhYmxlLnJlbW92ZVJvdyhpbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQWRkcyBjb2x1bW4gaW4gdGFibGVcbiAgICovXG4gIF9hZGRDb2x1bW4oKSB7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5fZ2V0SG92ZXJlZFNpZGVPZkNvbnRhaW5lcigpO1xuXG4gICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICBpbmRleCA9IHRoaXMuX2hvdmVyZWRDZWxsLmNlbGxJbmRleDtcbiAgICAgIC8vIGlmIGluc2VydGluZyBhZnRlciBob3ZlcmVkIGNlbGxcbiAgICAgIGluZGV4ID0gaW5kZXggKyB0aGlzLl9pc0JvdHRvbU9yUmlnaHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl90YWJsZS5hZGRDb2x1bW4oaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFJlbW92ZXMgY29sdW1uIGluIHRhYmxlXG4gICAqL1xuICBfcmVtb3ZlQ29sdW1uKCkge1xuICAgIGxldCBpbmRleCA9IHRoaXMuX2dldEhvdmVyZWRTaWRlT2ZDb250YWluZXIoKTtcblxuICAgIGlmIChpbmRleCA9PT0gMSkge1xuICAgICAgaW5kZXggPSB0aGlzLl9ob3ZlcmVkQ2VsbC5jZWxsSW5kZXg7XG4gICAgICAvLyBpZiBpbnNlcnRpbmcgYWZ0ZXIgaG92ZXJlZCBjZWxsXG4gICAgICBpbmRleCA9IGluZGV4ICsgdGhpcy5faXNCb3R0b21PclJpZ2h0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5fdGFibGUucmVtb3ZlQ29sdW1uKGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBpZiBcImNudHJsICsgRW5ldGVyXCIgaXMgcHJlc3NlZCB0aGVuIGNyZWF0ZSBuZXcgbGluZSB1bmRlciBjdXJyZW50IGFuZCBmb2N1cyBpdFxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfY29udGFpbmVyRW50ZXJQcmVzc2VkKGV2ZW50KSB7XG4gICAgaWYgKCEodGhpcy5fdGFibGUuc2VsZWN0ZWRDZWxsICE9PSBudWxsICYmICFldmVudC5zaGlmdEtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5kaWNhdGl2ZVJvdyA9IHRoaXMuX3RhYmxlLnNlbGVjdGVkQ2VsbC5jbG9zZXN0KFwiVFJcIik7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5fZ2V0SG92ZXJlZFNpZGVPZkNvbnRhaW5lcigpO1xuXG4gICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICBpbmRleCA9IGluZGljYXRpdmVSb3cuc2VjdGlvblJvd0luZGV4ICsgMTtcbiAgICB9XG4gICAgY29uc3QgbmV3c3RyID0gdGhpcy5fdGFibGUuYWRkUm93KGluZGV4KTtcblxuICAgIG5ld3N0ci5jZWxsc1swXS5jbGljaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFdoZW4gdGhlIG1vdXNlIGVudGVycyB0aGUgZGV0ZWN0aW9uIGFyZWFcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudFxuICAgKi9cbiAgX21vdXNlRW50ZXJJbkRldGVjdEFyZWEoZXZlbnQpIHtcbiAgICBjb25zdCBjb29yZHMgPSBnZXRDb29yZHModGhpcy5fY29udGFpbmVyKTtcbiAgICBsZXQgc2lkZSA9IGdldFNpZGVCeUNvb3Jkcyhjb29yZHMsIGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSk7XG5cbiAgICBldmVudC50YXJnZXQuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcIm1vdXNlSW5BY3RpdmF0aW5nQXJlYVwiLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIHNpZGU6IHNpZGUsXG4gICAgICAgIH0sXG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICB9KVxuICAgICk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=