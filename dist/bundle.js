!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Table=e():t.Table=e()}(window,function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=4)}([function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=function(t,e){var o=t[1]||"",i=t[3];if(!i)return o;if(e&&"function"==typeof btoa){var n=(l=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[o].concat(r).concat([n]).join("\n")}var l;return[o].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o}).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(i[r]=!0)}for(n=0;n<t.length;n++){var l=t[n];"number"==typeof l[0]&&i[l[0]]||(o&&!l[2]?l[2]=o:o&&(l[2]="("+l[2]+") and ("+o+")"),e.push(l))}},e}},function(t,e,o){var i,n,r={},l=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=i.apply(this,arguments)),n}),s=function(t){var e={};return function(t,o){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,o);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),a=null,c=0,h=[],d=o(7);function u(t,e){for(var o=0;o<t.length;o++){var i=t[o],n=r[i.id];if(n){n.refs++;for(var l=0;l<n.parts.length;l++)n.parts[l](i.parts[l]);for(;l<i.parts.length;l++)n.parts.push(g(i.parts[l],e))}else{var s=[];for(l=0;l<i.parts.length;l++)s.push(g(i.parts[l],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(t,e){for(var o=[],i={},n=0;n<t.length;n++){var r=t[n],l=e.base?r[0]+e.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[l]?i[l].parts.push(s):o.push(i[l]={id:l,parts:[s]})}return o}function p(t,e){var o=s(t.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=h[h.length-1];if("top"===t.insertAt)i?i.nextSibling?o.insertBefore(e,i.nextSibling):o.appendChild(e):o.insertBefore(e,o.firstChild),h.push(e);else if("bottom"===t.insertAt)o.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=s(t.insertAt.before,o);o.insertBefore(e,n)}}function _(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function b(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return o.nc}();i&&(t.attrs.nonce=i)}return v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(o){t.setAttribute(o,e[o])})}function g(t,e){var o,i,n,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var l=c++;o=a||(a=b(e)),i=w.bind(null,o,l,!1),n=w.bind(null,o,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),i=function(t,e,o){var i=o.css,n=o.sourceMap,r=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||r)&&(i=d(i));n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var l=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(l),s&&URL.revokeObjectURL(s)}.bind(null,o,e),n=function(){_(o),o.href&&URL.revokeObjectURL(o.href)}):(o=b(e),i=function(t,e){var o=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}.bind(null,o),n=function(){_(o)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=l()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var o=f(t,e);return u(o,e),function(t){for(var i=[],n=0;n<o.length;n++){var l=o[n];(s=r[l.id]).refs--,i.push(s)}t&&u(f(t,e),e);for(n=0;n<i.length;n++){var s;if(0===(s=i[n]).refs){for(var a=0;a<s.parts.length;a++)s.parts[a]();delete r[s.id]}}}};var m,y=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function w(t,e,o,i){var n=o?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var r=document.createTextNode(n),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(r,l[e]):t.appendChild(r)}}},function(t,e){t.exports='<svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="10" fill="#388AE5"></circle><path fill="#FFF" d="M10.9 9.1h3.7a.9.9 0 1 1 0 1.8h-3.7v3.7a.9.9 0 1 1-1.8 0v-3.7H5.4a.9.9 0 0 1 0-1.8h3.7V5.4a.9.9 0 0 1 1.8 0v3.7z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="470 270 20 20"><path fill="#E23952" d="M480 270c5.527 0 10 4.478 10 10 0 5.527-4.473 10-10 10-5.522 0-10-4.473-10-10 0-5.522 4.478-10 10-10z"></path><path fill="#FFF" d="M481.274 280l2.612 2.617c.352.352.352.918 0 1.27s-.918.352-1.27 0L480 281.274l-2.617 2.612c-.352.352-.918.352-1.27 0s-.352-.918 0-1.27l2.612-2.617-2.612-2.617c-.352-.352-.352-.918 0-1.27s.918-.352 1.27 0l2.617 2.612 2.617-2.612c.352-.352.918-.352 1.27 0s.352.918 0 1.27L481.274 280z"></path></svg>'},function(t,e,o){const i=o(13).TableConstructor,n=o(12),r={input:"tc-table__inp"};t.exports=class{static get enableLineBreaks(){return!0}static get toolbox(){return{icon:n,title:"Table"}}constructor({data:t,config:e,api:o}){this.api=o,this._tableConstructor=new i(t,e,o)}render(){return this._tableConstructor.htmlElement}save(t){const e=[],o=t.querySelector("table").rows;for(let t=0;t<o.length;t++){const i=o[t],n=Array.from(i.cells).map(t=>t.querySelector("."+r.input));n.every(this._isEmpty)||e.push(n.map(t=>t.innerHTML))}return{content:e}}_isEmpty(t){return!t.textContent.trim()}}},function(t,e,o){var i=o(6);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){(t.exports=o(0)(!1)).push([t.i,".tc-editor{padding:10px;position:relative;box-sizing:content-box;width:100%;left:-10px}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,i=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?o+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,o){var i=o(9);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){(t.exports=o(0)(!1)).push([t.i,".tc-toolbar{background:#368be6;}.tc-toolbar--hidden{visibility:hidden}.tc-toolbar--hor{width:100%;height:21px;flex-direction:row;left:0;top:1px}.tc-toolbar--hor,.tc-toolbar--ver{display:flex;align-items:center;position:absolute;z-index:100}.tc-toolbar--ver{height:100%;width:21px;flex-direction:column;top:0;left:-1px}.tc-toolbar__plus--hor{margin-left:-10px}.tc-toolbar__plus--ver{margin-top:-10px}.tc-toolbar__plus,.tc-toolbar__tools{height:21px;width:21px;margin-top:0;cursor:pointer}.tc-toolbar__tools--hor{margin-left:2px}.tc-toolbar__tools--ver{margin-top:2px}.tc-toolbar__shine-line--hor{min-height:1px;width:100%}.tc-toolbar__shine-line--ver{min-width:1px;height:100%}",""])},function(t,e,o){var i=o(11);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){(t.exports=o(0)(!1)).push([t.i,".tc-table{width:100%;height:100%;border-collapse:collapse;table-layout:fixed;}.tc-table__wrap{border:1px solid #dbdbe2;border-radius:3px;position:relative;height:100%;width:100%;box-sizing:border-box}.tc-table__cell{border:1px solid #dbdbe2;padding:0;vertical-align:top}.tc-table__area{padding:10px;height:100%}.tc-table__inp{outline:none;flex-grow:100;min-height:1.5em;height:100%;overflow:hidden}.tc-table tbody tr:first-child td{border-top:none}.tc-table tbody tr:last-child td{border-bottom:none}.tc-table tbody tr td:last-child{border-right:none}.tc-table tbody tr td:first-child{border-left:none}",""])},function(t,e){t.exports='<svg width="18" height="14"><path d="M2.833 8v1.95a1.7 1.7 0 0 0 1.7 1.7h3.45V8h-5.15zm0-2h5.15V2.35h-3.45a1.7 1.7 0 0 0-1.7 1.7V6zm12.3 2h-5.15v3.65h3.45a1.7 1.7 0 0 0 1.7-1.7V8zm0-2V4.05a1.7 1.7 0 0 0-1.7-1.7h-3.45V6h5.15zM4.533.1h8.9a3.95 3.95 0 0 1 3.95 3.95v5.9a3.95 3.95 0 0 1-3.95 3.95h-8.9a3.95 3.95 0 0 1-3.95-3.95v-5.9A3.95 3.95 0 0 1 4.533.1z"></path></svg>'},function(t,e,o){"use strict";o.r(e);o(5);function i(t){return!(null==t)}function n(t,e=null,o=null,n=null){const r=document.createElement(t);if(i(e))for(let t=0;t<e.length;t++)i(e[t])&&r.classList.add(e[t]);if(i(o))for(let t in o)r.setAttribute(t,o[t]);if(i(n))for(let t=0;t<n.length;t++)i(n[t])&&r.appendChild(n[t]);return r}function r(t){const e=t.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function l(t,e,o){let i;return e-t.x1>=-1&&e-t.x1<=11&&(i="left"),t.x2-e>=-1&&t.x2-e<=11&&(i="right"),o-t.y1>=-1&&o-t.y1<=11&&(i="top"),t.y2-o>=-1&&t.y2-o<=11&&(i="bottom"),i}o(8);var s=o(2),a=o.n(s),c=o(3),h=o.n(c);const d={highlightingLine:"tc-toolbar",hidden:"tc-toolbar--hidden",horizontalToolBar:"tc-toolbar--hor",horizontalHighlightingLine:"tc-toolbar__shine-line--hor",verticalToolBar:"tc-toolbar--ver",verticalHighlightingLine:"tc-toolbar__shine-line--ver",plusButton:"tc-toolbar__plus",toolsButton:"tc-toolbar__tools",horizontalPlusButton:"tc-toolbar__plus--hor",verticalPlusButton:"tc-toolbar__plus--ver",horizontalToolsButton:"tc-toolbar__tools--hor",verticalToolsButton:"tc-toolbar__tools--ver",area:"tc-table__area"};class u{constructor(){this._plusButton=this._generatePlusButton(),this._toolsButton=this._generateToolsButton(),this._highlightingLine=this._generateHighlightingLine(),this._toolbar=this._generateToolBar([this._plusButton,this._toolsButton,this._highlightingLine])}hide(){this._toolbar.classList.add(d.hidden)}show(){this._toolbar.classList.remove(d.hidden),this._highlightingLine.classList.remove(d.hidden)}hideLine(){this._highlightingLine.classList.add(d.hidden)}get htmlElement(){return this._toolbar}_generatePlusButton(){const t=n("div",[d.plusButton]);return t.innerHTML=a.a,t.addEventListener("click",t=>{t.stopPropagation();const e=new CustomEvent("click",{detail:{x:t.pageX,y:t.pageY},bubbles:!0});this._toolbar.dispatchEvent(e)}),t}_generateToolsButton(){const t=n("div",[d.toolsButton]);return t.innerHTML=h.a,t.addEventListener("click",t=>{t.stopPropagation();const e=new CustomEvent("click",{detail:{type:"remove",x:t.pageX,y:t.pageY},bubbles:!0});this._toolbar.dispatchEvent(e)}),t}_generateHighlightingLine(){const t=n("div",[d.highlightingLine]);return t.addEventListener("click",t=>{t.stopPropagation();const e=new CustomEvent("click",{bubbles:!0});this._toolbar.dispatchEvent(e)}),t}_generateToolBar(t){const e=n("div",[d.hidden],null,t);return e.addEventListener("mouseleave",t=>{this._recalcMousePos(t)}),e}_recalcMousePos(t){this.hide();const e=document.elementFromPoint(t.pageX,t.pageY);if(null!==e&&e.classList.contains(d.area)){const o=new MouseEvent("mouseover",{clientX:t.pageX,clientY:t.pageY});e.dispatchEvent(o)}}}class f extends u{constructor(){super(),this._toolbar.classList.add(d.horizontalToolBar),this._plusButton.classList.add(d.horizontalPlusButton),this._toolsButton.classList.add(d.horizontalToolsButton),this._highlightingLine.classList.add(d.horizontalHighlightingLine)}showIn(t){const e=Math.floor(Number.parseInt(window.getComputedStyle(this._toolbar).height)/2);this._toolbar.style.top=t-e+"px",this.show()}}class p extends u{constructor(){super(),this._toolbar.classList.add(d.verticalToolBar),this._plusButton.classList.add(d.verticalPlusButton),this._toolsButton.classList.add(d.verticalToolsButton),this._highlightingLine.classList.add(d.verticalHighlightingLine)}showIn(t){const e=Math.floor(Number.parseInt(window.getComputedStyle(this._toolbar).width)/2);this._toolbar.style.left=t-e+"px",this.show()}}o(10);const _={table:"tc-table",inputField:"tc-table__inp",cell:"tc-table__cell",wrapper:"tc-table__wrap",area:"tc-table__area"};class b{constructor(){this._numberOfColumns=0,this._numberOfRows=0,this._element=this._createTableWrapper(),this._table=this._element.querySelector("table"),this._hangEvents()}addColumn(t=-1){this._numberOfColumns++;const e=this._table.rows;for(let o=0;o<e.length;o++){const i=e[o].insertCell(t);this._fillCell(i)}}removeColumn(t=-1){this._numberOfColumns--;const e=this._table.rows;if(!(1===e[0].children.length||t>=e[0].children.length||t<0))for(let o=0;o<e.length;o++)e[o].deleteCell(t)}addRow(t=-1){this._numberOfRows++;const e=this._table.insertRow(t);return this._fillRow(e),e}removeRow(t=-1){t>=this._numberOfRows||1===this._numberOfRows||t<0||(this._numberOfRows--,this._table.deleteRow(t))}get htmlElement(){return this._element}get body(){return this._table}get selectedCell(){return this._selectedCell}_createTableWrapper(){return n("div",[_.wrapper],null,[n("table",[_.table])])}_createContenteditableArea(){return n("div",[_.inputField],{contenteditable:"true"})}_fillCell(t){t.classList.add(_.cell);const e=this._createContenteditableArea();t.appendChild(n("div",[_.area],null,[e]))}_fillRow(t){for(let e=0;e<this._numberOfColumns;e++){const e=t.insertCell();this._fillCell(e)}}_hangEvents(){this._table.addEventListener("focus",t=>{this._focusEditField(t)},!0),this._table.addEventListener("blur",t=>{this._blurEditField(t)},!0),this._table.addEventListener("keydown",t=>{this._pressedEnterInEditField(t)}),this._table.addEventListener("click",t=>{this._clickedOnCell(t)}),this._table.addEventListener("mouseover",t=>{this._mouseEnterInDetectArea(t),t.stopPropagation()},!0)}_focusEditField(t){t.target.classList.contains(_.inputField)&&(this._selectedCell=t.target.closest("."+_.cell))}_blurEditField(t){t.target.classList.contains(_.inputField)&&(this._selectedCell=null)}_pressedEnterInEditField(t){t.target.classList.contains(_.inputField)&&(13!==t.keyCode||t.shiftKey||t.preventDefault())}_clickedOnCell(t){if(!t.target.classList.contains(_.cell))return;t.target.querySelector("."+_.inputField).focus()}_mouseEnterInDetectArea(t){if(!t.target.classList.contains(_.area))return;const e=l(r(t.target.closest("TD")),t.pageX,t.pageY);t.target.dispatchEvent(new CustomEvent("mouseInActivatingArea",{detail:{side:e},bubbles:!0}))}}o.d(e,"TableConstructor",function(){return g});const v={editor:"tc-editor",toolBarHor:"tc-toolbar--hor",toolBarVer:"tc-toolbar--ver",inputField:"tc-table__inp"};class g{constructor(t,e,o){this._table=new b;const i=this._resizeTable(t,e);this._fillTable(t,i),this._container=n("div",[v.editor,o.styles.block],null,[this._table.htmlElement]),this._verticalToolBar=new p,this._horizontalToolBar=new f,this._table.htmlElement.appendChild(this._horizontalToolBar.htmlElement),this._table.htmlElement.appendChild(this._verticalToolBar.htmlElement),this._hoveredCell=null,this._activatedToolBar=null,this._hoveredCellSide=null,this._plusButDelay=null,this._toolbarShowDelay=null,this._hangEvents()}get htmlElement(){return this._container}_fillTable(t,e){if(void 0!==t.content)for(let o=0;o<e.rows&&o<t.content.length;o++)for(let i=0;i<e.cols&&i<t.content[o].length;i++){this._table.body.rows[o].cells[i].querySelector("."+v.inputField).innerHTML=t.content[o][i]}}_resizeTable(t,e){const o=Array.isArray(t.content),i=!!o&&t.content.length,n=o?t.content.length:void 0,r=i?t.content[0].length:void 0,l=Number.parseInt(e.rows),s=Number.parseInt(e.cols),a=!isNaN(l)&&l>0?l:void 0,c=!isNaN(s)&&s>0?s:void 0,h=n||a||2,d=r||c||2;for(let t=0;t<h;t++)this._table.addRow();for(let t=0;t<d;t++)this._table.addColumn();return{rows:h,cols:d}}_showToolBar(t,e){this._hideToolBar(),this._activatedToolBar=t,t.showIn(e)}_hideToolBar(){null!==this._activatedToolBar&&this._activatedToolBar.hide()}_hangEvents(){this._container.addEventListener("mouseInActivatingArea",t=>{this._toolbarCalling(t)}),this._container.addEventListener("click",t=>{this._clickToolbar(t)}),this._container.addEventListener("input",()=>{this._hideToolBar()}),this._container.addEventListener("keydown",t=>{this._containerKeydown(t)}),this._container.addEventListener("mouseout",t=>{this._leaveDetectArea(t)}),this._container.addEventListener("mouseover",t=>{this._mouseEnterInDetectArea(t)})}_mouseInActivatingAreaListener(t){this._hoveredCellSide=t.detail.side;const e=r(t.target),o=r(this._table.htmlElement);if(this._hoveredCell=t.target.closest("TD"),null===this._hoveredCell){const t=11;this._hoveredCell=this._container,e.x1+=t,e.y1+=t,e.x2-=t,e.y2-=t}"top"===this._hoveredCellSide&&this._showToolBar(this._horizontalToolBar,e.y1-o.y1-2),"bottom"===this._hoveredCellSide&&this._showToolBar(this._horizontalToolBar,e.y2-o.y1-1),"left"===this._hoveredCellSide&&this._showToolBar(this._verticalToolBar,e.x1-o.x1-2),"right"===this._hoveredCellSide&&this._showToolBar(this._verticalToolBar,e.x2-o.x1-1)}_isToolbar(t){return!(!t.closest("."+v.toolBarHor)&&!t.closest("."+v.toolBarVer))}_leaveDetectArea(t){this._isToolbar(t.relatedTarget)||(clearTimeout(this._toolbarShowDelay),this._hideToolBar())}_toolbarCalling(t){this._isToolbar(t.target)||(clearTimeout(this._toolbarShowDelay),this._toolbarShowDelay=setTimeout(()=>{this._mouseInActivatingAreaListener(t)},125))}_clickToolbar(t){if(!this._isToolbar(t.target))return;let e;const o=t.detail&&t.detail.type?t.detail.type:"";if(this._activatedToolBar===this._horizontalToolBar?("remove"===o?this._removeRow():this._addRow(),e="y"):("remove"===o?this._removeColumn():this._addColumn(),e="x"),isNaN(t.detail)&&null!==t.detail){const o=r(this._table.htmlElement);let i;i="x"===e?t.detail.x-o.x1:t.detail.y-o.y1,this._delayAddButtonForMultiClickingNearMouse(i)}else this._hideToolBar()}_containerKeydown(t){13===t.keyCode&&this._containerEnterPressed(t)}_delayAddButtonForMultiClickingNearMouse(t){this._showToolBar(this._activatedToolBar,t),this._activatedToolBar.hideLine(),clearTimeout(this._plusButDelay),this._plusButDelay=setTimeout(()=>{this._hideToolBar()},500)}_getHoveredSideOfContainer(){return this._hoveredCell===this._container?this._isBottomOrRight()?-1:0:1}_isBottomOrRight(){return"bottom"===this._hoveredCellSide||"right"===this._hoveredCellSide}_addRow(){const t=this._hoveredCell.closest("TR");let e=this._getHoveredSideOfContainer();1===e&&(e=t.sectionRowIndex,e+=this._isBottomOrRight()),this._table.addRow(e)}_removeRow(){const t=this._hoveredCell.closest("TR");let e=this._getHoveredSideOfContainer();1===e&&(e=t.sectionRowIndex,e+=this._isBottomOrRight()),this._table.removeRow(e)}_addColumn(){let t=this._getHoveredSideOfContainer();1===t&&(t=this._hoveredCell.cellIndex,t+=this._isBottomOrRight()),this._table.addColumn(t)}_removeColumn(){let t=this._getHoveredSideOfContainer();1===t&&(t=this._hoveredCell.cellIndex,t+=this._isBottomOrRight()),this._table.removeColumn(t)}_containerEnterPressed(t){if(null===this._table.selectedCell||t.shiftKey)return;const e=this._table.selectedCell.closest("TR");let o=this._getHoveredSideOfContainer();1===o&&(o=e.sectionRowIndex+1),this._table.addRow(o).cells[0].click()}_mouseEnterInDetectArea(t){let e=l(r(this._container),t.pageX,t.pageY);t.target.dispatchEvent(new CustomEvent("mouseInActivatingArea",{detail:{side:e},bubbles:!0}))}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UYWJsZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vVGFibGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVGFibGUvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vVGFibGUvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvaW1nL3BsdXMuc3ZnIiwid2VicGFjazovL1RhYmxlLy4vc3JjL2ltZy9jcm9zcy5zdmciLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvcGx1Z2luLmpzIiwid2VicGFjazovL1RhYmxlLy4vc3JjL3N0eWxlcy90YWJsZS1jb25zdHJ1Y3Rvci5wY3NzPzdmNmUiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvc3R5bGVzL3RhYmxlLWNvbnN0cnVjdG9yLnBjc3MiLCJ3ZWJwYWNrOi8vVGFibGUvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzIiwid2VicGFjazovL1RhYmxlLy4vc3JjL3N0eWxlcy9ib3JkZXItdG9vbGJhci5wY3NzPzlhNjQiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvc3R5bGVzL2JvcmRlci10b29sYmFyLnBjc3MiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvc3R5bGVzL3RhYmxlLnBjc3M/YWYwMSIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy9zdHlsZXMvdGFibGUucGNzcyIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy9pbWcvdG9vbGJveEljb24uc3ZnIiwid2VicGFjazovL1RhYmxlLy4vc3JjL2RvY3VtZW50VXRpbHMuanMiLCJ3ZWJwYWNrOi8vVGFibGUvLi9zcmMvYm9yZGVyVG9vbEJhci5qcyIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy90YWJsZS5qcyIsIndlYnBhY2s6Ly9UYWJsZS8uL3NyYy90YWJsZUNvbnN0cnVjdG9yLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNvbnRlbnQiLCJjc3NNYXBwaW5nIiwiYnRvYSIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VNYXAiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjb25jYXQiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJwdXNoIiwiZm4iLCJtZW1vIiwic3R5bGVzSW5Eb20iLCJpc09sZElFIiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnZXRFbGVtZW50IiwidGFyZ2V0IiwicGFyZW50Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJhdHRycyIsInR5cGUiLCJub25jZSIsIm5jIiwiZ2V0Tm9uY2UiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJ0cmFuc2Zvcm0iLCJkZWZhdWx0Iiwic3R5bGVJbmRleCIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwibGluayIsInJlbCIsImNyZWF0ZUxpbmtFbGVtZW50IiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwiaHJlZiIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiY3NzTm9kZSIsImNoaWxkTm9kZXMiLCJUYWJsZUNvbnN0cnVjdG9yIiwic3ZnSWNvbiIsIkNTUyIsImlucHV0IiwiZW5hYmxlTGluZUJyZWFrcyIsInRvb2xib3giLCJpY29uIiwidGl0bGUiLCJbb2JqZWN0IE9iamVjdF0iLCJkYXRhIiwiY29uZmlnIiwiYXBpIiwiX3RhYmxlQ29uc3RydWN0b3IiLCJodG1sRWxlbWVudCIsInRvb2xzQ29udGVudCIsInJvd3MiLCJyb3ciLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJjZWxscyIsImNlbGwiLCJldmVyeSIsIl9pc0VtcHR5IiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJ0cmltIiwiaG1yIiwibG9jYWxzIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCIkMSIsInRlc3QiLCJfaXNOb3RNaXNzZWQiLCJlbGVtIiwidGFnTmFtZSIsImNzc0NsYXNzZXMiLCJjaGlsZHJlbiIsImNsYXNzTGlzdCIsImFkZCIsImdldENvb3JkcyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ5MSIsIk1hdGgiLCJmbG9vciIsInRvcCIsInBhZ2VZT2Zmc2V0IiwieDEiLCJsZWZ0IiwicGFnZVhPZmZzZXQiLCJ4MiIsInJpZ2h0IiwieTIiLCJib3R0b20iLCJnZXRTaWRlQnlDb29yZHMiLCJjb29yZHMiLCJ4IiwieSIsInNpZGUiLCJzaXplQXJlYSIsImhpZ2hsaWdodGluZ0xpbmUiLCJoaWRkZW4iLCJob3Jpem9udGFsVG9vbEJhciIsImhvcml6b250YWxIaWdobGlnaHRpbmdMaW5lIiwidmVydGljYWxUb29sQmFyIiwidmVydGljYWxIaWdobGlnaHRpbmdMaW5lIiwicGx1c0J1dHRvbiIsInRvb2xzQnV0dG9uIiwiaG9yaXpvbnRhbFBsdXNCdXR0b24iLCJ2ZXJ0aWNhbFBsdXNCdXR0b24iLCJob3Jpem9udGFsVG9vbHNCdXR0b24iLCJ2ZXJ0aWNhbFRvb2xzQnV0dG9uIiwiYXJlYSIsImJvcmRlclRvb2xCYXJfQm9yZGVyVG9vbEJhciIsIl9wbHVzQnV0dG9uIiwiX2dlbmVyYXRlUGx1c0J1dHRvbiIsIl90b29sc0J1dHRvbiIsIl9nZW5lcmF0ZVRvb2xzQnV0dG9uIiwiX2hpZ2hsaWdodGluZ0xpbmUiLCJfZ2VuZXJhdGVIaWdobGlnaHRpbmdMaW5lIiwiX3Rvb2xiYXIiLCJfZ2VuZXJhdGVUb29sQmFyIiwiYnV0dG9uIiwicGx1c19kZWZhdWx0IiwiYSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwicGFnZVgiLCJwYWdlWSIsImJ1YmJsZXMiLCJkaXNwYXRjaEV2ZW50IiwiY3Jvc3NfZGVmYXVsdCIsImxpbmUiLCJiYXIiLCJfcmVjYWxjTW91c2VQb3MiLCJoaWRlIiwiZWxlbWVudEZyb21Qb2ludCIsImNvbnRhaW5zIiwiTW91c2VFdmVudCIsImNsaWVudFgiLCJjbGllbnRZIiwiSG9yaXpvbnRhbEJvcmRlclRvb2xCYXIiLCJzdXBlciIsImhhbGZIZWlnaHQiLCJOdW1iZXIiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJoZWlnaHQiLCJzaG93IiwiVmVydGljYWxCb3JkZXJUb29sQmFyIiwiaGFsZldpZHRoIiwid2lkdGgiLCJ0YWJsZV9DU1MiLCJ0YWJsZSIsImlucHV0RmllbGQiLCJ3cmFwcGVyIiwidGFibGVfVGFibGUiLCJfbnVtYmVyT2ZDb2x1bW5zIiwiX251bWJlck9mUm93cyIsIl9lbGVtZW50IiwiX2NyZWF0ZVRhYmxlV3JhcHBlciIsIl90YWJsZSIsIl9oYW5nRXZlbnRzIiwiaW5zZXJ0Q2VsbCIsIl9maWxsQ2VsbCIsImRlbGV0ZUNlbGwiLCJpbnNlcnRSb3ciLCJfZmlsbFJvdyIsImRlbGV0ZVJvdyIsImJvZHkiLCJzZWxlY3RlZENlbGwiLCJfc2VsZWN0ZWRDZWxsIiwiY29udGVudGVkaXRhYmxlIiwiX2NyZWF0ZUNvbnRlbnRlZGl0YWJsZUFyZWEiLCJfZm9jdXNFZGl0RmllbGQiLCJfYmx1ckVkaXRGaWVsZCIsIl9wcmVzc2VkRW50ZXJJbkVkaXRGaWVsZCIsIl9jbGlja2VkT25DZWxsIiwiX21vdXNlRW50ZXJJbkRldGVjdEFyZWEiLCJjbG9zZXN0Iiwia2V5Q29kZSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJmb2N1cyIsIl9fd2VicGFja19leHBvcnRzX18iLCJ0YWJsZUNvbnN0cnVjdG9yX1RhYmxlQ29uc3RydWN0b3IiLCJ0YWJsZUNvbnN0cnVjdG9yX0NTUyIsImVkaXRvciIsInRvb2xCYXJIb3IiLCJ0b29sQmFyVmVyIiwic2l6ZSIsIl9yZXNpemVUYWJsZSIsIl9maWxsVGFibGUiLCJfY29udGFpbmVyIiwiYmxvY2siLCJfdmVydGljYWxUb29sQmFyIiwiX2hvcml6b250YWxUb29sQmFyIiwiX2hvdmVyZWRDZWxsIiwiX2FjdGl2YXRlZFRvb2xCYXIiLCJfaG92ZXJlZENlbGxTaWRlIiwiX3BsdXNCdXREZWxheSIsIl90b29sYmFyU2hvd0RlbGF5IiwiY29scyIsImlzVmFsaWRBcnJheSIsImlzQXJyYXkiLCJpc05vdEVtcHR5QXJyYXkiLCJjb250ZW50Um93cyIsImNvbnRlbnRDb2xzIiwicGFyc2VkUm93cyIsInBhcnNlZENvbHMiLCJjb25maWdSb3dzIiwiaXNOYU4iLCJjb25maWdDb2xzIiwiYWRkUm93IiwiYWRkQ29sdW1uIiwidG9vbEJhciIsImNvb3JkIiwiX2hpZGVUb29sQmFyIiwic2hvd0luIiwiX3Rvb2xiYXJDYWxsaW5nIiwiX2NsaWNrVG9vbGJhciIsIl9jb250YWluZXJLZXlkb3duIiwiX2xlYXZlRGV0ZWN0QXJlYSIsImFyZWFDb29yZHMiLCJjb250YWluZXJDb29yZHMiLCJwYWRkaW5nQ29udGFpbmVyIiwiX3Nob3dUb29sQmFyIiwiX2lzVG9vbGJhciIsInJlbGF0ZWRUYXJnZXQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiX21vdXNlSW5BY3RpdmF0aW5nQXJlYUxpc3RlbmVyIiwidHlwZUNvb3JkIiwiX3JlbW92ZVJvdyIsIl9hZGRSb3ciLCJfcmVtb3ZlQ29sdW1uIiwiX2FkZENvbHVtbiIsIl9kZWxheUFkZEJ1dHRvbkZvck11bHRpQ2xpY2tpbmdOZWFyTW91c2UiLCJfY29udGFpbmVyRW50ZXJQcmVzc2VkIiwiaGlkZUxpbmUiLCJfaXNCb3R0b21PclJpZ2h0IiwiaW5kaWNhdGl2ZVJvdyIsIl9nZXRIb3ZlcmVkU2lkZU9mQ29udGFpbmVyIiwic2VjdGlvblJvd0luZGV4IiwicmVtb3ZlUm93IiwiY2VsbEluZGV4IiwicmVtb3ZlQ29sdW1uIiwiY2xpY2siXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELE9BQUEsR0FBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxNQUFBRCxJQUVBRCxFQUFBLE1BQUFDLElBUkEsQ0FTQ0ssT0FBQSxXQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVAsUUFHQSxJQUFBQyxFQUFBSSxFQUFBRSxHQUFBLENBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVQsUUFBQSxJQVVBLE9BTkFVLEVBQUFILEdBQUFJLEtBQUFWLEVBQUFELFFBQUFDLElBQUFELFFBQUFNLEdBR0FMLEVBQUFRLEdBQUEsRUFHQVIsRUFBQUQsUUEwREEsT0FyREFNLEVBQUFNLEVBQUFGLEVBR0FKLEVBQUFPLEVBQUFSLEVBR0FDLEVBQUFRLEVBQUEsU0FBQWQsRUFBQWUsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWpCLEVBQUFlLElBQ0FHLE9BQUFDLGVBQUFuQixFQUFBZSxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDVixFQUFBZ0Is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QW9WLDZCQUVBLElBQUE3TixJQUNBQSxFQUFBdkgsS0FBQXVTLGFBQUFnRCxVQUVBaE8sR0FBQXZILEtBQUFrVixvQkFHQWxWLEtBQUFtUSxPQUFBcUQsVUFBQWpNLEdBUUFjLGdCQUNBLElBQUFkLEVBQUF2SCxLQUFBb1YsNkJBRUEsSUFBQTdOLElBQ0FBLEVBQUF2SCxLQUFBdVMsYUFBQWdELFVBRUFoTyxHQUFBdkgsS0FBQWtWLG9CQUdBbFYsS0FBQW1RLE9BQUFxRixhQUFBak8sR0FTQWMsdUJBQUF3RixHQUNBLFVBQUE3TixLQUFBbVEsT0FBQVMsY0FBQS9DLEVBQUEwRCxTQUNBLE9BRUEsTUFBQTRELEVBQUFuVixLQUFBbVEsT0FBQVMsYUFBQVMsUUFBQSxNQUNBLElBQUE5SixFQUFBdkgsS0FBQW9WLDZCQUVBLElBQUE3TixJQUNBQSxFQUFBNE4sRUFBQUUsZ0JBQUEsR0FFQXJWLEtBQUFtUSxPQUFBb0QsT0FBQWhNLEdBRUEwQixNQUFBLEdBQUF3TSxRQVNBcE4sd0JBQUF3RixHQUVBLElBQUE1QixFQUFlSixFQURJZixFQUFTOUssS0FBQW1TLFlBQ0V0RSxFQUFBSSxNQUFBSixFQUFBSyxPQUU5QkwsRUFBQTNMLE9BQUFrTSxjQUFBLElBQUFMLFlBQUEseUJBQ0FDLE9BQUEsQ0FDQS9CLFFBRUFrQyxTQUFBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlRhYmxlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlRhYmxlXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgcGFyZW50KSB7XG4gIGlmIChwYXJlbnQpe1xuICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xuICB9XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG59O1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24odGFyZ2V0LCBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXNzaW5nIGZ1bmN0aW9uIGluIG9wdGlvbnMsIHRoZW4gdXNlIGl0IGZvciByZXNvbHZlIFwiaGVhZFwiIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgLy8gVXNlZnVsIGZvciBTaGFkb3cgUm9vdCBzdHlsZSBpLmVcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBpbnNlcnRJbnRvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvb1wiKS5zaGFkb3dSb290IH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdHZhciBzdHlsZVRhcmdldCA9IGdldFRhcmdldC5jYWxsKHRoaXMsIHRhcmdldCwgcGFyZW50KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUsIHRhcmdldCk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0aWYob3B0aW9ucy5hdHRycy5ub25jZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIG5vbmNlID0gZ2V0Tm9uY2UoKTtcblx0XHRpZiAobm9uY2UpIHtcblx0XHRcdG9wdGlvbnMuYXR0cnMubm9uY2UgPSBub25jZTtcblx0XHR9XG5cdH1cblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBnZXROb25jZSgpIHtcblx0aWYgKHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdHJldHVybiBfX3dlYnBhY2tfbm9uY2VfXztcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSB0eXBlb2Ygb3B0aW9ucy50cmFuc2Zvcm0gPT09ICdmdW5jdGlvbidcblx0XHQgPyBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKSBcblx0XHQgOiBvcHRpb25zLnRyYW5zZm9ybS5kZWZhdWx0KG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48Y2lyY2xlIGN4PVxcXCIxMFxcXCIgY3k9XFxcIjEwXFxcIiByPVxcXCIxMFxcXCIgZmlsbD1cXFwiIzM4OEFFNVxcXCI+PC9jaXJjbGU+PHBhdGggZmlsbD1cXFwiI0ZGRlxcXCIgZD1cXFwiTTEwLjkgOS4xaDMuN2EuOS45IDAgMSAxIDAgMS44aC0zLjd2My43YS45LjkgMCAxIDEtMS44IDB2LTMuN0g1LjRhLjkuOSAwIDAgMSAwLTEuOGgzLjdWNS40YS45LjkgMCAwIDEgMS44IDB2My43elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB3aWR0aD1cXFwiMjBcXFwiIGhlaWdodD1cXFwiMjBcXFwiIHZpZXdCb3g9XFxcIjQ3MCAyNzAgMjAgMjBcXFwiPjxwYXRoIGZpbGw9XFxcIiNFMjM5NTJcXFwiIGQ9XFxcIk00ODAgMjcwYzUuNTI3IDAgMTAgNC40NzggMTAgMTAgMCA1LjUyNy00LjQ3MyAxMC0xMCAxMC01LjUyMiAwLTEwLTQuNDczLTEwLTEwIDAtNS41MjIgNC40NzgtMTAgMTAtMTB6XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiI0ZGRlxcXCIgZD1cXFwiTTQ4MS4yNzQgMjgwbDIuNjEyIDIuNjE3Yy4zNTIuMzUyLjM1Mi45MTggMCAxLjI3cy0uOTE4LjM1Mi0xLjI3IDBMNDgwIDI4MS4yNzRsLTIuNjE3IDIuNjEyYy0uMzUyLjM1Mi0uOTE4LjM1Mi0xLjI3IDBzLS4zNTItLjkxOCAwLTEuMjdsMi42MTItMi42MTctMi42MTItMi42MTdjLS4zNTItLjM1Mi0uMzUyLS45MTggMC0xLjI3cy45MTgtLjM1MiAxLjI3IDBsMi42MTcgMi42MTIgMi42MTctMi42MTJjLjM1Mi0uMzUyLjkxOC0uMzUyIDEuMjcgMHMuMzUyLjkxOCAwIDEuMjdMNDgxLjI3NCAyODB6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJjb25zdCBUYWJsZUNvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi90YWJsZUNvbnN0cnVjdG9yJykuVGFibGVDb25zdHJ1Y3RvcjtcbmNvbnN0IHN2Z0ljb24gPSByZXF1aXJlKCcuL2ltZy90b29sYm94SWNvbi5zdmcnKTtcblxuY29uc3QgQ1NTID0ge1xuICBpbnB1dDogJ3RjLXRhYmxlX19pbnAnXG59O1xuXG4vKipcbiAqICBUb29sIGZvciB0YWJsZSdzIGNyZWF0aW5nXG4gKiAgQHR5cGVkZWYge29iamVjdH0gVGFibGVEYXRhIC0gb2JqZWN0IHdpdGggdGhlIGRhdGEgdHJhbnNmZXJyZWQgdG8gZm9ybSBhIHRhYmxlXG4gKiAgQHByb3BlcnR5IHtzdHJpbmdbXVtdfSBjb250ZW50IC0gdHdvLWRpbWVuc2lvbmFsIGFycmF5IHdoaWNoIGNvbnRhaW5zIHRhYmxlIGNvbnRlbnRcbiAqL1xuY2xhc3MgVGFibGUge1xuICAvKipcbiAgICogQWxsb3cgdG8gcHJlc3MgRW50ZXIgaW5zaWRlIHRoZSBDb2RlVG9vbCB0ZXh0YXJlYVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIGdldCBlbmFibGVMaW5lQnJlYWtzKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBUb29sIHRvb2xib3ggc2V0dGluZ3NcbiAgICogaWNvbiAtIFRvb2wgaWNvbidzIFNWR1xuICAgKiB0aXRsZSAtIHRpdGxlIHRvIHNob3cgaW4gdG9vbGJveFxuICAgKlxuICAgKiBAcmV0dXJuIHt7aWNvbjogc3RyaW5nLCB0aXRsZTogc3RyaW5nfX1cbiAgICovXG4gIHN0YXRpYyBnZXQgdG9vbGJveCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWNvbjogc3ZnSWNvbixcbiAgICAgIHRpdGxlOiAnVGFibGUnXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgcGx1Z2luYHMgbWFpbiBFbGVtZW50IGFuZCBmaWxsIGl0IHdpdGggc2F2ZWQgZGF0YVxuICAgKiBAcGFyYW0ge1RhYmxlRGF0YX0gZGF0YSDigJQgcHJldmlvdXNseSBzYXZlZCBkYXRhXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSB1c2VyIGNvbmZpZyBmb3IgVG9vbFxuICAgKiBAcGFyYW0ge29iamVjdH0gYXBpIC0gRWRpdG9yLmpzIEFQSVxuICAgKi9cbiAgY29uc3RydWN0b3Ioe2RhdGEsIGNvbmZpZywgYXBpfSkge1xuICAgIHRoaXMuYXBpID0gYXBpO1xuXG4gICAgdGhpcy5fdGFibGVDb25zdHJ1Y3RvciA9IG5ldyBUYWJsZUNvbnN0cnVjdG9yKGRhdGEsIGNvbmZpZywgYXBpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gVG9vbCdzIHZpZXdcbiAgICogQHJldHVybnMge0hUTUxEaXZFbGVtZW50fVxuICAgKiBAcHVibGljXG4gICAqL1xuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhYmxlQ29uc3RydWN0b3IuaHRtbEVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBUb29sJ3MgZGF0YSBmcm9tIHRoZSB2aWV3XG4gICAqIEByZXR1cm5zIHtUYWJsZURhdGF9IC0gc2F2ZWQgZGF0YVxuICAgKiBAcHVibGljXG4gICAqL1xuICBzYXZlKHRvb2xzQ29udGVudCkge1xuICAgIGNvbnN0IHRhYmxlID0gdG9vbHNDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7XG4gICAgY29uc3QgZGF0YSA9IFtdO1xuICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5yb3dzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgICAgY29uc3QgY29scyA9IEFycmF5LmZyb20ocm93LmNlbGxzKTtcbiAgICAgIGNvbnN0IGlucHV0cyA9IGNvbHMubWFwKGNlbGwgPT4gY2VsbC5xdWVyeVNlbGVjdG9yKCcuJyArIENTUy5pbnB1dCkpO1xuICAgICAgY29uc3QgaXNXb3J0aGxlc3MgPSBpbnB1dHMuZXZlcnkodGhpcy5faXNFbXB0eSk7XG5cbiAgICAgIGlmIChpc1dvcnRobGVzcykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGRhdGEucHVzaChpbnB1dHMubWFwKGlucHV0ID0+IGlucHV0LmlubmVySFRNTCkpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50OiBkYXRhXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBDaGVjayBpbnB1dCBmaWVsZCBpcyBlbXB0eVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBpbnB1dCAtIGlucHV0IGZpZWxkXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBfaXNFbXB0eShpbnB1dCkge1xuICAgIHJldHVybiAhaW5wdXQudGV4dENvbnRlbnQudHJpbSgpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGFibGU7XG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcyEuL3RhYmxlLWNvbnN0cnVjdG9yLnBjc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi90YWJsZS1jb25zdHJ1Y3Rvci5wY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcyEuL3RhYmxlLWNvbnN0cnVjdG9yLnBjc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi50Yy1lZGl0b3J7cGFkZGluZzoxMHB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JveC1zaXppbmc6Y29udGVudC1ib3g7d2lkdGg6MTAwJTtsZWZ0Oi0xMHB4fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi9ib3JkZXItdG9vbGJhci5wY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4vYm9yZGVyLXRvb2xiYXIucGNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi9ib3JkZXItdG9vbGJhci5wY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudGMtdG9vbGJhcntiYWNrZ3JvdW5kOiMzNjhiZTY7fS50Yy10b29sYmFyLS1oaWRkZW57dmlzaWJpbGl0eTpoaWRkZW59LnRjLXRvb2xiYXItLWhvcnt3aWR0aDoxMDAlO2hlaWdodDoyMXB4O2ZsZXgtZGlyZWN0aW9uOnJvdztsZWZ0OjA7dG9wOjFweH0udGMtdG9vbGJhci0taG9yLC50Yy10b29sYmFyLS12ZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwMH0udGMtdG9vbGJhci0tdmVye2hlaWdodDoxMDAlO3dpZHRoOjIxcHg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3RvcDowO2xlZnQ6LTFweH0udGMtdG9vbGJhcl9fcGx1cy0taG9ye21hcmdpbi1sZWZ0Oi0xMHB4fS50Yy10b29sYmFyX19wbHVzLS12ZXJ7bWFyZ2luLXRvcDotMTBweH0udGMtdG9vbGJhcl9fcGx1cywudGMtdG9vbGJhcl9fdG9vbHN7aGVpZ2h0OjIxcHg7d2lkdGg6MjFweDttYXJnaW4tdG9wOjA7Y3Vyc29yOnBvaW50ZXJ9LnRjLXRvb2xiYXJfX3Rvb2xzLS1ob3J7bWFyZ2luLWxlZnQ6MnB4fS50Yy10b29sYmFyX190b29scy0tdmVye21hcmdpbi10b3A6MnB4fS50Yy10b29sYmFyX19zaGluZS1saW5lLS1ob3J7bWluLWhlaWdodDoxcHg7d2lkdGg6MTAwJX0udGMtdG9vbGJhcl9fc2hpbmUtbGluZS0tdmVye21pbi13aWR0aDoxcHg7aGVpZ2h0OjEwMCV9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi90YWJsZS5wY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4vdGFibGUucGNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi90YWJsZS5wY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudGMtdGFibGV7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7dGFibGUtbGF5b3V0OmZpeGVkO30udGMtdGFibGVfX3dyYXB7Ym9yZGVyOjFweCBzb2xpZCAjZGJkYmUyO2JvcmRlci1yYWRpdXM6M3B4O3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94fS50Yy10YWJsZV9fY2VsbHtib3JkZXI6MXB4IHNvbGlkICNkYmRiZTI7cGFkZGluZzowO3ZlcnRpY2FsLWFsaWduOnRvcH0udGMtdGFibGVfX2FyZWF7cGFkZGluZzoxMHB4O2hlaWdodDoxMDAlfS50Yy10YWJsZV9faW5we291dGxpbmU6bm9uZTtmbGV4LWdyb3c6MTAwO21pbi1oZWlnaHQ6MS41ZW07aGVpZ2h0OjEwMCU7b3ZlcmZsb3c6aGlkZGVufS50Yy10YWJsZSB0Ym9keSB0cjpmaXJzdC1jaGlsZCB0ZHtib3JkZXItdG9wOm5vbmV9LnRjLXRhYmxlIHRib2R5IHRyOmxhc3QtY2hpbGQgdGR7Ym9yZGVyLWJvdHRvbTpub25lfS50Yy10YWJsZSB0Ym9keSB0ciB0ZDpsYXN0LWNoaWxke2JvcmRlci1yaWdodDpub25lfS50Yy10YWJsZSB0Ym9keSB0ciB0ZDpmaXJzdC1jaGlsZHtib3JkZXItbGVmdDpub25lfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHdpZHRoPVxcXCIxOFxcXCIgaGVpZ2h0PVxcXCIxNFxcXCI+PHBhdGggZD1cXFwiTTIuODMzIDh2MS45NWExLjcgMS43IDAgMCAwIDEuNyAxLjdoMy40NVY4aC01LjE1em0wLTJoNS4xNVYyLjM1aC0zLjQ1YTEuNyAxLjcgMCAwIDAtMS43IDEuN1Y2em0xMi4zIDJoLTUuMTV2My42NWgzLjQ1YTEuNyAxLjcgMCAwIDAgMS43LTEuN1Y4em0wLTJWNC4wNWExLjcgMS43IDAgMCAwLTEuNy0xLjdoLTMuNDVWNmg1LjE1ek00LjUzMy4xaDguOWEzLjk1IDMuOTUgMCAwIDEgMy45NSAzLjk1djUuOWEzLjk1IDMuOTUgMCAwIDEtMy45NSAzLjk1aC04LjlhMy45NSAzLjk1IDAgMCAxLTMuOTUtMy45NXYtNS45QTMuOTUgMy45NSAwIDAgMSA0LjUzMy4xelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiLyoqXG4gKiBDaGVja3MgdGhlIGl0ZW0gaXMgbm90IG1pc3NlZCBvciBtZXNzZWRcbiAqIEBwYXJhbSB7b2JqZWN0fHN0cmluZ1tdfEVsZW1lbnRbXXxIVE1MRWxlbWVudHxzdHJpbmd9IGVsZW0gLSBlbGVtZW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBlbGVtZW50IGlzIGNvcnJlY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9pc05vdE1pc3NlZChlbGVtKSB7XG4gIHJldHVybiAoIShlbGVtID09PSB1bmRlZmluZWQgfHwgZWxlbSA9PT0gbnVsbCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBET00gZWxlbWVudCB3aXRoIHNldCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZSAtIEh0bWwgdGFnIG9mIHRoZSBlbGVtZW50IHRvIGJlIGNyZWF0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nW119IGNzc0NsYXNzZXMgLSBDc3MgY2xhc3NlcyB0aGF0IG11c3QgYmUgYXBwbGllZCB0byBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge29iamVjdH0gYXR0cnMgLSBBdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnRbXX0gY2hpbGRyZW4gLSBjaGlsZCBlbGVtZW50cyBvZiBjcmVhdGluZyBlbGVtZW50XG4gKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHRoZSBuZXcgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKHRhZ05hbWUsIGNzc0NsYXNzZXMgPSBudWxsLCBhdHRycyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCkge1xuICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblxuICBpZiAoX2lzTm90TWlzc2VkKGNzc0NsYXNzZXMpKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjc3NDbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoX2lzTm90TWlzc2VkKGNzc0NsYXNzZXNbaV0pKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChjc3NDbGFzc2VzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKF9pc05vdE1pc3NlZChhdHRycykpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG4gICAgfVxuICB9XG4gIGlmIChfaXNOb3RNaXNzZWQoY2hpbGRyZW4pKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKF9pc05vdE1pc3NlZChjaGlsZHJlbltpXSkpIHtcbiAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjaGlsZHJlbltpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBlbGVtO1xufVxuXG4vKipcbiAqIEdldCBpdGVtIHBvc2l0aW9uIHJlbGF0aXZlIHRvIGRvY3VtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtIC0gaXRlbVxuICogQHJldHVybnMge3t4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyfX0gY29vcmRpbmF0ZXMgb2YgdGhlIHVwcGVyIGxlZnQgKHgxLHkxKSBhbmQgbG93ZXIgcmlnaHQoeDIseTIpIGNvcm5lcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3JkcyhlbGVtKSB7XG4gIGNvbnN0IHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gIHJldHVybiB7XG4gICAgeTE6IE1hdGguZmxvb3IocmVjdC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQpLFxuICAgIHgxOiBNYXRoLmZsb29yKHJlY3QubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCksXG4gICAgeDI6IE1hdGguZmxvb3IocmVjdC5yaWdodCArIHdpbmRvdy5wYWdlWE9mZnNldCksXG4gICAgeTI6IE1hdGguZmxvb3IocmVjdC5ib3R0b20gKyB3aW5kb3cucGFnZVlPZmZzZXQpXG4gIH07XG59XG5cbi8qKlxuICogUmVjb2duaXplcyB3aGljaCBzaWRlIG9mIHRoZSBjb250YWluZXIgIGlzIGNsb3NlciB0byAoeCx5KVxuICogQHBhcmFtIHt7eDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcn19IGNvb3JkcyAtIGNvb3JkcyBvZiBjb250YWluZXJcbiAqIEBwYXJhbSB4IC0geCBjb29yZFxuICogQHBhcmFtIHkgLSB5IGNvb3JkXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaWRlQnlDb29yZHMoY29vcmRzLCB4LCB5KSB7XG4gIGxldCBzaWRlO1xuICBjb25zdCBzaXplQXJlYSA9IDEwO1xuXG4gIC8vIGEgcG9pbnQgaXMgY2xvc2UgdG8gdGhlIGJvdW5kYXJ5IGlmIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZW0gaXMgbGVzcyB0aGFuIHRoZSBhbGxvd2VkIGRpc3RhbmNlLlxuICAvLyArMXB4IG9uIGVhY2ggc2lkZSBkdWUgdG8gZnJhY3Rpb25hbCBwaXhlbHNcbiAgaWYgKHggLSBjb29yZHMueDEgPj0gLTEgJiYgeCAtIGNvb3Jkcy54MSA8PSBzaXplQXJlYSArIDEpIHtcbiAgICBzaWRlID0gJ2xlZnQnO1xuICB9XG4gIGlmIChjb29yZHMueDIgLSB4ID49IC0xICYmIGNvb3Jkcy54MiAtIHggPD0gc2l6ZUFyZWEgKyAxKSB7XG4gICAgc2lkZSA9ICdyaWdodCc7XG4gIH1cbiAgaWYgKHkgLSBjb29yZHMueTEgPj0gLTEgJiYgeSAtIGNvb3Jkcy55MSA8PSBzaXplQXJlYSArIDEpIHtcbiAgICBzaWRlID0gJ3RvcCc7XG4gIH1cbiAgaWYgKGNvb3Jkcy55MiAtIHkgPj0gLTEgJiYgY29vcmRzLnkyIC0geSA8PSBzaXplQXJlYSArIDEpIHtcbiAgICBzaWRlID0gJ2JvdHRvbSc7XG4gIH1cblxuICByZXR1cm4gc2lkZTtcbn1cbiIsImltcG9ydCAnLi9zdHlsZXMvYm9yZGVyLXRvb2xiYXIucGNzcyc7XG5pbXBvcnQgc3ZnUGx1c0J1dHRvbiBmcm9tICcuL2ltZy9wbHVzLnN2Zyc7XG5pbXBvcnQgc3ZnQ3Jvc3NCdXR0b24gZnJvbSAnLi9pbWcvY3Jvc3Muc3ZnJztcbmltcG9ydCB7Y3JlYXRlfSBmcm9tICcuL2RvY3VtZW50VXRpbHMnO1xuXG5jb25zdCBDU1MgPSB7XG4gIGhpZ2hsaWdodGluZ0xpbmU6ICd0Yy10b29sYmFyJyxcbiAgaGlkZGVuOiAndGMtdG9vbGJhci0taGlkZGVuJyxcbiAgaG9yaXpvbnRhbFRvb2xCYXI6ICd0Yy10b29sYmFyLS1ob3InLFxuICBob3Jpem9udGFsSGlnaGxpZ2h0aW5nTGluZTogJ3RjLXRvb2xiYXJfX3NoaW5lLWxpbmUtLWhvcicsXG4gIHZlcnRpY2FsVG9vbEJhcjogJ3RjLXRvb2xiYXItLXZlcicsXG4gIHZlcnRpY2FsSGlnaGxpZ2h0aW5nTGluZTogJ3RjLXRvb2xiYXJfX3NoaW5lLWxpbmUtLXZlcicsXG4gIHBsdXNCdXR0b246ICd0Yy10b29sYmFyX19wbHVzJyxcbiAgdG9vbHNCdXR0b246ICd0Yy10b29sYmFyX190b29scycsXG4gIGhvcml6b250YWxQbHVzQnV0dG9uOiAndGMtdG9vbGJhcl9fcGx1cy0taG9yJyxcbiAgdmVydGljYWxQbHVzQnV0dG9uOiAndGMtdG9vbGJhcl9fcGx1cy0tdmVyJyxcbiAgaG9yaXpvbnRhbFRvb2xzQnV0dG9uOiAndGMtdG9vbGJhcl9fdG9vbHMtLWhvcicsXG4gIHZlcnRpY2FsVG9vbHNCdXR0b246ICd0Yy10b29sYmFyX190b29scy0tdmVyJyxcbiAgYXJlYTogJ3RjLXRhYmxlX19hcmVhJ1xufTtcblxuLyoqXG4gKiBBbiBpdGVtIHdpdGggYSBtZW51IHRoYXQgYXBwZWFycyB3aGVuIHlvdSBob3ZlciBvdmVyIGEgX3RhYmxlIGJvcmRlclxuICovXG5jbGFzcyBCb3JkZXJUb29sQmFyIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fcGx1c0J1dHRvbiA9IHRoaXMuX2dlbmVyYXRlUGx1c0J1dHRvbigpO1xuICAgIHRoaXMuX3Rvb2xzQnV0dG9uID0gdGhpcy5fZ2VuZXJhdGVUb29sc0J1dHRvbigpO1xuICAgIHRoaXMuX2hpZ2hsaWdodGluZ0xpbmUgPSB0aGlzLl9nZW5lcmF0ZUhpZ2hsaWdodGluZ0xpbmUoKTtcbiAgICB0aGlzLl90b29sYmFyID0gdGhpcy5fZ2VuZXJhdGVUb29sQmFyKFt0aGlzLl9wbHVzQnV0dG9uLCB0aGlzLl90b29sc0J1dHRvbiwgdGhpcy5faGlnaGxpZ2h0aW5nTGluZV0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhlIGVudGlyZSBpdGVtIGludmlzaWJsZVxuICAgKi9cbiAgaGlkZSgpIHtcbiAgICB0aGlzLl90b29sYmFyLmNsYXNzTGlzdC5hZGQoQ1NTLmhpZGRlbik7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSB0aGUgZW50aXJlIGl0ZW0gdmlzaWJsZVxuICAgKi9cbiAgc2hvdygpIHtcbiAgICB0aGlzLl90b29sYmFyLmNsYXNzTGlzdC5yZW1vdmUoQ1NTLmhpZGRlbik7XG4gICAgdGhpcy5faGlnaGxpZ2h0aW5nTGluZS5jbGFzc0xpc3QucmVtb3ZlKENTUy5oaWRkZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIaWRlIG9ubHkgaGlnaGxpZ2h0aW5nTGluZVxuICAgKi9cbiAgaGlkZUxpbmUoKSB7XG4gICAgdGhpcy5faGlnaGxpZ2h0aW5nTGluZS5jbGFzc0xpc3QuYWRkKENTUy5oaWRkZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiByZXR1cm5zIEhUTUxFbGVtZW50IGZvciBpbnNlcnQgaW4gRE9NXG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIGdldCBodG1sRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdG9vbGJhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBtZW51IGJ1dHRvbiB0byBhZGQgcm93cyBhbmQgY29sdW1ucy5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBfZ2VuZXJhdGVQbHVzQnV0dG9uKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZSgnZGl2JywgWyBDU1MucGx1c0J1dHRvbiBdKTtcblxuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBzdmdQbHVzQnV0dG9uO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCBlID0gbmV3IEN1c3RvbUV2ZW50KCdjbGljaycsIHsnZGV0YWlsJzogeyd4JzogZXZlbnQucGFnZVgsICd5JzogZXZlbnQucGFnZVl9LCAnYnViYmxlcyc6IHRydWV9KTtcblxuICAgICAgdGhpcy5fdG9vbGJhci5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBidXR0b247XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgdG9vbCBidXR0b24gdG8gZWRpdCByb3dzIGFuZCBjb2x1bW5zLlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIF9nZW5lcmF0ZVRvb2xzQnV0dG9uKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZSgnZGl2JywgWyBDU1MudG9vbHNCdXR0b24gXSk7XG5cbiAgICBidXR0b24uaW5uZXJIVE1MID0gc3ZnQ3Jvc3NCdXR0b247XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGNvbnN0IGUgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NsaWNrJywgeydkZXRhaWwnOiB7J3R5cGUnOiAncmVtb3ZlJywgJ3gnOiBldmVudC5wYWdlWCwgJ3knOiBldmVudC5wYWdlWX0sICdidWJibGVzJzogdHJ1ZX0pO1xuXG4gICAgICB0aGlzLl90b29sYmFyLmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGJ1dHRvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBHZW5lcmF0ZXMgbGluZSB3aGljaCDRgW92ZXIgYm9yZGVyIG9mIF90YWJsZVxuICAgKi9cbiAgX2dlbmVyYXRlSGlnaGxpZ2h0aW5nTGluZSgpIHtcbiAgICBjb25zdCBsaW5lID0gY3JlYXRlKCdkaXYnLCBbQ1NTLmhpZ2hsaWdodGluZ0xpbmVdKTtcblxuICAgIGxpbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgZSA9IG5ldyBDdXN0b21FdmVudCgnY2xpY2snLCB7J2J1YmJsZXMnOiB0cnVlfSk7XG5cbiAgICAgIHRoaXMuX3Rvb2xiYXIuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbGluZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBHZW5lcmF0ZXMgdGhlIG1haW4gY29tcG9uZW50IG9mIHRoZSBjbGFzc1xuICAgKiBAcGFyYW0ge0VsZW1lbnRbXX0gY2hpbGRyZW4gLSBjaGlsZCBlbGVtZW50cyBvZiB0b29sYmFyXG4gICAqL1xuICBfZ2VuZXJhdGVUb29sQmFyKGNoaWxkcmVuKSB7XG4gICAgY29uc3QgYmFyID0gY3JlYXRlKCdkaXYnLCBbQ1NTLmhpZGRlbl0sIG51bGwsIGNoaWxkcmVuKTtcblxuICAgIGJhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuX3JlY2FsY01vdXNlUG9zKGV2ZW50KTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIGJhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBSZWNhbGMgbW91c2UgcG9zaXRpb24gd2hlbiB0aGUgbW91c2UgbGVmdCB0b29sYmFyXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAgICovXG4gIF9yZWNhbGNNb3VzZVBvcyhldmVudCkge1xuICAgIHRoaXMuaGlkZSgpO1xuICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSk7XG5cbiAgICBpZiAoYXJlYSAhPT0gbnVsbCAmJiBhcmVhLmNsYXNzTGlzdC5jb250YWlucyhDU1MuYXJlYSkpIHtcbiAgICAgIGNvbnN0IGUgPSBuZXcgTW91c2VFdmVudCgnbW91c2VvdmVyJywge2NsaWVudFg6IGV2ZW50LnBhZ2VYLCBjbGllbnRZOiBldmVudC5wYWdlWX0pO1xuICAgICAgYXJlYS5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFuIGl0ZW0gd2l0aCBhIG1lbnUgdGhhdCBhcHBlYXJzIHdoZW4geW91IGhvdmVyIG92ZXIgYSBfdGFibGUgYm9yZGVyIGhvcml6b250YWxseVxuICovXG5leHBvcnQgY2xhc3MgSG9yaXpvbnRhbEJvcmRlclRvb2xCYXIgZXh0ZW5kcyBCb3JkZXJUb29sQmFyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl90b29sYmFyLmNsYXNzTGlzdC5hZGQoQ1NTLmhvcml6b250YWxUb29sQmFyKTtcbiAgICB0aGlzLl9wbHVzQnV0dG9uLmNsYXNzTGlzdC5hZGQoQ1NTLmhvcml6b250YWxQbHVzQnV0dG9uKTtcbiAgICB0aGlzLl90b29sc0J1dHRvbi5jbGFzc0xpc3QuYWRkKENTUy5ob3Jpem9udGFsVG9vbHNCdXR0b24pO1xuICAgIHRoaXMuX2hpZ2hsaWdodGluZ0xpbmUuY2xhc3NMaXN0LmFkZChDU1MuaG9yaXpvbnRhbEhpZ2hsaWdodGluZ0xpbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgVG9vbEJhciB0byB5IGNvb3JkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gY29vcmRcbiAgICovXG4gIHNob3dJbih5KSB7XG4gICAgY29uc3QgaGFsZkhlaWdodCA9IE1hdGguZmxvb3IoTnVtYmVyLnBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rvb2xiYXIpLmhlaWdodCkgLyAyKTtcblxuICAgIHRoaXMuX3Rvb2xiYXIuc3R5bGUudG9wID0gKHkgLSBoYWxmSGVpZ2h0KSArICdweCc7XG4gICAgdGhpcy5zaG93KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBpdGVtIHdpdGggYSBtZW51IHRoYXQgYXBwZWFycyB3aGVuIHlvdSBob3ZlciBvdmVyIGEgX3RhYmxlIGJvcmRlciB2ZXJ0aWNhbGx5XG4gKi9cbmV4cG9ydCBjbGFzcyBWZXJ0aWNhbEJvcmRlclRvb2xCYXIgZXh0ZW5kcyBCb3JkZXJUb29sQmFyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl90b29sYmFyLmNsYXNzTGlzdC5hZGQoQ1NTLnZlcnRpY2FsVG9vbEJhcik7XG4gICAgdGhpcy5fcGx1c0J1dHRvbi5jbGFzc0xpc3QuYWRkKENTUy52ZXJ0aWNhbFBsdXNCdXR0b24pO1xuICAgIHRoaXMuX3Rvb2xzQnV0dG9uLmNsYXNzTGlzdC5hZGQoQ1NTLnZlcnRpY2FsVG9vbHNCdXR0b24pO1xuICAgIHRoaXMuX2hpZ2hsaWdodGluZ0xpbmUuY2xhc3NMaXN0LmFkZChDU1MudmVydGljYWxIaWdobGlnaHRpbmdMaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIFRvb2xCYXIgdG8geCBjb29yZFxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIGNvb3JkXG4gICAqL1xuICBzaG93SW4oeCkge1xuICAgIGNvbnN0IGhhbGZXaWR0aCA9IE1hdGguZmxvb3IoTnVtYmVyLnBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rvb2xiYXIpLndpZHRoKSAvIDIpO1xuXG4gICAgdGhpcy5fdG9vbGJhci5zdHlsZS5sZWZ0ID0gKHggLSBoYWxmV2lkdGgpICsgJ3B4JztcbiAgICB0aGlzLnNob3coKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtjcmVhdGUsIGdldENvb3JkcywgZ2V0U2lkZUJ5Q29vcmRzfSBmcm9tICcuL2RvY3VtZW50VXRpbHMnO1xuaW1wb3J0ICcuL3N0eWxlcy90YWJsZS5wY3NzJztcblxuY29uc3QgQ1NTID0ge1xuICB0YWJsZTogJ3RjLXRhYmxlJyxcbiAgaW5wdXRGaWVsZDogJ3RjLXRhYmxlX19pbnAnLFxuICBjZWxsOiAndGMtdGFibGVfX2NlbGwnLFxuICB3cmFwcGVyOiAndGMtdGFibGVfX3dyYXAnLFxuICBhcmVhOiAndGMtdGFibGVfX2FyZWEnLFxufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIG1hbmFnZXMgX3RhYmxlIGNvbnRlbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVGFibGUge1xuICAvKipcbiAgICogQ3JlYXRlc1xuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fbnVtYmVyT2ZDb2x1bW5zID0gMDtcbiAgICB0aGlzLl9udW1iZXJPZlJvd3MgPSAwO1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9jcmVhdGVUYWJsZVdyYXBwZXIoKTtcbiAgICB0aGlzLl90YWJsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUnKTtcblxuICAgIHRoaXMuX2hhbmdFdmVudHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgY29sdW1uIGluIHRhYmxlIG9uIGluZGV4IHBsYWNlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIG51bWJlciBpbiB0aGUgYXJyYXkgb2YgY29sdW1ucywgd2hlcmUgbmV3IGNvbHVtbiB0byBpbnNlcnQsLTEgaWYgaW5zZXJ0IGF0IHRoZSBlbmRcbiAgICovXG4gIGFkZENvbHVtbihpbmRleCA9IC0xKSB7XG4gICAgdGhpcy5fbnVtYmVyT2ZDb2x1bW5zKys7XG4gICAgLyoqIEFkZCBjZWxsIGluIGVhY2ggcm93ICovXG4gICAgY29uc3Qgcm93cyA9IHRoaXMuX3RhYmxlLnJvd3M7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNlbGwgPSByb3dzW2ldLmluc2VydENlbGwoaW5kZXgpO1xuXG4gICAgICB0aGlzLl9maWxsQ2VsbChjZWxsKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBjb2x1bW4gaW4gdGFibGUgb24gaW5kZXggcGxhY2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gbnVtYmVyIGluIHRoZSBhcnJheSBvZiBjb2x1bW5zLCB3aGVyZSBuZXcgY29sdW1uIHRvIGluc2VydCwtMSBpZiBpbnNlcnQgYXQgdGhlIGVuZFxuICAgKi9cbiAgcmVtb3ZlQ29sdW1uKGluZGV4ID0gLTEpIHtcbiAgICB0aGlzLl9udW1iZXJPZkNvbHVtbnMtLTtcbiAgICAvKiogUmVtb3ZlIGNlbGwgaW4gZWFjaCByb3cgKi9cbiAgICBjb25zdCByb3dzID0gdGhpcy5fdGFibGUucm93cztcblxuICAgIGlmIChyb3dzWzBdLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSB8fFxuICAgICAgaW5kZXggPj0gcm93c1swXS5jaGlsZHJlbi5sZW5ndGggfHxcbiAgICAgIGluZGV4IDwgMFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgcm93c1tpXS5kZWxldGVDZWxsKGluZGV4KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCByb3cgaW4gdGFibGUgb24gaW5kZXggcGxhY2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gbnVtYmVyIGluIHRoZSBhcnJheSBvZiBjb2x1bW5zLCB3aGVyZSBuZXcgY29sdW1uIHRvIGluc2VydCwtMSBpZiBpbnNlcnQgYXQgdGhlIGVuZFxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gcm93XG4gICAqL1xuICBhZGRSb3coaW5kZXggPSAtMSkge1xuICAgIHRoaXMuX251bWJlck9mUm93cysrO1xuICAgIGNvbnN0IHJvdyA9IHRoaXMuX3RhYmxlLmluc2VydFJvdyhpbmRleCk7XG5cbiAgICB0aGlzLl9maWxsUm93KHJvdyk7XG4gICAgcmV0dXJuIHJvdztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHJvdyBpbiB0YWJsZSBvbiBpbmRleCBwbGFjZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBudW1iZXIgaW4gdGhlIGFycmF5IG9mIGNvbHVtbnMsIHdoZXJlIG5ldyBjb2x1bW4gdG8gaW5zZXJ0LC0xIGlmIGluc2VydCBhdCB0aGUgZW5kXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSByb3dcbiAgICovXG4gIHJlbW92ZVJvdyhpbmRleCA9IC0xKSB7XG4gICAgaWYgKFxuICAgICAgaW5kZXggPj0gdGhpcy5fbnVtYmVyT2ZSb3dzIHx8XG4gICAgICB0aGlzLl9udW1iZXJPZlJvd3MgPT09IDEgfHxcbiAgICAgIGluZGV4IDwgMFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX251bWJlck9mUm93cy0tO1xuICAgIHRoaXMuX3RhYmxlLmRlbGV0ZVJvdyhpbmRleCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIGdldCBodG1sIGVsZW1lbnQgb2YgdGFibGVcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBnZXQgaHRtbEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogZ2V0IHJlYWwgdGFibGUgdGFnXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgZ2V0IGJvZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhYmxlO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgc2VsZWN0ZWQvZWRpdGFibGUgY2VsbFxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIGdldCBzZWxlY3RlZENlbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkQ2VsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBDcmVhdGVzIHRhYmxlIHN0cnVjdHVyZVxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gdGJvZHkgLSB3aGVyZSByb3dzIHdpbGwgYmVcbiAgICovXG4gIF9jcmVhdGVUYWJsZVdyYXBwZXIoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZSgnZGl2JywgW0NTUy53cmFwcGVyXSwgbnVsbCwgW2NyZWF0ZSgndGFibGUnLCBbQ1NTLnRhYmxlXSldKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBDcmVhdGUgZWRpdGFibGUgYXJlYSBvZiBjZWxsXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSAtIHRoZSBhcmVhXG4gICAqL1xuICBfY3JlYXRlQ29udGVudGVkaXRhYmxlQXJlYSgpIHtcbiAgICByZXR1cm4gY3JlYXRlKCdkaXYnLCBbQ1NTLmlucHV0RmllbGRdLCB7Y29udGVudGVkaXRhYmxlOiAndHJ1ZSd9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBGaWxscyB0aGUgZW1wdHkgY2VsbCBvZiB0aGUgZWRpdGFibGUgYXJlYVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjZWxsIC0gZW1wdHkgY2VsbFxuICAgKi9cbiAgX2ZpbGxDZWxsKGNlbGwpIHtcbiAgICBjZWxsLmNsYXNzTGlzdC5hZGQoQ1NTLmNlbGwpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9jcmVhdGVDb250ZW50ZWRpdGFibGVBcmVhKCk7XG5cbiAgICBjZWxsLmFwcGVuZENoaWxkKGNyZWF0ZSgnZGl2JywgW0NTUy5hcmVhXSwgbnVsbCwgW2NvbnRlbnRdKSk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogRmlsbHMgdGhlIGVtcHR5IHJvdyB3aXRoIGNlbGxzICBpbiB0aGUgc2l6ZSBvZiBudW1iZXJPZkNvbHVtbnNcbiAgICogQHBhcmFtIHJvdyA9IHRoZSBlbXB0eSByb3dcbiAgICovXG4gIF9maWxsUm93KHJvdykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbnVtYmVyT2ZDb2x1bW5zOyBpKyspIHtcbiAgICAgIGNvbnN0IGNlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuXG4gICAgICB0aGlzLl9maWxsQ2VsbChjZWxsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogaGFuZyBuZWNlc3NhcnkgZXZlbnRzXG4gICAqL1xuICBfaGFuZ0V2ZW50cygpIHtcbiAgICB0aGlzLl90YWJsZS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5fZm9jdXNFZGl0RmllbGQoZXZlbnQpO1xuICAgIH0sIHRydWUpO1xuXG4gICAgdGhpcy5fdGFibGUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5fYmx1ckVkaXRGaWVsZChldmVudCk7XG4gICAgfSwgdHJ1ZSk7XG5cbiAgICB0aGlzLl90YWJsZS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9wcmVzc2VkRW50ZXJJbkVkaXRGaWVsZChldmVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl90YWJsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5fY2xpY2tlZE9uQ2VsbChldmVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl90YWJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX21vdXNlRW50ZXJJbkRldGVjdEFyZWEoZXZlbnQpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogV2hlbiB5b3UgZm9jdXMgb24gYW4gZWRpdGFibGUgZmllbGQsIHJlbWVtYmVycyB0aGUgY2VsbFxuICAgKiBAcGFyYW0ge0ZvY3VzRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfZm9jdXNFZGl0RmllbGQoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTLmlucHV0RmllbGQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3NlbGVjdGVkQ2VsbCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuJyArIENTUy5jZWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBXaGVuIHlvdSBibHVyIG9uIGFuIGVkaXRhYmxlIGZpZWxkLCByZW1lbWJlcnMgdGhlIGNlbGxcbiAgICogQHBhcmFtIHtGb2N1c0V2ZW50fSBldmVudFxuICAgKi9cbiAgX2JsdXJFZGl0RmllbGQoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTLmlucHV0RmllbGQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3NlbGVjdGVkQ2VsbCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogV2hlbiBlbnRlciBpcyBwcmVzc2VkIHdoZW4gZWRpdGluZyBhIGZpZWxkXG4gICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcbiAgICovXG4gIF9wcmVzc2VkRW50ZXJJbkVkaXRGaWVsZChldmVudCkge1xuICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhDU1MuaW5wdXRGaWVsZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzICYmICFldmVudC5zaGlmdEtleSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogV2hlbiBjbGlja2luZyBvbiBhIGNlbGxcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudFxuICAgKi9cbiAgX2NsaWNrZWRPbkNlbGwoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTLmNlbGwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignLicgKyBDU1MuaW5wdXRGaWVsZCk7XG4gICAgY29udGVudC5mb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFdoZW4gdGhlIG1vdXNlIGVudGVycyB0aGUgZGV0ZWN0aW9uIGFyZWFcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudFxuICAgKi9cbiAgX21vdXNlRW50ZXJJbkRldGVjdEFyZWEoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoQ1NTLmFyZWEpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29vcmRzQ2VsbCA9IGdldENvb3JkcyhldmVudC50YXJnZXQuY2xvc2VzdCgnVEQnKSk7XG4gICAgY29uc3Qgc2lkZSA9IGdldFNpZGVCeUNvb3Jkcyhjb29yZHNDZWxsLCBldmVudC5wYWdlWCwgZXZlbnQucGFnZVkpO1xuXG4gICAgZXZlbnQudGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdtb3VzZUluQWN0aXZhdGluZ0FyZWEnLCB7XG4gICAgICAnZGV0YWlsJzoge1xuICAgICAgICAnc2lkZSc6IHNpZGVcbiAgICAgIH0sXG4gICAgICAnYnViYmxlcyc6IHRydWVcbiAgICB9KSk7XG4gIH1cbn1cbiIsImltcG9ydCAnLi9zdHlsZXMvdGFibGUtY29uc3RydWN0b3IucGNzcyc7XG5pbXBvcnQge2NyZWF0ZSwgZ2V0Q29vcmRzLCBnZXRTaWRlQnlDb29yZHN9IGZyb20gJy4vZG9jdW1lbnRVdGlscyc7XG5pbXBvcnQge0hvcml6b250YWxCb3JkZXJUb29sQmFyLCBWZXJ0aWNhbEJvcmRlclRvb2xCYXJ9IGZyb20gJy4vYm9yZGVyVG9vbEJhcic7XG5pbXBvcnQge1RhYmxlfSBmcm9tICcuL3RhYmxlJztcblxuY29uc3QgQ1NTID0ge1xuICBlZGl0b3I6ICd0Yy1lZGl0b3InLFxuICB0b29sQmFySG9yOiAndGMtdG9vbGJhci0taG9yJyxcbiAgdG9vbEJhclZlcjogJ3RjLXRvb2xiYXItLXZlcicsXG4gIGlucHV0RmllbGQ6ICd0Yy10YWJsZV9faW5wJ1xufTtcblxuLyoqXG4gKiBFbnRyeSBwb2ludC4gQ29udHJvbHMgdGFibGUgYW5kIGdpdmUgQVBJIHRvIHVzZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFRhYmxlQ29uc3RydWN0b3Ige1xuICAvKipcbiAgICogQ3JlYXRlc1xuICAgKiBAcGFyYW0ge1RhYmxlRGF0YX0gZGF0YSAtIHByZXZpb3VzbHkgc2F2ZWQgZGF0YSBmb3IgaW5zZXJ0IGluIHRhYmxlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSBjb25maWd1cmF0aW9uIG9mIHRhYmxlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhcGkgLSBFZGl0b3IuanMgQVBJXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjb25maWcsIGFwaSkge1xuICAgIC8qKiBjcmVhdGluZyB0YWJsZSAqL1xuICAgIHRoaXMuX3RhYmxlID0gbmV3IFRhYmxlKCk7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuX3Jlc2l6ZVRhYmxlKGRhdGEsIGNvbmZpZyk7XG5cbiAgICB0aGlzLl9maWxsVGFibGUoZGF0YSwgc2l6ZSk7XG5cbiAgICAvKiogY3JlYXRpbmcgY29udGFpbmVyIGFyb3VuZCB0YWJsZSAqL1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNyZWF0ZSgnZGl2JywgW0NTUy5lZGl0b3IsIGFwaS5zdHlsZXMuYmxvY2tdLCBudWxsLCBbdGhpcy5fdGFibGUuaHRtbEVsZW1lbnRdKTtcblxuICAgIC8qKiBjcmVhdGluZyBUb29sQmFycyAqL1xuICAgIHRoaXMuX3ZlcnRpY2FsVG9vbEJhciA9IG5ldyBWZXJ0aWNhbEJvcmRlclRvb2xCYXIoKTtcbiAgICB0aGlzLl9ob3Jpem9udGFsVG9vbEJhciA9IG5ldyBIb3Jpem9udGFsQm9yZGVyVG9vbEJhcigpO1xuICAgIHRoaXMuX3RhYmxlLmh0bWxFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2hvcml6b250YWxUb29sQmFyLmh0bWxFbGVtZW50KTtcbiAgICB0aGlzLl90YWJsZS5odG1sRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl92ZXJ0aWNhbFRvb2xCYXIuaHRtbEVsZW1lbnQpO1xuXG4gICAgLyoqIEFjdGl2YXRlZCBlbGVtZW50cyAqL1xuICAgIHRoaXMuX2hvdmVyZWRDZWxsID0gbnVsbDtcbiAgICB0aGlzLl9hY3RpdmF0ZWRUb29sQmFyID0gbnVsbDtcbiAgICB0aGlzLl9ob3ZlcmVkQ2VsbFNpZGUgPSBudWxsO1xuXG4gICAgLyoqIFRpbWVycyAqL1xuICAgIHRoaXMuX3BsdXNCdXREZWxheSA9IG51bGw7XG4gICAgdGhpcy5fdG9vbGJhclNob3dEZWxheSA9IG51bGw7XG5cbiAgICB0aGlzLl9oYW5nRXZlbnRzKCk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyBodG1sIGVsZW1lbnQgb2YgVGFibGVDb25zdHJ1Y3RvcjtcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBnZXQgaHRtbEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiAgRmlsbCB0YWJsZSBkYXRhIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtUYWJsZURhdGF9IGRhdGEgLSBkYXRhIGZvciBpbnNlcnQgaW4gdGFibGVcbiAgICogQHBhcmFtIHt7cm93czogbnVtYmVyLCBjb2xzOiBudW1iZXJ9fSBzaXplIC0gY29udGFpbnMgbnVtYmVyIG9mIHJvd3MgYW5kIGNvbHNcbiAgICovXG4gIF9maWxsVGFibGUoZGF0YSwgc2l6ZSkge1xuICAgIGlmIChkYXRhLmNvbnRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplLnJvd3MgJiYgaSA8IGRhdGEuY29udGVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemUuY29scyAmJiBqIDwgZGF0YS5jb250ZW50W2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgY2VsbCBhbmQgaGVyIGVkaXRhYmxlIHBhcnRcbiAgICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuX3RhYmxlLmJvZHkucm93c1tpXS5jZWxsc1tqXS5xdWVyeVNlbGVjdG9yKCcuJyArIENTUy5pbnB1dEZpZWxkKTtcblxuICAgICAgICAgIGlucHV0LmlubmVySFRNTCA9IGRhdGEuY29udGVudFtpXVtqXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiByZXNpemUgdG8gbWF0Y2ggY29uZmlnIG9yIHRyYW5zbWl0dGVkIGRhdGFcbiAgICogQHBhcmFtIHtUYWJsZURhdGF9IGRhdGEgLSBkYXRhIGZvciBpbnNlcnRpbmcgdG8gdGhlIHRhYmxlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgLSBjb25maWd1cmF0aW9uIG9mIHRhYmxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gY29uZmlnLnJvd3MgLSBudW1iZXIgb2Ygcm93cyBpbiBjb25maWd1cmF0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gY29uZmlnLmNvbHMgLSBudW1iZXIgb2YgY29scyBpbiBjb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm4ge3tyb3dzOiBudW1iZXIsIGNvbHM6IG51bWJlcn19IC0gbnVtYmVyIG9mIGNvbHMgYW5kIHJvd3NcbiAgICovXG4gIF9yZXNpemVUYWJsZShkYXRhLCBjb25maWcpIHtcbiAgICBjb25zdCBpc1ZhbGlkQXJyYXkgPSBBcnJheS5pc0FycmF5KGRhdGEuY29udGVudCk7XG4gICAgY29uc3QgaXNOb3RFbXB0eUFycmF5ID0gaXNWYWxpZEFycmF5ID8gZGF0YS5jb250ZW50Lmxlbmd0aCA6IGZhbHNlO1xuICAgIGNvbnN0IGNvbnRlbnRSb3dzID0gaXNWYWxpZEFycmF5ID8gZGF0YS5jb250ZW50Lmxlbmd0aCA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjb250ZW50Q29scyA9IGlzTm90RW1wdHlBcnJheSA/IGRhdGEuY29udGVudFswXS5sZW5ndGggOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgcGFyc2VkUm93cyA9IE51bWJlci5wYXJzZUludChjb25maWcucm93cyk7XG4gICAgY29uc3QgcGFyc2VkQ29scyA9IE51bWJlci5wYXJzZUludChjb25maWcuY29scyk7XG4gICAgLy8gdmFsdWUgb2YgY29uZmlnIGhhdmUgdG8gYmUgcG9zaXRpdmUgbnVtYmVyXG4gICAgY29uc3QgY29uZmlnUm93cyA9ICFpc05hTihwYXJzZWRSb3dzKSAmJiBwYXJzZWRSb3dzID4gMCA/IHBhcnNlZFJvd3MgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgY29uZmlnQ29scyA9ICFpc05hTihwYXJzZWRDb2xzKSAmJiBwYXJzZWRDb2xzID4gMCA/IHBhcnNlZENvbHMgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZGVmYXVsdFJvd3MgPSAyO1xuICAgIGNvbnN0IGRlZmF1bHRDb2xzID0gMjtcbiAgICBjb25zdCByb3dzID0gY29udGVudFJvd3MgfHwgY29uZmlnUm93cyB8fCBkZWZhdWx0Um93cztcbiAgICBjb25zdCBjb2xzID0gY29udGVudENvbHMgfHwgY29uZmlnQ29scyB8fCBkZWZhdWx0Q29scztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czsgaSsrKSB7XG4gICAgICB0aGlzLl90YWJsZS5hZGRSb3coKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xzOyBpKyspIHtcbiAgICAgIHRoaXMuX3RhYmxlLmFkZENvbHVtbigpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByb3dzOiByb3dzLFxuICAgICAgY29sczogY29sc1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogU2hvdyBUb29sQmFyXG4gICAqIEBwYXJhbSB7Qm9yZGVyVG9vbEJhcn0gdG9vbEJhciAtIHdoaWNoIHRvb2xiYXIgdG8gc2hvd1xuICAgKiBAcGFyYW0ge251bWJlcn0gY29vcmQgLSB3aGVyZSBzaG93LiB4IG9yIHkgZGVwZW5kaW5nIG9uIHRoZSBncmFkZSBvZiB0aGUgdG9vbGJhclxuICAgKi9cbiAgX3Nob3dUb29sQmFyKHRvb2xCYXIsIGNvb3JkKSB7XG4gICAgdGhpcy5faGlkZVRvb2xCYXIoKTtcbiAgICB0aGlzLl9hY3RpdmF0ZWRUb29sQmFyID0gdG9vbEJhcjtcbiAgICB0b29sQmFyLnNob3dJbihjb29yZCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogSGlkZSBhbGwgb2YgdG9vbGJhcnNcbiAgICovXG4gIF9oaWRlVG9vbEJhcigpIHtcbiAgICBpZiAodGhpcy5fYWN0aXZhdGVkVG9vbEJhciAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5fYWN0aXZhdGVkVG9vbEJhci5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIGhhbmcgbmVjZXNzYXJ5IGV2ZW50c1xuICAgKi9cbiAgX2hhbmdFdmVudHMoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlSW5BY3RpdmF0aW5nQXJlYScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5fdG9vbGJhckNhbGxpbmcoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9jbGlja1Rvb2xiYXIoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgdGhpcy5faGlkZVRvb2xCYXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9jb250YWluZXJLZXlkb3duKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5fbGVhdmVEZXRlY3RBcmVhKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX21vdXNlRW50ZXJJbkRldGVjdEFyZWEoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIGRldGVjdHMgYSBtb3VzZWVudGVyIG9uIGEgc3BlY2lhbCBhcmVhXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAgICovXG4gIF9tb3VzZUluQWN0aXZhdGluZ0FyZWFMaXN0ZW5lcihldmVudCkge1xuICAgIHRoaXMuX2hvdmVyZWRDZWxsU2lkZSA9IGV2ZW50LmRldGFpbC5zaWRlO1xuICAgIGNvbnN0IGFyZWFDb29yZHMgPSBnZXRDb29yZHMoZXZlbnQudGFyZ2V0KTtcbiAgICBjb25zdCBjb250YWluZXJDb29yZHMgPSBnZXRDb29yZHModGhpcy5fdGFibGUuaHRtbEVsZW1lbnQpO1xuXG4gICAgdGhpcy5faG92ZXJlZENlbGwgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnVEQnKTtcblxuICAgIGlmICh0aGlzLl9ob3ZlcmVkQ2VsbCA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgcGFkZGluZ0NvbnRhaW5lciA9IDExO1xuXG4gICAgICB0aGlzLl9ob3ZlcmVkQ2VsbCA9IHRoaXMuX2NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueDEgKz0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueTEgKz0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueDIgLT0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICAgIGFyZWFDb29yZHMueTIgLT0gcGFkZGluZ0NvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faG92ZXJlZENlbGxTaWRlID09PSAndG9wJykge1xuICAgICAgdGhpcy5fc2hvd1Rvb2xCYXIodGhpcy5faG9yaXpvbnRhbFRvb2xCYXIsIGFyZWFDb29yZHMueTEgLSBjb250YWluZXJDb29yZHMueTEgLSAyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2hvdmVyZWRDZWxsU2lkZSA9PT0gJ2JvdHRvbScpIHtcbiAgICAgIHRoaXMuX3Nob3dUb29sQmFyKHRoaXMuX2hvcml6b250YWxUb29sQmFyLCBhcmVhQ29vcmRzLnkyIC0gY29udGFpbmVyQ29vcmRzLnkxIC0gMSk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9ob3ZlcmVkQ2VsbFNpZGUgPT09ICdsZWZ0Jykge1xuICAgICAgdGhpcy5fc2hvd1Rvb2xCYXIodGhpcy5fdmVydGljYWxUb29sQmFyLCBhcmVhQ29vcmRzLngxIC0gY29udGFpbmVyQ29vcmRzLngxIC0gMik7XG4gICAgfVxuICAgIGlmICh0aGlzLl9ob3ZlcmVkQ2VsbFNpZGUgPT09ICdyaWdodCcpIHtcbiAgICAgIHRoaXMuX3Nob3dUb29sQmFyKHRoaXMuX3ZlcnRpY2FsVG9vbEJhciwgYXJlYUNvb3Jkcy54MiAtIGNvbnRhaW5lckNvb3Jkcy54MSAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBDaGVja3MgZWxlbSBpcyB0b29sYmFyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0gLSBlbGVtZW50XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBfaXNUb29sYmFyKGVsZW0pIHtcbiAgICByZXR1cm4gISEoZWxlbS5jbG9zZXN0KCcuJyArIENTUy50b29sQmFySG9yKSB8fCBlbGVtLmNsb3Nlc3QoJy4nICsgQ1NTLnRvb2xCYXJWZXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBIaWRlIHRvb2xiYXIsIGlmIG1vdXNlIGxlZnQgYXJlYVxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfbGVhdmVEZXRlY3RBcmVhKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2lzVG9vbGJhcihldmVudC5yZWxhdGVkVGFyZ2V0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQodGhpcy5fdG9vbGJhclNob3dEZWxheSk7XG4gICAgdGhpcy5faGlkZVRvb2xCYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBTaG93IHRvb2xiYXIgd2hlbiBtb3VzZSBpbiBhY3RpdmF0aW9uIGFyZWFcbiAgICogU2hvd2luZ1xuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfdG9vbGJhckNhbGxpbmcoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5faXNUb29sYmFyKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Rvb2xiYXJTaG93RGVsYXkpO1xuICAgIHRoaXMuX3Rvb2xiYXJTaG93RGVsYXkgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX21vdXNlSW5BY3RpdmF0aW5nQXJlYUxpc3RlbmVyKGV2ZW50KTtcbiAgICB9LCAxMjUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIGhhbmRsaW5nIGNsaWNrcyBvbiB0b29sYmFyc1xuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfY2xpY2tUb29sYmFyKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLl9pc1Rvb2xiYXIoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdHlwZUNvb3JkO1xuXG4gICAgY29uc3QgdHlwZSA9IGV2ZW50LmRldGFpbCAmJiBldmVudC5kZXRhaWwudHlwZSA/IGV2ZW50LmRldGFpbC50eXBlIDogJydcblxuICAgIGlmICh0aGlzLl9hY3RpdmF0ZWRUb29sQmFyID09PSB0aGlzLl9ob3Jpem9udGFsVG9vbEJhcikge1xuICAgICAgaWYgKHR5cGUgPT09ICdyZW1vdmUnKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZVJvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkUm93KCk7XG4gICAgICB9XG4gICAgICB0eXBlQ29vcmQgPSAneSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlID09PSAncmVtb3ZlJykge1xuICAgICAgICB0aGlzLl9yZW1vdmVDb2x1bW4oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FkZENvbHVtbigpO1xuICAgICAgfVxuICAgICAgdHlwZUNvb3JkID0gJ3gnO1xuICAgIH1cbiAgICAvKiogSWYgZXZlbnQgaGFzIHRyYW5zbWl0dGVkIGRhdGEgKGNvb3JkcyBvZiBtb3VzZSkgKi9cbiAgICBjb25zdCBkZXRhaWxIYXNEYXRhID0gaXNOYU4oZXZlbnQuZGV0YWlsKSAmJiBldmVudC5kZXRhaWwgIT09IG51bGw7XG5cbiAgICBpZiAoZGV0YWlsSGFzRGF0YSkge1xuICAgICAgY29uc3QgY29udGFpbmVyQ29vcmRzID0gZ2V0Q29vcmRzKHRoaXMuX3RhYmxlLmh0bWxFbGVtZW50KTtcbiAgICAgIGxldCBjb29yZDtcblxuICAgICAgaWYgKHR5cGVDb29yZCA9PT0gJ3gnKSB7XG4gICAgICAgIGNvb3JkID0gZXZlbnQuZGV0YWlsLnggLSBjb250YWluZXJDb29yZHMueDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb29yZCA9IGV2ZW50LmRldGFpbC55IC0gY29udGFpbmVyQ29vcmRzLnkxO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGVsYXlBZGRCdXR0b25Gb3JNdWx0aUNsaWNraW5nTmVhck1vdXNlKGNvb3JkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZVRvb2xCYXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogZGV0ZWN0cyBidXR0b24gcHJlc3NlcyB3aGVuIGVkaXRpbmcgYSB0YWJsZSdzIGNvbnRlbnRcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudFxuICAgKi9cbiAgX2NvbnRhaW5lcktleWRvd24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lckVudGVyUHJlc3NlZChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIExlYXZlcyB0aGUgUGx1c0J1dHRvbiBhY3RpdmUgdW5kZXIgbW91c2VcbiAgICogVGhlIHRpbWVyIGdpdmVzIHRpbWUgdG8gcHJlc3MgdGhlIGJ1dHRvbiBhZ2FpbiwgYmVmb3JlIGl0IGRpc2FwcGVhcnMuXG4gICAqIFdoaWxlIHRoZSBidXR0b24gaXMgYmVpbmcgcHJlc3NlZCwgdGhlIHRpbWVyIHdpbGwgYmUgcmVzZXRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvb3JkIC0gY29vcmRzIG9mIG1vdXNlLiB4IG9yIHkgZGVwZW5kaW5nIG9uIHRoZSBncmFkZSBvZiB0aGUgdG9vbGJhclxuICAgKi9cbiAgX2RlbGF5QWRkQnV0dG9uRm9yTXVsdGlDbGlja2luZ05lYXJNb3VzZShjb29yZCkge1xuICAgIHRoaXMuX3Nob3dUb29sQmFyKHRoaXMuX2FjdGl2YXRlZFRvb2xCYXIsIGNvb3JkKTtcbiAgICB0aGlzLl9hY3RpdmF0ZWRUb29sQmFyLmhpZGVMaW5lKCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX3BsdXNCdXREZWxheSk7XG4gICAgdGhpcy5fcGx1c0J1dERlbGF5ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9oaWRlVG9vbEJhcigpO1xuICAgIH0sIDUwMCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQ2hlY2sgaWYgdGhlIGFkZGl0aW9uIGlzIGluaXRpYXRlZCBieSB0aGUgY29udGFpbmVyIGFuZCB3aGljaCBzaWRlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gLTEgZm9yIGxlZnQgb3IgdG9wOyAwIGZvciBib3R0b20gb3IgcmlnaHQ7IDEgaWYgbm90IGNvbnRhaW5lclxuICAgKi9cbiAgX2dldEhvdmVyZWRTaWRlT2ZDb250YWluZXIoKSB7XG4gICAgaWYgKHRoaXMuX2hvdmVyZWRDZWxsID09PSB0aGlzLl9jb250YWluZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pc0JvdHRvbU9yUmlnaHQoKSA/IC0xIDogMDtcbiAgICB9XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogY2hlY2sgaWYgaG92ZXJlZCBjZWxsIHNpZGUgaXMgYm90dG9tIG9yIHJpZ2h0LiAobGVmdGVyIGluIGFycmF5IG9mIGNlbGxzIG9yIHJvd3MgdGhhbiBob3ZlcmVkIGNlbGwpXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgX2lzQm90dG9tT3JSaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5faG92ZXJlZENlbGxTaWRlID09PSAnYm90dG9tJyB8fCB0aGlzLl9ob3ZlcmVkQ2VsbFNpZGUgPT09ICdyaWdodCc7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyByb3cgaW4gdGFibGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9hZGRSb3coKSB7XG4gICAgY29uc3QgaW5kaWNhdGl2ZVJvdyA9IHRoaXMuX2hvdmVyZWRDZWxsLmNsb3Nlc3QoJ1RSJyk7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5fZ2V0SG92ZXJlZFNpZGVPZkNvbnRhaW5lcigpO1xuXG4gICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICBpbmRleCA9IGluZGljYXRpdmVSb3cuc2VjdGlvblJvd0luZGV4O1xuICAgICAgLy8gaWYgaW5zZXJ0aW5nIGFmdGVyIGhvdmVyZWQgY2VsbFxuICAgICAgaW5kZXggPSBpbmRleCArIHRoaXMuX2lzQm90dG9tT3JSaWdodCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3RhYmxlLmFkZFJvdyhpbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyByb3cgaW4gdGFibGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVSb3coKSB7XG4gICAgY29uc3QgaW5kaWNhdGl2ZVJvdyA9IHRoaXMuX2hvdmVyZWRDZWxsLmNsb3Nlc3QoJ1RSJyk7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5fZ2V0SG92ZXJlZFNpZGVPZkNvbnRhaW5lcigpO1xuXG4gICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICBpbmRleCA9IGluZGljYXRpdmVSb3cuc2VjdGlvblJvd0luZGV4O1xuICAgICAgLy8gaWYgaW5zZXJ0aW5nIGFmdGVyIGhvdmVyZWQgY2VsbFxuICAgICAgaW5kZXggPSBpbmRleCArIHRoaXMuX2lzQm90dG9tT3JSaWdodCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3RhYmxlLnJlbW92ZVJvdyhpbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQWRkcyBjb2x1bW4gaW4gdGFibGVcbiAgICovXG4gIF9hZGRDb2x1bW4oKSB7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5fZ2V0SG92ZXJlZFNpZGVPZkNvbnRhaW5lcigpO1xuXG4gICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICBpbmRleCA9IHRoaXMuX2hvdmVyZWRDZWxsLmNlbGxJbmRleDtcbiAgICAgIC8vIGlmIGluc2VydGluZyBhZnRlciBob3ZlcmVkIGNlbGxcbiAgICAgIGluZGV4ID0gaW5kZXggKyB0aGlzLl9pc0JvdHRvbU9yUmlnaHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl90YWJsZS5hZGRDb2x1bW4oaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFJlbW92ZXMgY29sdW1uIGluIHRhYmxlXG4gICAqL1xuICBfcmVtb3ZlQ29sdW1uKCkge1xuICAgIGxldCBpbmRleCA9IHRoaXMuX2dldEhvdmVyZWRTaWRlT2ZDb250YWluZXIoKTtcblxuICAgIGlmIChpbmRleCA9PT0gMSkge1xuICAgICAgaW5kZXggPSB0aGlzLl9ob3ZlcmVkQ2VsbC5jZWxsSW5kZXg7XG4gICAgICAvLyBpZiBpbnNlcnRpbmcgYWZ0ZXIgaG92ZXJlZCBjZWxsXG4gICAgICBpbmRleCA9IGluZGV4ICsgdGhpcy5faXNCb3R0b21PclJpZ2h0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5fdGFibGUucmVtb3ZlQ29sdW1uKGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBpZiBcImNudHJsICsgRW5ldGVyXCIgaXMgcHJlc3NlZCB0aGVuIGNyZWF0ZSBuZXcgbGluZSB1bmRlciBjdXJyZW50IGFuZCBmb2N1cyBpdFxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50XG4gICAqL1xuICBfY29udGFpbmVyRW50ZXJQcmVzc2VkKGV2ZW50KSB7XG4gICAgaWYgKCEodGhpcy5fdGFibGUuc2VsZWN0ZWRDZWxsICE9PSBudWxsICYmICFldmVudC5zaGlmdEtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5kaWNhdGl2ZVJvdyA9IHRoaXMuX3RhYmxlLnNlbGVjdGVkQ2VsbC5jbG9zZXN0KCdUUicpO1xuICAgIGxldCBpbmRleCA9IHRoaXMuX2dldEhvdmVyZWRTaWRlT2ZDb250YWluZXIoKTtcblxuICAgIGlmIChpbmRleCA9PT0gMSkge1xuICAgICAgaW5kZXggPSBpbmRpY2F0aXZlUm93LnNlY3Rpb25Sb3dJbmRleCArIDE7XG4gICAgfVxuICAgIGNvbnN0IG5ld3N0ciA9IHRoaXMuX3RhYmxlLmFkZFJvdyhpbmRleCk7XG5cbiAgICBuZXdzdHIuY2VsbHNbMF0uY2xpY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBXaGVuIHRoZSBtb3VzZSBlbnRlcnMgdGhlIGRldGVjdGlvbiBhcmVhXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAgICovXG4gIF9tb3VzZUVudGVySW5EZXRlY3RBcmVhKGV2ZW50KSB7XG4gICAgY29uc3QgY29vcmRzID0gZ2V0Q29vcmRzKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgbGV0IHNpZGUgPSBnZXRTaWRlQnlDb29yZHMoY29vcmRzLCBldmVudC5wYWdlWCwgZXZlbnQucGFnZVkpO1xuXG4gICAgZXZlbnQudGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdtb3VzZUluQWN0aXZhdGluZ0FyZWEnLCB7XG4gICAgICAnZGV0YWlsJzoge1xuICAgICAgICAnc2lkZSc6IHNpZGVcbiAgICAgIH0sXG4gICAgICAnYnViYmxlcyc6IHRydWVcbiAgICB9KSk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=